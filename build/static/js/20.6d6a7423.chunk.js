(this.webpackJsonprims=this.webpackJsonprims||[]).push([[20],{48:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return b})),n.d(t,"Info",(function(){return k})),n.d(t,"User",(function(){return _}));var a=n(12),i=n(16),r=n(2),s=n(3),o=n(5),c=n(4),u=n(6),l=n(0),d=n.n(l),h=n(10),m=n(7),f=n(15),p=n(13),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).listItem=function(e){return[e.id,e.alias,e.name,d.a.createElement(l.Fragment,{key:"ul_buttons_"+e.id},d.a.createElement(f.ConfigureButton,{key:"ul_btn_info_"+e.id,onClick:function(){return n.changeContent(d.a.createElement(k,{key:"user_info_"+e.id,id:e.id}))},title:"Edit user"}),d.a.createElement(f.DeleteButton,{key:"ul_btn_del_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete user"}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Really delete user?")&&Object(h.b)("api/master/user_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/master/user_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(l.Fragment,{key:"ul_fragment"},d.a.createElement(m.ContentList,{key:"ul_cl",header:"Users",thead:["ID","Alias","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(f.ReloadButton,{key:"ul_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(f.AddButton,{key:"ul_btn_add",onClick:function(){return e.changeContent(d.a.createElement(k,{key:"user_new_"+Object(h.c)(),id:"new"}))},title:"Add user"})),d.a.createElement(m.ContentData,{key:"ul_cd"},this.state.content))}}]),t}(l.Component),k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){n.context.cookie.id===n.state.data.id&&n.context.setCookie(Object(i.a)({},n.context.cookie,{theme:n.state.data.theme})),Object(h.b)("api/master/user_info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/system/theme_list").then((function(t){return e.setState({themes:t.data})})),Object(h.b)("api/master/user_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.found?this.state.data&&this.state.themes?d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"User"),d.a.createElement(m.InfoColumns,{key:"ui_content"},this.context.cookie.id===this.props.id?d.a.createElement(p.TextLine,{key:"alias",id:"alias",text:"alias"}):d.a.createElement(p.TextInput,{key:"alias",id:"alias",value:this.state.data.alias,onChange:this.onChange}),d.a.createElement(p.PasswordInput,{key:"password",id:"password",placeholder:"******",onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"email",id:"email",label:"E-Mail",value:this.state.data.email,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"name",id:"name",label:"Full name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"theme",id:"theme",value:this.state.data.theme,onChange:this.onChange},this.state.themes.map((function(e){return d.a.createElement("option",{key:"ui_theme_"+e,value:e},e)})))),d.a.createElement(f.SaveButton,{key:"ui_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):d.a.createElement(m.Spinner,null):d.a.createElement("article",null,"User with id: ",this.props.id," removed")}}]),t}(l.Component);k.contextType=m.RimsContext;var _=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"flexdiv centered"},d.a.createElement(k,{id:this.props.id}))}}]),t}(l.Component)}}]);
//# sourceMappingURL=20.6d6a7423.chunk.js.map