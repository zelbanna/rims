(this.webpackJsonprims=this.webpackJsonprims||[]).push([[7,3],{28:function(t,e,n){"use strict";n.r(e),n.d(e,"List",(function(){return _})),n.d(e,"Info",(function(){return y}));var a=n(9),i=n(13),c=n(3),r=n(4),o=n(6),l=n(5),u=n(7),s=n(0),d=n.n(s),m=n(8),h=n(1),f=n(2),k=n(10),_=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).changeContent=function(t){return n.setState({content:t})},n.deleteList=function(t){return window.confirm("Really delete location?")&&Object(m.b)("api/location/delete",{id:t}).then((function(e){return e.deleted&&n.setState({data:n.state.data.filter((function(e){return e.id!==t})),content:null})}))},n.listItem=function(t){return[t.id,t.name,d.a.createElement(s.Fragment,{key:"location_buttons_"+t.id},d.a.createElement(f.ConfigureButton,{key:"loc_btn_info_"+t.id,onClick:function(){return n.changeContent(d.a.createElement(y,{key:"location_"+t.id,id:t.id}))},title:"Edit location"}),d.a.createElement(f.DeleteButton,{key:"loc_btn_delete_"+t.id,onClick:function(){return n.deleteList(t.id)},title:"Delete location"}))]},n.state={},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/location/list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return d.a.createElement(s.Fragment,{key:"loc_fragment"},d.a.createElement(h.ContentList,{key:"loc_cl",header:"Locations",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(f.ReloadButton,{key:"loc_btn_reload",onClick:function(){return t.componentDidMount()}}),d.a.createElement(f.AddButton,{key:"loc_btn_add",onClick:function(){return t.changeContent(d.a.createElement(y,{key:"location_new_"+Object(m.c)(),id:"new"}))},title:"Add location"})),d.a.createElement(h.ContentData,{key:"loc_cd"},this.state.content))}}]),e}(s.Component),y=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).onChange=function(t){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},t.target.name,t.target.value))})},n.changeContent=function(t){return n.setState({content:t})},n.updateInfo=function(){return Object(m.b)("api/location/info",Object(i.a)({op:"update"},n.state.data)).then((function(t){return n.setState(t)}))},n.state={data:null,found:!0},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/location/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.found?this.state.data?d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Location"),d.a.createElement(h.InfoColumns,{key:"loc_content"},d.a.createElement(k.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange})),d.a.createElement(f.SaveButton,{key:"loc_btn_save",onClick:function(){return t.updateInfo()},title:"Save"})):d.a.createElement(h.Spinner,null):d.a.createElement("article",null,"Location id: ",this.props.id," removed")}}]),e}(s.Component)},40:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return v})),n.d(e,"List",(function(){return b})),n.d(e,"Layout",(function(){return C})),n.d(e,"Infra",(function(){return g}));var a=n(9),i=n(13),c=n(3),r=n(4),o=n(6),l=n(5),u=n(7),s=n(0),d=n.n(s),m=n(8),h=n(1),f=n(10),k=n(2),_=n(11),y=n(27),p=n(28),v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).changeContent=function(t){return n.setState(t)},n.state=d.a.createElement(b,{key:"rack_list"}),n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.context.loadNavigation(d.a.createElement(_.a,{key:"rack_navbar"},d.a.createElement(_.b,{key:"dev_nav_loc",title:"Locations",onClick:function(){return t.changeContent(d.a.createElement(p.List,{key:"location_list"}))},style:{float:"right"}}),d.a.createElement(_.d,{key:"dev_nav_racks",title:"Rack",style:{float:"right"}},d.a.createElement(_.c,{key:"dev_nav_all_rack",title:"Racks",onClick:function(){return t.changeContent(d.a.createElement(b,{key:"rack_list"}))}}),d.a.createElement(_.c,{key:"dev_nav_all_pdu",title:"PDUs",onClick:function(){return t.changeContent(d.a.createElement(g,{key:"pdu_list",type:"pdu"}))}}),d.a.createElement(_.c,{key:"dev_nav_all_con",title:"Consoles",onClick:function(){return t.changeContent(d.a.createElement(g,{key:"console_list",type:"console"}))}}))))}},{key:"render",value:function(){return d.a.createElement(s.Fragment,{key:"main_base"},this.state)}}]),e}(s.Component);v.contextType=h.RimsContext;var b=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).listItem=function(t){return[d.a.createElement(k.HrefButton,{key:"rl_btn_loc_"+t.id,text:t.location,onClick:function(){return n.changeContent(d.a.createElement(p.Info,{key:"li_"+t.location_id,id:t.location_id}))}}),t.name,d.a.createElement(s.Fragment,{key:"rack_list_buttons"},d.a.createElement(k.InfoButton,{key:"rl_btn_info_"+t.id,onClick:function(){return n.changeContent(d.a.createElement(E,{key:"rack_info_"+t.id,id:t.id}))},title:"Rack information"}),d.a.createElement(k.GoButton,{key:"rl_btn_go_"+t.id,onClick:function(){return n.context.changeMain(d.a.createElement(y.Main,{key:"rack_device_"+t.id,rack_id:t.id}))},title:"Rack inventory"}),d.a.createElement(k.ItemsButton,{key:"rl_btn_list_"+t.id,onClick:function(){return n.changeContent(d.a.createElement(C,{key:"rack_layout_"+t.id,id:t.id,changeSelf:n.changeContent}))},title:"Rack layout"}),d.a.createElement(k.DeleteButton,{key:"rl_btn_del_"+t.id,onClick:function(){return n.deleteList(t.id)},title:"Delete rack"}))]},n.changeContent=function(t){return n.setState({content:t})},n.deleteList=function(t){return window.confirm("Really delete rack?")&&Object(m.b)("api/rack/delete",{id:t}).then((function(e){return e.deleted&&n.setState({data:n.state.data.filter((function(e){return e.id!==t})),content:null})}))},n.state={},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/rack/list",{sort:"name"}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return d.a.createElement(s.Fragment,{key:"rack_fragment"},d.a.createElement(h.ContentList,{key:"rack_cl",header:"Racks",thead:["Location","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(k.ReloadButton,{key:"rl_btn_reload",onClick:function(){return t.componentDidMount()}}),d.a.createElement(k.AddButton,{key:"rl_btn_add",onClick:function(){return t.changeContent(d.a.createElement(E,{key:"rack_new_"+Object(m.c)(),id:"new"}))},title:"Add rack"})),d.a.createElement(h.ContentData,{key:"rack_cd"},this.state.content))}}]),e}(s.Component);b.contextType=h.RimsContext;var E=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).onChange=function(t){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},t.target.name,t.target.value))})},n.updateInfo=function(){return Object(m.b)("api/rack/info",Object(i.a)({op:"update"},n.state.data)).then((function(t){return n.setState(t)}))},n.state={data:null,found:!0},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/rack/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Rack"),d.a.createElement(h.InfoColumns,{key:"rack_content"},d.a.createElement(f.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement(f.TextInput,{key:"size",id:"size",value:this.state.data.size,onChange:this.onChange}),d.a.createElement(f.SelectInput,{key:"console",id:"console",value:this.state.data.console,onChange:this.onChange},this.state.consoles.map((function(t){return d.a.createElement("option",{key:"ri_con_"+t.id,value:t.id},t.hostname)}))),d.a.createElement(f.SelectInput,{key:"location_id",id:"location_id",label:"Location",value:this.state.data.location_id,onChange:this.onChange},this.state.locations.map((function(t){return d.a.createElement("option",{key:"ri_loc_"+t.id,value:t.id},t.name)}))),d.a.createElement(f.SelectInput,{key:"pdu_1",id:"pdu_1",label:"PDU1",value:this.state.data.pdu_1,onChange:this.onChange},this.state.pdus.map((function(t){return d.a.createElement("option",{key:"ri_pdu1_"+t.id,value:t.id},t.hostname)}))),d.a.createElement(f.SelectInput,{key:"pdu_2",id:"pdu_2",label:"PDU2",value:this.state.data.pdu_2,onChange:this.onChange},this.state.pdus.map((function(t){return d.a.createElement("option",{key:"ri_pdu2_"+t.id,value:t.id},t.hostname)})))),d.a.createElement(k.SaveButton,{key:"ri_btn_save",onClick:function(){return t.updateInfo()},title:"Save"})):d.a.createElement(h.Spinner,null)}}]),e}(s.Component),C=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(o.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(i)))).changeContent=function(t){return n.props.changeSelf(t)},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/rack/devices",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"createRack",value:function(t,e,n){for(var a=this,i=[],c=1;c<this.state.size+1;c++)i.push(d.a.createElement("div",{key:t+"_left_"+c,className:"rack-left",style:{gridRow:-c}},c),d.a.createElement("div",{key:t+"_right_"+c,className:"rack-right",style:{gridRow:-c}},c));return e.forEach((function(t){return i.push(d.a.createElement("div",{key:"rd_"+t.id,className:"rack-data",style:{gridRowStart:a.state.size+2-n*t.rack_unit,gridRowEnd:a.state.size+2-(n*t.rack_unit+t.rack_size)}},d.a.createElement(k.HrefButton,{key:"rd_btn_"+t.id,style:{color:"var(--ui-txt-color)"},onClick:function(){return a.changeContent(d.a.createElement(y.Info,{key:"device_info",id:t.id}))},text:t.hostname})))})),i}},{key:"render",value:function(){return this.state?d.a.createElement(s.Fragment,{key:"rack_layout"},d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Front"),d.a.createElement("div",{className:"rack",style:{grid:"repeat(".concat(this.state.size-1,", 2vw)/2vw 25vw 2vw")}},this.createRack("front",this.state.front,1))),d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Back"),d.a.createElement("div",{className:"rack",style:{grid:"repeat(".concat(this.state.size-1,", 2vw)/2vw 25vw 2vw")}},this.createRack("back",this.state.back,-1)))):d.a.createElement(h.Spinner,null)}}]),e}(s.Component),g=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).listItem=function(t){return[d.a.createElement(k.HrefButton,{key:"rinfra_dev_"+t.id,text:t.id,onClick:function(){return n.changeContent(d.a.createElement(y.Info,{key:"device_"+t.id,id:t.id}))},title:"Device info"}),t.hostname,d.a.createElement(s.Fragment,{key:"rinfra_buttons"},d.a.createElement(k.InfoButton,{key:"rinfra_btn_"+t.id,onClick:function(){return n.context.changeMain({module:t.type_base,function:"Manage",args:{device_id:t.id,type:t.type_name}})},title:"Manage device"}))]},n.changeContent=function(t){return n.setState({content:t})},n.state={},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/device/list",{field:"base",search:this.props.type,extra:["type"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return d.a.createElement(s.Fragment,{key:"rinfra_fragment"},d.a.createElement(h.ContentList,{key:"rinfra_cl",header:this.props.type,thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(k.ReloadButton,{key:"rinfra_btn_reload",onClick:function(){return t.componentDidMount()}})),d.a.createElement(h.ContentData,{key:"rinfra_cd"},this.state.content))}}]),e}(s.Component);g.contextType=h.RimsContext}}]);
//# sourceMappingURL=7.8ce3800c.chunk.js.map