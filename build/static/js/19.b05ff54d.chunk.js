(this.webpackJsonprims=this.webpackJsonprims||[]).push([[19],{44:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return v})),n.d(e,"Report",(function(){return y})),n.d(e,"TaskReport",(function(){return k})),n.d(e,"FileList",(function(){return E}));var a=n(13),r=n(3),i=n(4),s=n(6),c=n(5),o=n(7),l=n(0),u=n.n(l),m=n(8),p=n(1),h=n(2),f=n(11),v=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).changeContent=function(t){return n.setState({content:t})},n.compileNavItems=function(){var t="master"===n.context.cookie.node;n.context.loadNavigation(u.a.createElement(f.a,{key:"system_navbar"},t&&u.a.createElement(f.b,{key:"sys_nav_node",title:"Nodes",onClick:function(){return n.changeImport("node","List")}}),t&&u.a.createElement(f.b,{key:"sys_nav_srv",title:"Servers",onClick:function(){return n.changeImport("server","List")}}),t&&u.a.createElement(f.b,{key:"sys_nav_erd",title:"ERD",onClick:function(){return window.open("erd.pdf","_blank")}}),t&&u.a.createElement(f.b,{key:"sys_nav_user",title:"Users",onClick:function(){return n.changeImport("user","List")}}),t&&u.a.createElement(f.b,{key:"sys_nav_ctrl",title:"Controls",onClick:function(){return n.changeContent(u.a.createElement(O,{key:"system_controls"}))}}),u.a.createElement(f.d,{key:"sys_nav_reports",title:"Reports"},u.a.createElement(f.c,{key:"sys_nav_sys",title:"System",onClick:function(){return n.changeContent(u.a.createElement(y,{key:"system_report"}))}}),u.a.createElement(f.c,{key:"sys_nav_task",title:"Tasks",onClick:function(){return n.changeContent(u.a.createElement(k,{key:"task_report"}))}}),t&&u.a.createElement(f.c,{key:"sys_nav_act",title:"Activities",onClick:function(){return n.changeImport("activity","Report")}}),t&&u.a.createElement(f.c,{key:"sys_nav_resv",title:"Reservations",onClick:function(){return n.changeImport("reservation","Report")}}),t&&u.a.createElement(f.c,{key:"sys_nav_dev",title:"Devices",onClick:function(){return n.changeImport("device","Report")}}),t&&u.a.createElement(f.c,{key:"sys_nav_inv",title:"Inventory",onClick:function(){return n.changeImport("inventory","Report")}})),u.a.createElement(f.b,{key:"sys_nav_rest",title:"REST",onClick:function(){return n.changeContent(u.a.createElement(d,{key:"rest_list"}))}}),n.state.services.length>0&&u.a.createElement(f.d,{key:"sys_nav_svcs",title:"Services"},n.state.services.map((function(t,e){return u.a.createElement(f.c,{key:"sys_nav_svcs_"+e,title:t.name,onClick:function(){return n.changeContent(u.a.createElement(j,Object.assign({key:t.name},t)))}})}))),u.a.createElement(f.f,{key:"sys_nav_reload",onClick:function(){return n.setState({content:null})}}),n.state.navinfo.map((function(t,e){return u.a.createElement(f.e,{key:"sys_nav_ni_"+e,title:t})}))))},n.state={navinfo:[],navitems:[],logs:[],services:[]},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/system/service_list").then((function(e){Object.assign(t.state,e),t.compileNavItems()})),Object(m.b)("api/master/inventory",{node:this.context.cookie.node,user_id:this.context.cookie.id}).then((function(e){Object.assign(t.state,e),t.compileNavItems()}))}},{key:"changeImport",value:function(t,e){var a=this;n(18)("./"+t+".jsx").then((function(n){var r=n[e];a.setState({content:u.a.createElement(r,{key:t+"_"+e})})}))}},{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"main_base"},this.state.content)}}]),e}(l.Component);v.contextType=p.RimsContext;var y=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).listItem=function(t){return[t.info,t.value]},n.state={},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("system/report").then((function(e){return t.setState({data:Object.keys(e).sort((function(t,e){return t.localeCompare(e)})).map((function(t){return{info:t,value:e[t]}}))})}))}},{key:"render",value:function(){return u.a.createElement(p.ContentReport,{key:"sys_cr",header:"System Report",thead:["Key","Value"],trows:this.state.data,listItem:this.listItem})}}]),e}(l.Component),k=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).listItem=function(t){return[t.node,t.frequency,t.module,t.function,t.args]},n.state={},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/master/task_list",{node:this.context.cookie.node}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return u.a.createElement(p.ContentReport,{key:"task_cr",header:"Tasks",thead:["Node","Frequency","Module","Function","Arguments"],trows:this.state.data,listItem:this.listItem})}}]),e}(l.Component);k.contextType=p.RimsContext;var d=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).listItem=function(t){return[t.api,u.a.createElement(h.HrefButton,{key:"rest_"+t.api,text:t.function,onClick:function(){n.changeContent(u.a.createElement(b,Object.assign({key:"rest_info_".concat(t.api,"_").concat(t.function)},t)))}})]},n.changeContent=function(t){return n.setState({content:t})},n.state={},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/system/rest_explore").then((function(e){var n=[];e.data.forEach((function(t){return t.functions.forEach((function(e){return n.push({api:t.api,function:e})}))})),t.setState({data:n})}))}},{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"rest_tp_fragment"},u.a.createElement(p.ContentList,{key:"rest_tp_cl",header:"REST API",thead:["API","Function"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(p.ContentData,{key:"rest_tp_cd"},this.state.content))}}]),e}(l.Component),b=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).state={},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.module&&this.state.information?u.a.createElement("article",{className:"text"},u.a.createElement("h1",null,"API: ",this.props.api),this.state.module.map((function(t,e){return u.a.createElement("p",{key:"ria_"+e},t)})),u.a.createElement("h1",null,"Function: ",this.props.function),this.state.information.map((function(t,e){return u.a.createElement("p",{key:"rif_"+e},t)}))):u.a.createElement(p.Spinner,null)}}]),e}(l.Component),_=function(t){function e(){return Object(r.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/"+this.props.api,this.props.args).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?u.a.createElement("article",{className:"code"},u.a.createElement("h1",null,this.props.text),u.a.createElement("pre",null,JSON.stringify(this.state,null,2))):u.a.createElement(p.Spinner,null)}}]),e}(l.Component),O=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).changeContent=function(t){return n.setState({content:t})},n.listItem=function(t){return[u.a.createElement(h.HrefButton,{key:"ctrl_"+t.api,text:t.text,onClick:function(){n.changeContent(u.a.createElement(_,Object.assign({key:"rest_"+t.api},t)))}})]},n.state={data:[{api:"monitor/ipam_init",text:"IPAM status check"},{api:"ipam/address_events",text:"IPAM clear status logs",args:{op:"clear"}},{api:"monitor/interface_init",text:"Interface status check"},{api:"device/network_info_discover",text:"Discover device system information (sysmac etc)"},{api:"device/model_sync",text:"Sync device model mapping"},{api:"device/vm_mapping",text:"VM UUID mapping"},{api:"master/oui_fetch",text:"Sync OUI database"},{api:"reservation/expiration_status",text:"Check reservation status"},{api:"system/sleep",text:"Sleep Test",args:{seconds:10}}]},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"ctl_fragment"},u.a.createElement(p.ContentList,{key:"ctl_cl",header:"",thead:["API"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(p.ContentData,{key:"ctl_cd"},this.state.content))}}]),e}(l.Component),E=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).listItem=function(t){return"images"===n.state.mode?".png"===t.substr(t.length-4)?[t,u.a.createElement("img",{src:n.state.path+"/"+t,alt:n.state.path+"/"+t})]:[]:[u.a.createElement(l.Fragment,{key:t},n.state.path+"/",u.a.createElement("a",{href:n.state.path+"/"+t,target:"_blank",rel:"noopener noreferrer"},t))]},n.state={files:null},n.props.hasOwnProperty("directory")?(n.state.mode="directory",n.state.args={directory:n.props.directory}):n.props.hasOwnProperty("fullpath")?(n.state.mode="fullpath",n.state.args={fullpath:n.props.fullpath}):(n.state.mode="images",n.state.args={}),n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(m.b)("api/system/file_list",this.state.args).then((function(e){"OK"===e.status?t.setState(e):(window.alert("Error retrieving files:"+e.info),t.setState({files:[]}))}))}},{key:"render",value:function(){var t=this;return this.state.files?u.a.createElement("article",{className:"files"},u.a.createElement("h1",null,this.state.mode),u.a.createElement("div",{className:"table"},u.a.createElement("div",{className:"tbody"},this.state.files.map((function(e,n){return u.a.createElement(p.TableRow,{key:"content_trow_files_"+n,cells:t.listItem(e)})}))))):u.a.createElement(p.Spinner,null)}}]),e}(l.Component),j=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).state={state:"inactive"},n}return Object(o.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.updateService({})}},{key:"updateService",value:function(t){var e=this;this.setState({spinner:u.a.createElement(p.Spinner,null)}),Object(m.b)("api/system/service_info",Object(a.a)({service:this.props.service},t)).then((function(t){"OK"===t.status?e.setState(Object(a.a)({},t,{spinner:null})):window.alert("Error retrieving service state:"+t.info)}))}},{key:"render",value:function(){var t=this,e="inactive"===this.state.state,n=e?h.StartButton:h.StopButton;return u.a.createElement("article",{className:"lineinput"},u.a.createElement("div",null,u.a.createElement("b",null,this.props.name),": ",this.state.state," (",this.state.extra,") ",u.a.createElement(n,{key:"state_change",onClick:function(){return t.updateService({op:e?"start":"stop"})},title:"Operate service"})),this.state.spinner)}}]),e}(l.Component)}}]);
//# sourceMappingURL=19.b05ff54d.chunk.js.map