(this.webpackJsonprims=this.webpackJsonprims||[]).push([[2],{32:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return _})),n.d(t,"NetworkList",(function(){return f})),n.d(t,"AddressInfo",(function(){return g}));var a=n(9),i=n(13),r=n(3),o=n(4),s=n(6),c=n(5),u=n(7),l=n(0),d=n.n(l),h=n(8),m=n(1),p=n(10),k=n(2),_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).changeContent=function(e){return n.setState(e)},n.state=d.a.createElement(f,{key:"network_list"}),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.a.createElement(l.Fragment,{key:"main_base"},this.state)}}]),t}(l.Component);_.contextType=m.RimsContext;var f=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).listItem=function(e){return[e.id,e.netasc,e.description,e.service,d.a.createElement(l.Fragment,{key:"network_buttons_"+e.id},d.a.createElement(k.ConfigureButton,{key:"net_btn_info_"+e.id,onClick:function(){return n.changeContent(d.a.createElement(b,{key:"network_"+e.id,id:e.id}))},title:"Edit network properties"}),d.a.createElement(k.ItemsButton,{key:"net_btn_items_"+e.id,onClick:function(){return n.changeContent(d.a.createElement(C,{changeSelf:n.changeContent,key:"address_list_"+e.id,network_id:e.id}))},title:"View addresses"}),d.a.createElement(k.ViewButton,{key:"net_btn_layout_"+e.id,onClick:function(){return n.changeContent(d.a.createElement(y,{changeSelf:n.changeContent,key:"address_layout_"+e.id,network_id:e.id}))},title:"View usage map"}),d.a.createElement(k.DeleteButton,{key:"net_btn_delete_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete network"}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Really delete network")&&Object(h.b)("api/ipam/network_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/network_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(l.Fragment,{key:"nl_fragment"},d.a.createElement(m.ContentList,{key:"nl_cl",header:"Networks",thead:["ID","Network","Description","DHCP",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},d.a.createElement(k.ReloadButton,{key:"nl_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(k.AddButton,{key:"nl_btn_add",onClick:function(){return e.changeContent(d.a.createElement(b,{key:"network_new_"+Object(h.c)(),id:"new"}))},title:"Add network"}),d.a.createElement(k.LogButton,{key:"nl_btn_doc",onClick:function(){return e.changeContent(d.a.createElement(v,{key:"network_leases"}))},title:"View IPAM/DHCP leases"})),d.a.createElement(m.ContentData,{key:"nl_cd"},this.state.content))}}]),t}(l.Component),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.changeContent=function(e){return n.setState({content:e})},n.updateInfo=function(){return Object(h.b)("api/ipam/network_info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/network_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Network"),d.a.createElement(m.InfoColumns,{key:"network_content"},d.a.createElement(p.TextLine,{key:"id",id:"id",label:"ID",text:this.state.data.id}),d.a.createElement(p.TextInput,{key:"description",id:"description",value:this.state.data.description,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"network",id:"network",value:this.state.data.network,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"mask",id:"mask",value:this.state.data.mask,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"gateway",id:"gateway",value:this.state.data.gateway,onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"server_id",id:"server_id",label:"Server",value:this.state.data.server_id,onChange:this.onChange},this.state.servers.map((function(e,t){return d.a.createElement("option",{key:"ni_srv_"+t,value:e.id},"".concat(e.service,"@").concat(e.node))}))),d.a.createElement(p.SelectInput,{key:"reverse_zone_id",id:"reverse_zone_id",label:"Reverse Zone",value:this.state.data.reverse_zone_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"ni_rzone_"+t,value:e.id},"".concat(e.server," (").concat(e.name,")"))})))),d.a.createElement(k.SaveButton,{key:"network_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):d.a.createElement(m.Spinner,null)}}]),t}(l.Component),y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).changeContent=function(e){return a.props.changeSelf(e)},a.changeDevice=function(e){return n.e(0).then(n.bind(null,27)).then((function(t){return a.changeContent(d.a.createElement(t.Info,{key:"di_"+e,id:e}))}))},a.createDevice=function(e,t){return n.e(0).then(n.bind(null,27)).then((function(n){return a.changeContent(d.a.createElement(n.New,{key:"dn_new",ipam_network_id:e,ip:t}))}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/address_list",{network_id:this.props.network_id,dict:"ip_integer",extra:["device_id"]}).then((function(t){return e.setState(Object(i.a)({},t,{start_address:parseInt(t.network.split(".")[3])}))}))}},{key:"render",value:function(){var e=this;if(this.state){for(var t=[],n=function(n){e.state.data.hasOwnProperty(e.state.start+n)?t.push(d.a.createElement("button",{key:"btn_"+e.state.start+n,className:"info ipam red",onClick:function(){return e.changeDevice(e.state.data[e.state.start+n].device_id)}},n%256)):t.push(d.a.createElement("button",{key:"btn_"+e.state.start+n,className:"info ipam green",onClick:function(){return e.createDevice(e.props.network_id,Object(h.a)(e.state.start+n))}},n%256))},a=0;a<=this.state.size;a++)n(a);return d.a.createElement("article",null,d.a.createElement("h1",null,this.state.network,"/",this.state.mask),t)}return d.a.createElement(m.Spinner,null)}}]),t}(l.Component),v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).listItem=function(e){return[e.ip,e.mac,e.hostname,e.oui,e.starts,e.ends]},n.state={},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/server_leases",{type:"active"}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return d.a.createElement(m.ContentReport,{key:"lease_cr",header:"Leases",thead:["IP","Mac","Hostname","OUI","Starts","End"],trows:this.state.data,listItem:this.listItem})}}]),t}(l.Component),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).changeContent=function(e){return n.props.changeSelf(e)},n.listItem=function(e){return[e.id,e.ip,e.hostname,e.domain,e.a_id,e.ptr_id,Object(m.StateMap)({state:e.state}),d.a.createElement(l.Fragment,{key:"ip_button_"+e.id},d.a.createElement(k.ConfigureButton,{key:"al_btn_info"+e.id,onClick:function(){return n.changeContent(d.a.createElement(g,{key:"address_info_"+e.id,id:e.id}))},title:"Edit address entry"}),d.a.createElement(k.DeleteButton,{key:"al_btn_delete"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete address entry"}))]},n.deleteList=function(e){return window.confirm("Delete address?")&&Object(h.b)("api/ipam/address_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e}))})}))},n.state={data:null,result:null},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/address_list",{network_id:this.props.network_id,extra:["a_id","ptr_id","hostname","a_domain_id","device_id"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(m.ContentReport,{key:"al_cr",header:"Allocated IP Addresses",thead:["ID","IP","Hostname","Domain","A","PTR","",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},d.a.createElement(k.ReloadButton,{key:"al_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(k.AddButton,{key:"al_btn_add",onClick:function(){return e.changeContent(d.a.createElement(g,{key:"address_new_"+Object(h.c)(),network_id:e.props.network_id,id:"new"}))},title:"Add address entry"}))}}]),t}(l.Component),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(h.b)("api/ipam/address_info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(h.b)("api/ipam/address_info",{id:this.props.id,network_id:this.props.network_id}).then((function(t){return e.setState(t)})),Object(h.b)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})}))}},{key:"render",value:function(){var e=this;return this.state&&this.state.data&&this.state.domains?d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"IP Address"),d.a.createElement(m.InfoColumns,{key:"ip_content"},d.a.createElement(p.TextLine,{key:"id",id:"id",label:"ID",text:this.state.data.id}),d.a.createElement(p.TextLine,{key:"network",id:"network",text:this.state.extra.network}),d.a.createElement(p.TextInput,{key:"ip",id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"a_id",id:"a_id",label:"A_id",value:this.state.data.a_id,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"ptr_id",id:"ptr_id",label:"PTR_id",value:this.state.data.ptr_id,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"a_domain_id",id:"a_domain_id",label:"Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"ai_dom_"+t,value:e.id},e.name)})))),d.a.createElement(k.SaveButton,{key:"ip_save",onClick:function(){return e.updateInfo()},title:"Save"}),d.a.createElement(m.Result,{key:"ip_operation",result:"OK"!==this.state.status?this.state.info:"OK"})):d.a.createElement(m.Spinner,null)}}]),t}(l.Component)}}]);
//# sourceMappingURL=2.f5a04be4.chunk.js.map