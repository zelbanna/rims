(this.webpackJsonprims=this.webpackJsonprims||[]).push([[14],{38:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return k})),n.d(t,"LogShow",(function(){return E}));var a=n(10),o=n(13),r=n(3),i=n(4),c=n(6),l=n(5),u=n(7),s=n(0),d=n.n(s),m=n(8),h=n(1),f=n(11),b=n(9),p=n(2),k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).listItem=function(e){return[e.node,e.url,d.a.createElement(s.Fragment,{key:"node_buttons"},d.a.createElement(p.InfoButton,{key:"nl_btn_info"+e.id,onClick:function(){return n.changeContent(d.a.createElement(y,{key:"node_info_"+e.id,id:e.id}))},title:"Node information"}),d.a.createElement(p.DeleteButton,{key:"nl_btn_delete"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete node"}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Really delete node?")&&Object(m.b)("api/master/node_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/master/node_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(s.Fragment,{key:"node_fragment"},d.a.createElement(h.ContentList,{key:"node_cl",header:"Nodes",thead:["Node","URL",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(p.ReloadButton,{key:"nl_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(p.AddButton,{key:"nl_btn_add",onClick:function(){return e.changeContent(d.a.createElement(y,{key:"node_new_"+Object(m.c)(),id:"new"}))},title:"Add node"})),d.a.createElement(h.ContentData,{key:"node_cd"},this.state.content))}}]),t}(s.Component),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).searchInfo=function(){return Object(m.b)("api/device/search",{node:n.state.data.node}).then((function(e){return e.found&&n.setState({data:Object(o.a)({},n.state.data,{hostname:e.device.hostname,device_id:e.device.id})})}))},n.onChange=function(e){return n.setState({data:Object(o.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.changeContent=function(e){return n.setState({content:e})},n.updateInfo=function(){return Object(m.b)("api/master/node_info",Object(o.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0,content:null},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/master/node_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.found){if(this.state.data){var t="new"!==this.state.data.id;return d.a.createElement(s.Fragment,{key:"node_info_fragment"},d.a.createElement("article",{className:"info"},d.a.createElement("h1",null,"Node"),d.a.createElement(h.InfoColumns,{key:"node_content"},d.a.createElement(b.TextInput,{key:"node",id:"node",value:this.state.data.node,onChange:this.onChange}),d.a.createElement(b.UrlInput,{key:"url",id:"url",value:this.state.data.url,onChange:this.onChange}),d.a.createElement(b.TextInput,{key:"hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange})),d.a.createElement(p.SaveButton,{key:"ni_btn_save",onClick:function(){return e.updateInfo()},title:"Save information"}),t&&!this.state.data.hostname&&d.a.createElement(p.SearchButton,{key:"ni_btn_srch",onClick:this.searchInfo,title:"Try to map node to device"}),t&&d.a.createElement(p.ReloadButton,{key:"ni_btn_reload",onClick:function(){return e.changeContent(d.a.createElement(_,{key:"node_reload",node:e.state.data.node}))}}),t&&d.a.createElement(p.LogButton,{key:"ni_btn_logs",onClick:function(){return e.changeContent(d.a.createElement(E,{key:"node_logs",node:e.state.data.node}))},title:"View node logs"}),t&&d.a.createElement(p.DeleteButton,{key:"ni_btn_logc",onClick:function(){return e.changeContent(d.a.createElement(g,{key:"node_logc",node:e.state.data.node,msg:"Really clear logs?"}))},title:"Clear logs"})),d.a.createElement(f.a,{key:"node_navigation",id:"node_navigation"}),this.state.content)}return d.a.createElement(h.Spinner,null)}return d.a.createElement("article",null,"Node with id: ",this.props.id," removed")}}]),t}(s.Component),_=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("system/reload/"+this.props.node).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?d.a.createElement("article",{className:"code"},d.a.createElement("h1",null,"Module"),this.state.modules.map((function(e,t){return d.a.createElement("span",{key:t},e)}))):d.a.createElement(h.Spinner,null)}}]),t}(s.Component),g=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/logs_clear?node="+this.props.node).then((function(t){return e.setState({logs:t.file})}))}},{key:"render",value:function(){return this.state?d.a.createElement("article",{className:"code"},d.a.createElement("h1",null,"Cleared"),Object.entries(this.state.logs).map((function(e){return d.a.createElement("span",{key:e[0]},e[0],": ",e[1])}))):d.a.createElement(h.Spinner,null)}}]),t}(s.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/logs_get?node="+this.props.node).then((function(t){return e.setState({logs:t})}))}},{key:"render",value:function(){return this.state?d.a.createElement("article",{className:"code"},Object.entries(this.state.logs).map((function(e){return d.a.createElement(s.Fragment,null,d.a.createElement("h1",null,e[0]),e[1].map((function(t,n){return d.a.createElement("span",{key:e[0]+"_"+n},t)})))}))):d.a.createElement(h.Spinner,null)}}]),t}(s.Component)}}]);
//# sourceMappingURL=14.81c31606.chunk.js.map