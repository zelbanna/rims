{"version":3,"sources":["dns.jsx"],"names":["Main","changeContent","elem","setState","this","DomainList","key","state","Component","props","listItem","row","id","name","service","onClick","DomainInfo","title","RecordList","changeSelf","domain_id","deleteList","content","window","confirm","rest_call","then","result","deleted","data","filter","sync","JSON","stringify","header","thead","trows","componentDidMount","rnd","syncDomains","Status","onChange","e","target","value","updateInfo","op","found","old","className","text","infra","node","label","foreign_id","server_id","servers","map","idx","master","type","notified_serial","top","who","style","display","headers","Object","entries","entry","ns","split","index","cells","count","fqdn","ttl","RecordInfo","includes","info","undefined","placeholder","status"],"mappings":"wRAQaA,EAAb,2MAKCC,cAAgB,SAACC,GAAD,OAAU,EAAKC,SAASD,IALzC,mFAEEE,KAAKD,SAAS,kBAACE,EAAD,CAAYC,IAAI,mBAFhC,+BAQE,OAAQ,kBAAC,WAAD,CAAUA,IAAI,aAAaF,KAAKG,WAR1C,GAA0BC,aAcbH,EAAb,YACC,WAAYI,GAAO,IAAD,8BACjB,4CAAMA,KAkBPC,SAAW,SAACC,GAAD,MAAS,CAACA,EAAIC,GAAGD,EAAIE,KAAKF,EAAIG,QAAQ,kBAAC,WAAD,CAAUR,IAAK,kBAAkBK,EAAIC,IACpF,kBAAC,kBAAD,CAAiBN,IAAK,YAAYK,EAAIC,GAAIG,QAAS,kBAAM,EAAKd,cAAc,kBAACe,EAAD,CAAYV,IAAK,UAAUK,EAAIC,GAAIA,GAAID,EAAIC,OAAUK,MAAM,4BACvI,kBAAC,cAAD,CAAaX,IAAK,aAAaK,EAAIC,GAAIG,QAAS,kBAAM,EAAKd,cAAc,kBAACiB,EAAD,CAAYC,WAAY,EAAKlB,cAAeK,IAAK,SAASK,EAAIC,GAAIQ,UAAWT,EAAIC,OAAUK,MAAM,wBAC1K,kBAAC,eAAD,CAAcX,IAAK,cAAcK,EAAIC,GAAIG,QAAS,kBAAM,EAAKM,WAAWV,EAAIC,KAAMK,MAAM,qBAtBxE,EA0BlBhB,cAAgB,SAACC,GAAD,OAAU,EAAKC,SAAS,CAACmB,QAAQpB,KA1B/B,EA2BlBmB,WAAa,SAACT,GAAD,OAASW,OAAOC,QAAQ,yBAA2BC,YAAU,wBAAyB,CAACb,GAAGA,IAAKc,MAAK,SAAAC,GAAM,OAAIA,EAAOC,SAAW,EAAKzB,SAAS,CAAC0B,KAAK,EAAKtB,MAAMsB,KAAKC,QAAO,SAAAnB,GAAG,OAAKA,EAAIC,KAAOA,KAAKU,QAAQ,WAzBvN,EAAKf,MAAQ,GAFI,EADnB,iFAMqB,IAAD,OAClBkB,YAAU,uBAAuBC,MAAK,SAAAC,GACrCA,EAAOA,OAAS,KAChB,EAAKxB,SAASwB,QATjB,oCAae,IAAD,OACZF,YAAU,sBAAsB,CAACM,MAAK,IAAOL,MAAK,SAAAC,GACjDA,EAAOA,OAASK,KAAKC,UAAUN,EAAOA,QACtC,EAAKxB,SAASwB,QAhBjB,+BA8BU,IAAD,OACP,OAAO,kBAAC,WAAD,CAAUrB,IAAI,eACpB,kBAAC,cAAD,CAAaA,IAAI,QAAQ4B,OAAO,UAAUC,MAAO,CAAC,KAAK,SAAS,SAAS,IAAKC,MAAOhC,KAAKG,MAAMsB,KAAMnB,SAAUN,KAAKM,SAAUiB,OAAQvB,KAAKG,MAAMoB,QACjJ,kBAAC,eAAD,CAAcrB,IAAI,gBAAgBS,QAAS,kBAAM,EAAKsB,uBACtD,kBAAC,YAAD,CAAW/B,IAAI,aAAaS,QAAS,kBAAM,EAAKd,cAAc,kBAACe,EAAD,CAAYV,IAAK,cAAgBgC,cAAO1B,GAAG,UAAYK,MAAM,eAC3H,kBAAC,aAAD,CAAYX,IAAI,cAAcS,QAAS,kBAAM,EAAKwB,eAAetB,MAAM,yCACvE,kBAAC,YAAD,CAAWX,IAAI,kBAAkBS,QAAS,kBAAM,EAAKd,cAAc,kBAACuC,EAAD,CAAQlC,IAAI,oBAAqBW,MAAM,yBAE3G,kBAAC,cAAD,CAAaX,IAAI,SAASF,KAAKG,MAAMe,cAtCxC,GAAgCd,aA6C1BQ,E,YACL,WAAYP,GAAO,IAAD,8BACjB,4CAAMA,KAIPgC,SAAW,SAACC,GAAD,OAAO,EAAKvC,SAAS,CAAC0B,KAAK,eAAI,EAAKtB,MAAMsB,KAAhB,eAAuBa,EAAEC,OAAO9B,KAAM6B,EAAEC,OAAOC,WALlE,EAOlB3C,cAAgB,SAACC,GAAD,OAAU,EAAKC,SAAS,CAACmB,QAAQpB,KAP/B,EASlB2C,WAAa,kBAAOpB,YAAU,sBAAD,aAAwBqB,GAAG,UAAa,EAAKvC,MAAMsB,OAAOH,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,OAPnH,EAAKpB,MAAQ,CAACsB,KAAK,KAAMkB,OAAM,GAFd,E,iFAWE,IAAD,OAClBtB,YAAU,sBAAsB,CAACb,GAAGR,KAAKK,MAAMG,KAAKc,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,Q,+BAGxE,IAAD,OACR,GAAKvB,KAAKG,MAAMwC,MAEX,IAAI3C,KAAKG,MAAMsB,KAAM,CACzB,IAAMmB,EAA8B,QAAvB5C,KAAKG,MAAMsB,KAAKjB,GAC7B,OACC,6BAASqC,UAAU,QAClB,sCACA,kBAAC,cAAD,CAAa3C,IAAI,kBACf0C,GAAO,kBAAC,WAAD,CAAU1C,IAAI,OAAOM,GAAG,OAAOsC,KAAM9C,KAAKG,MAAM4C,MAAMC,OAC7DJ,GAAO,kBAAC,WAAD,CAAU1C,IAAI,UAAUM,GAAG,UAAUsC,KAAM9C,KAAKG,MAAM4C,MAAMrC,UACnEkC,GAAO,kBAAC,WAAD,CAAU1C,IAAI,aAAaM,GAAG,aAAayC,MAAM,aAAaH,KAAM9C,KAAKG,MAAM4C,MAAMG,cAC3FN,GAAO,kBAAC,cAAD,CAAa1C,IAAI,YAAYM,GAAG,YAAYyC,MAAM,SAAST,MAAOxC,KAAKG,MAAMsB,KAAK0B,UAAWd,SAAUrC,KAAKqC,UAAWrC,KAAKG,MAAMiD,QAAQC,KAAI,SAAC9C,EAAI+C,GAAL,OAAa,4BAAQpD,IAAK,OAAOoD,EAAKd,MAAOjC,EAAIC,IAApC,UAA4CD,EAAIG,QAAhD,YAA2DH,EAAIyC,WACnO,kBAAC,YAAD,CAAW9C,IAAI,OAAOM,GAAG,OAAOgC,MAAOxC,KAAKG,MAAMsB,KAAKhB,KAAM4B,SAAUrC,KAAKqC,WAC5E,kBAAC,YAAD,CAAWnC,IAAI,SAASM,GAAG,SAASgC,MAAOxC,KAAKG,MAAMsB,KAAK8B,OAAQlB,SAAUrC,KAAKqC,WAClF,kBAAC,YAAD,CAAWnC,IAAI,OAAOM,GAAG,OAAOgC,MAAOxC,KAAKG,MAAMsB,KAAK+B,KAAMnB,SAAUrC,KAAKqC,WAC5E,kBAAC,YAAD,CAAWnC,IAAI,kBAAkBM,GAAG,kBAAkByC,MAAM,kBAAkBT,MAAOxC,KAAKG,MAAMsB,KAAKgC,gBAAiBpB,SAAUrC,KAAKqC,YAEtI,kBAAC,aAAD,CAAYnC,IAAI,cAAcS,QAAS,kBAAM,EAAK8B,cAAc5B,MAAM,6BAIxE,OAAO,kBAAC,UAAD,MApBP,OAAO,oDAA0Bb,KAAKK,MAAMG,GAArC,gB,GAlBeJ,aA4CnBgC,E,YACL,WAAY/B,GAAO,IAAD,8BACjB,4CAAMA,KACDF,MAAQ,GAFI,E,iFAKE,IAAD,OAClBkB,YAAU,kBAAkBC,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,Q,+BAIzD,OAAIvB,KAAKG,MAAMuD,KAAO1D,KAAKG,MAAMwD,IAE/B,yBAAKC,MAAO,CAACC,QAAQ,SACpB,6BAAShB,UAAU,UAClB,kDACA,yBAAKA,UAAU,SACd,kBAAC,YAAD,CAAW3C,IAAI,YAAY4D,QAAS,CAAC,OAAO,UAAU,MAAM,UAC5D,yBAAKjB,UAAU,SACbkB,OAAOC,QAAQhE,KAAKG,MAAMuD,KAAKL,KAAI,SAAAY,GAAW,IAAMC,EAAKD,EAAM,GAAGE,MAAM,KAAM,OAAOF,EAAM,GAAGZ,KAAI,SAAC9C,EAAI6D,GAAL,OAAe,kBAAC,WAAD,CAAUlE,IAAK,YAAagE,EAAG,GAAK,IAAME,EAAOC,MAAO,CAACH,EAAG,GAAGA,EAAG,GAAG3D,EAAI+D,MAAM/D,EAAIgE,iBAIxM,6BAAS1B,UAAU,UAClB,iDACA,yBAAKA,UAAU,SACd,kBAAC,YAAD,CAAW3C,IAAI,YAAY4D,QAAS,CAAC,OAAO,UAAU,MAAM,MAAM,UAClE,yBAAKjB,UAAU,SACbkB,OAAOC,QAAQhE,KAAKG,MAAMwD,KAAKN,KAAI,SAAAY,GAAW,IAAMC,EAAKD,EAAM,GAAGE,MAAM,KAAM,OAAOF,EAAM,GAAGZ,KAAI,SAAC9C,EAAI6D,GAAL,OAAe,kBAAC,WAAD,CAAUlE,IAAK,YAAagE,EAAG,GAAK,IAAME,EAAOC,MAAO,CAACH,EAAG,GAAGA,EAAG,GAAG3D,EAAI+D,MAAM/D,EAAIoD,IAAIpD,EAAIgE,kBAO3M,kBAAC,UAAD,U,GAnCWnE,aAyCfU,E,YACL,WAAYT,GAAO,IAAD,8BACjB,4CAAMA,KAQPR,cAAgB,SAACC,GAAD,OAAU,EAAKO,MAAMU,WAAWjB,IAT9B,EAWlBQ,SAAW,SAACC,GAAD,MAAS,CAACA,EAAIC,GAAGD,EAAIE,KAAKF,EAAIW,QAAQX,EAAIiD,KAAKjD,EAAIiE,IAAI,kBAAC,WAAD,CAAUtE,IAAK,cAAcK,EAAIC,IACjG,kBAAC,kBAAD,CAAiBN,IAAK,mBAAqBK,EAAIC,GAAIG,QAAS,kBAAM,EAAKd,cAAc,kBAAC4E,EAAD,CAAYvE,IAAK,eAAeK,EAAIC,GAAIQ,UAAW,EAAKX,MAAMW,UAAWR,GAAID,EAAIC,OAASK,MAAM,qBACpL,CAAC,IAAI,QAAQ,OAAO6D,SAASnE,EAAIiD,OAAS,kBAAC,eAAD,CAActD,IAAK,kBAAoBK,EAAIC,GAAIG,QAAS,kBAAM,EAAKM,WAAWV,EAAIC,KAAKK,MAAM,qBAbxH,EAgBlBI,WAAa,SAACT,GAAD,OAASW,OAAOC,QAAQ,mBAAqBC,YAAU,wBAAyB,CAACL,UAAU,EAAKX,MAAMW,UAAUR,GAAGA,IAAKc,MAAK,SAAAC,GAAM,OAAIA,EAAOC,SAAW,EAAKzB,SAAS,CAAC0B,KAAK,EAAKtB,MAAMsB,KAAKC,QAAO,SAAAnB,GAAG,OAAKA,EAAIC,KAAOA,WAdnO,EAAKL,MAAQ,GAFI,E,iFAKE,IAAD,OAClBkB,YAAU,sBAAsB,CAACL,UAAUhB,KAAKK,MAAMW,YAAYM,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,Q,+BAYvF,IAAD,OACP,OAAO,kBAAC,gBAAD,CAAerB,IAAI,QAAQ4B,OAAO,UAAUC,MAAO,CAAC,KAAK,OAAO,UAAU,OAAO,MAAM,IAAKC,MAAOhC,KAAKG,MAAMsB,KAAMnB,SAAUN,KAAKM,SAAUiB,OAAQvB,KAAKG,MAAMoB,QACtK,kBAAC,eAAD,CAAcrB,IAAI,gBAAgBS,QAAS,kBAAM,EAAKsB,uBACtD,kBAAC,YAAD,CAAW/B,IAAI,aAAaS,QAAS,kBAAM,EAAKd,cAAc,kBAAC4E,EAAD,CAAYvE,IAAK,cAAgBgC,cAAOlB,UAAW,EAAKX,MAAMW,UAAWR,GAAG,UAAWK,MAAM,wB,GAtBrIT,aA6BnBqE,E,YACL,WAAYpE,GAAO,IAAD,8BACjB,4CAAMA,KAIPgC,SAAW,SAACC,GAAD,OAAO,EAAKvC,SAAS,CAAC0B,KAAK,eAAI,EAAKtB,MAAMsB,KAAhB,eAAuBa,EAAEC,OAAO9B,KAAM6B,EAAEC,OAAOC,WALlE,EAOlBC,WAAa,kBAAMpB,YAAU,sBAAD,aAAwBqB,GAAG,UAAa,EAAKvC,MAAMsB,OAAOH,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,OALlH,EAAKpB,MAAQ,CAACsB,KAAK,KAAMkB,OAAM,GAFd,E,iFASE,IAAD,OAClB3C,KAAKD,SAAS,CAAC4E,UAAKC,IACpBvD,YAAU,sBAAsB,CAACb,GAAGR,KAAKK,MAAMG,GAAGQ,UAAUhB,KAAKK,MAAMW,YAAYM,MAAK,SAAAC,GAAM,OAAI,EAAKxB,SAASwB,Q,+BAGvG,IAAD,OACR,OAAIvB,KAAKG,MAAMsB,KAEb,6BAASoB,UAAU,QAClB,sCACA,kBAAC,cAAD,CAAa3C,IAAI,kBAChB,kBAAC,YAAD,CAAWA,IAAI,OAAOM,GAAG,OAAOgC,MAAOxC,KAAKG,MAAMsB,KAAKhB,KAAMI,MAAM,sCAAsCwB,SAAUrC,KAAKqC,WACxH,kBAAC,YAAD,CAAWnC,IAAI,UAAUM,GAAG,UAAUgC,MAAOxC,KAAKG,MAAMsB,KAAKP,QAASL,MAAM,sBAAsBwB,SAAUrC,KAAKqC,WACjH,kBAAC,YAAD,CAAWnC,IAAI,MAAMM,GAAG,MAAMyC,MAAM,MAAMT,MAAOxC,KAAKG,MAAMsB,KAAK+C,IAAKnC,SAAUrC,KAAKqC,WACrF,kBAAC,YAAD,CAAWnC,IAAI,OAAOM,GAAG,OAAOgC,MAAOxC,KAAKG,MAAMsB,KAAK+B,KAAMnB,SAAUrC,KAAKqC,SAAUwC,YAAa,+BAEpG,kBAAC,aAAD,CAAY3E,IAAI,cAAcS,QAAS,kBAAM,EAAK8B,cAAc5B,MAAM,4BACtE,kBAAC,SAAD,CAAQX,IAAI,gBAAgBqB,OAA+B,OAAtBvB,KAAKG,MAAM2E,OAAmB9E,KAAKG,MAAMwE,KAAO,QAIhF,kBAAC,UAAD,U,GA/BevE","file":"static/js/10.546fe8e3.chunk.js","sourcesContent":["import React, { Fragment, Component } from 'react'\nimport { rest_call, rnd,  } from './infra/Functions.js';\nimport { Spinner, InfoColumns, TableHead, TableRow, ContentList, ContentData, ContentReport, Result } from './infra/UI.jsx';\nimport { TextLine, SelectInput, TextInput } from './infra/Inputs.jsx';\nimport { AddButton, DeleteButton, LogButton, ConfigureButton, ItemsButton, ReloadButton, SaveButton, SyncButton } from './infra/Buttons.jsx';\n\n// *************** Main ***************\n//\nexport class Main extends Component {\n componentDidMount(){\n  this.setState(<DomainList key='domain_list' />)\n }\n\n changeContent = (elem) => this.setState(elem)\n\n render(){\n  return  <Fragment key='main_base'>{this.state}</Fragment>\n }\n}\n\n// *************** Domain List ***************\n//\nexport class DomainList extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  rest_call('api/dns/domain_list').then(result => {\n   result.result = 'OK';\n   this.setState(result);\n  })\n }\n\n syncDomains(){\n  rest_call('api/dns/domain_list',{sync:true}).then(result => {\n   result.result = JSON.stringify(result.result);\n   this.setState(result);\n  })\n }\n\n listItem = (row) => [row.id,row.name,row.service,<Fragment key={'domain_buttons_'+row.id}>\n   <ConfigureButton key={'net_info_'+row.id} onClick={() => this.changeContent(<DomainInfo key={'domain_'+row.id} id={row.id} />) } title='Edit domain information' />\n   <ItemsButton key={'net_items_'+row.id} onClick={() => this.changeContent(<RecordList changeSelf={this.changeContent} key={'items_'+row.id} domain_id={row.id} />) } title='View domain records' />\n   <DeleteButton key={'net_delete_'+row.id} onClick={() => this.deleteList(row.id) } title='Delete domain' />\n   </Fragment>\n  ]\n\n changeContent = (elem) => this.setState({content:elem})\n deleteList = (id) => (window.confirm('Really delete domain') && rest_call('api/dns/domain_delete', {id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id)),content:null})))\n\n render(){\n  return <Fragment key='dl_fragment'>\n   <ContentList key='dl_cl' header='Domains' thead={['ID','Domain','Server','']} trows={this.state.data} listItem={this.listItem} result={this.state.result}>\n    <ReloadButton key='dl_btn_reload' onClick={() => this.componentDidMount() } />\n    <AddButton key='dl_btn_add' onClick={() => this.changeContent(<DomainInfo key={'domain_new_' + rnd()} id='new' />) } title='Add domain' />\n    <SyncButton key='dl_btn_sync' onClick={() => this.syncDomains()} title='Sync external DNS servers with cache' />\n    <LogButton key='dl_btn_document' onClick={() => this.changeContent(<Status key='domain_status' />)} title='View DNS statistics' />\n   </ContentList>\n   <ContentData key='dl_cd'>{this.state.content}</ContentData>\n  </Fragment>\n }\n}\n\n// *************** Domain Info ***************\n//\nclass DomainInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, found:true };\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n changeContent = (elem) => this.setState({content:elem})\n\n updateInfo = () =>  rest_call('api/dns/domain_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidMount(){\n  rest_call('api/dns/domain_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n render() {\n  if (!this.state.found)\n   return <article>Domain with id: {this.props.id} removed</article>\n  else if (this.state.data) {\n   const old = (this.state.data.id !== 'new');\n   return (\n    <article className='info'>\n     <h1>Domain</h1>\n     <InfoColumns key='domain_content'>\n      {old && <TextLine key='node' id='node' text={this.state.infra.node} />}\n      {old && <TextLine key='service' id='service' text={this.state.infra.service} />}\n      {old && <TextLine key='foreign_id' id='foreign_id' label='Foreign ID' text={this.state.infra.foreign_id} />}\n      {!old && <SelectInput key='server_id' id='server_id' label='Server' value={this.state.data.server_id} onChange={this.onChange}>{this.state.servers.map((row,idx) => <option key={'srv_'+idx} value={row.id}>{`${row.service}@${row.node}`}</option>)}</SelectInput>}\n      <TextInput key='name' id='name' value={this.state.data.name} onChange={this.onChange} />\n      <TextInput key='master' id='master' value={this.state.data.master} onChange={this.onChange} />\n      <TextInput key='type' id='type' value={this.state.data.type} onChange={this.onChange} />\n      <TextInput key='notified_serial' id='notified_serial' label='Notified Serial' value={this.state.data.notified_serial} onChange={this.onChange} />\n     </InfoColumns>\n     <SaveButton key='domain_save' onClick={() => this.updateInfo()} title='Save domain information' />\n    </article>\n   );\n  } else\n   return <Spinner />\n }\n}\n\n// *************** Status ***************\n//\nclass Status extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  rest_call('api/dns/status').then(result => this.setState(result))\n }\n\n render(){\n  if (this.state.top && this.state.who)\n   return (\n    <div style={{display:'flex'}}>\n     <article className='report'>\n      <h1>Top looked up FQDN</h1>\n      <div className='table'>\n       <TableHead key='top_thead' headers={['Node','Service','Hit','FQDN']} />\n       <div className='tbody'>\n        {Object.entries(this.state.top).map(entry => { const ns = entry[0].split('_'); return entry[1].map((row,index) => <TableRow key={'top_trow_'+ ns[0] + '_' + index} cells={[ns[0],ns[1],row.count,row.fqdn]} />) }) }\n       </div>\n      </div>\n     </article>\n     <article className='report'>\n      <h1>Top looked up WHO</h1>\n      <div className='table'>\n       <TableHead key='who_thead' headers={['Node','Service','Hit','Who','FQDN']} />\n       <div className='tbody'>\n        {Object.entries(this.state.who).map(entry => { const ns = entry[0].split('_'); return entry[1].map((row,index) => <TableRow key={'who_trow_'+ ns[0] + '_' + index} cells={[ns[0],ns[1],row.count,row.who,row.fqdn]} />) }) }\n       </div>\n      </div>\n     </article>\n    </div>\n   )\n  else\n   return <Spinner />\n }\n}\n\n// *************** Record List ***************\n//\nclass RecordList extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  rest_call('api/dns/record_list',{domain_id:this.props.domain_id}).then(result => this.setState(result))\n }\n\n changeContent = (elem) => this.props.changeSelf(elem);\n\n listItem = (row) => [row.id,row.name,row.content,row.type,row.ttl,<Fragment key={'rl_buttons_'+row.id}>\n   <ConfigureButton key={'record_info_btn_' + row.id} onClick={() => this.changeContent(<RecordInfo key={'record_info_'+row.id} domain_id={this.props.domain_id} id={row.id} />)} title='Configure record' />\n   {['A','CNAME','PTR'].includes(row.type) && <DeleteButton key={'record_del_btn_' + row.id} onClick={() => this.deleteList(row.id)} title='Delete record' />}\n  </Fragment>]\n\n deleteList = (id) => (window.confirm('Delete record?') && rest_call('api/dns/record_delete', {domain_id:this.props.domain_id,id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id))})))\n\n render(){\n  return <ContentReport key='rl_cr' header='Records' thead={['ID','Name','Content','Type','TTL','']} trows={this.state.data} listItem={this.listItem} result={this.state.result}>\n   <ReloadButton key='rl_btn_reload' onClick={() => this.componentDidMount() } />\n   <AddButton key='rl_btn_add' onClick={() => this.changeContent(<RecordInfo key={'record_new_' + rnd()} domain_id={this.props.domain_id} id='new' />)} title='Add DNS record' />\n  </ContentReport>\n }\n}\n\n// *************** Record Info ***************\n//\nclass RecordInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, found:true };\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n updateInfo = () => rest_call('api/dns/record_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidMount(){\n  this.setState({info:undefined})\n  rest_call('api/dns/record_info',{id:this.props.id,domain_id:this.props.domain_id}).then(result => this.setState(result))\n }\n\n render() {\n  if (this.state.data) {\n   return (\n    <article className='info'>\n     <h1>Record</h1>\n     <InfoColumns key='record_content'>\n      <TextInput key='name' id='name' value={this.state.data.name} title='E.g. A:FQDN, PTR:x.y.z.in-addr.arpa' onChange={this.onChange} />\n      <TextInput key='content' id='content' value={this.state.data.content} title='E.g. A:IP, PTR:FQDN' onChange={this.onChange} />\n      <TextInput key='ttl' id='ttl' label='TTL' value={this.state.data.ttl} onChange={this.onChange} />\n      <TextInput key='type' id='type' value={this.state.data.type} onChange={this.onChange} placeholder={'A, PTR or CNAME typically'} />\n     </InfoColumns>\n     <SaveButton key='record_save' onClick={() => this.updateInfo()} title='Save record information' />\n     <Result key='record_result' result={(this.state.status !== 'OK') ? this.state.info : 'OK'} />\n    </article>\n   );\n  } else\n   return <Spinner />\n }\n}\n"],"sourceRoot":""}