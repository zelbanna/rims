(this.webpackJsonprims=this.webpackJsonprims||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return k})),n.d(t,"Info",(function(){return g})),n.d(t,"Logs",(function(){return D})),n.d(t,"New",(function(){return B})),n.d(t,"Report",(function(){return M})),n.d(t,"ModelInfo",(function(){return z}));var a=n(19),i=n(16),o=n(4),r=n(5),c=n(7),s=n(6),l=n(8),d=n(0),u=n.n(d),m=n(13),h=n(14),p=n(17),_=n(15),f=n(20),v=n(42),k=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).compileNavItems=function(){n.context.loadNavigation(u.a.createElement(p.NavBar,{key:"device_navbar"},u.a.createElement(p.NavDropDown,{key:"dev_nav_devs",title:"Devices"},u.a.createElement(p.NavDropButton,{key:"dev_nav_list",title:"List",onClick:function(){return n.changeContent(u.a.createElement(b,{key:"dl",rack_id:n.state.rack_id}))}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_new",title:"New",onClick:function(){return n.changeContent(u.a.createElement(B,{key:"device_new",ip:"0.0.0.0"}))}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_srch",title:"Search",onClick:function(){return n.changeContent(u.a.createElement(y,{key:"ds",changeSelf:n.changeContent}))}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_types",title:"Types",onClick:function(){return n.changeContent(u.a.createElement(L,{key:"dtl",changeSelf:n.changeContent}))}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_model",title:"Models",onClick:function(){return n.changeContent(u.a.createElement(T,{key:"dml"}))}})),u.a.createElement(p.NavButton,{key:"dev_nav_maps",title:"Maps",onClick:function(){return n.changeContent(u.a.createElement(v.List,{key:"visualize_list"}))}}),n.state.pdu.length>0&&u.a.createElement(p.NavDropDown,{key:"dev_nav_pdus",title:"PDUs"},n.state.pdu.map((function(e,t){return u.a.createElement(p.NavDropButton,{key:"dev_nav_pdu_"+t,title:e.hostname,onClick:function(){return n.changeImport("pdu","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.console.length>0&&u.a.createElement(p.NavDropDown,{key:"dev_nav_consoles",title:"Consoles"},n.state.console.map((function(e,t){return u.a.createElement(p.NavDropButton,{key:"dev_nav_console_"+t,title:e.hostname,onClick:function(){return n.changeImport("console","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.rack_id&&u.a.createElement(p.NavButton,{key:"dev_nav_rack",title:n.state.name,onClick:function(){return n.changeImport("rack","Layout",{id:n.state.rack_id})}}),u.a.createElement(p.NavDropDown,{key:"dev_nav_oui",title:"OUI"},u.a.createElement(p.NavDropButton,{key:"dev_nav_ouis",title:"Search",onClick:function(){return n.changeContent(u.a.createElement(P,{key:"oui_search"}))}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_ouil",title:"List",onClick:function(){return n.changeContent(u.a.createElement(R,{key:"oui_list"}))}})),u.a.createElement(p.NavButton,{key:"dev_nav_resv",title:"Reservations",onClick:function(){return n.changeImport("reservation","List",{})},style:{float:"right"}}),u.a.createElement(p.NavDropDown,{key:"dev_nav_ipam",title:"IPAM",style:{float:"right"}},u.a.createElement(p.NavDropButton,{key:"dev_nav_nets",title:"Networks",onClick:function(){return n.changeImport("ipam","NetworkList",{})}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_isrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DHCP"})}})),u.a.createElement(p.NavDropDown,{key:"dev_nav_dns",title:"DNS",style:{float:"right"}},u.a.createElement(p.NavDropButton,{key:"dev_nav_doms",title:"Domains",onClick:function(){return n.changeImport("dns","DomainList",{})}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_dsrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DNS"})}}),u.a.createElement(p.NavDropButton,{key:"dev_nav_recs",title:"Recursors",onClick:function(){return n.changeImport("server","List",{type:"RECURSOR"})}})),u.a.createElement(p.NavReload,{key:"dev_nav_reload",onClick:function(){return n.changeContent(null)}})))},n.changeContent=function(e){return n.setState({content:e})},n.state={pdu:[],console:[],name:"N/A",rack_id:void 0},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.rack_id?Object(m.c)("api/rack/inventory",{id:this.props.rack_id}).then((function(t){Object.assign(e.state,Object(i.a)({rack_id:e.props.rack_id},t)),e.compileNavItems()})):this.compileNavItems()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(e,t,a){var i=this;n(26)("./"+e+".jsx").then((function(n){var o=n[t];i.setState({content:u.a.createElement(o,Object.assign({key:e+"_"+t},a))})}))}},{key:"render",value:function(){return u.a.createElement(d.Fragment,{key:"main_base"},this.state.content)}}]),t}(d.Component);k.contextType=h.RimsContext;var y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.props.changeSelf(e)},n.onChange=function(e){return n.setState(Object(a.a)({},e.target.name,e.target.value))},n.state={field:"ip",search:""},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(h.LineArticle,{key:"d_srch_art",header:"Device Search"},u.a.createElement(_.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},u.a.createElement("optgroup",{label:"Group"},u.a.createElement("option",{value:"hostname"},"Hostname"),u.a.createElement("option",{value:"type"},"Type")),u.a.createElement("optgroup",{label:"Unique"},u.a.createElement("option",{value:"id"},"ID"),u.a.createElement("option",{value:"ip"},"IP"),u.a.createElement("option",{value:"mac"},"MAC"),u.a.createElement("option",{value:"ipam_id"},"IPAM ID"))),u.a.createElement(_.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),u.a.createElement(f.SearchButton,{key:"ds_btn_search",onClick:function(){return e.changeContent(u.a.createElement(b,Object.assign({key:"device_list"},e.state)))},title:"Search devices"}))}}]),t}(d.Component),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.setState({content:e})},n.searchHandler=function(e){n.setState({searchfield:e.target.value})},n.sortList=function(e){"hostname"===e?n.state.data.sort((function(e,t){return e.hostname.localeCompare(t.hostname)})):n.state.data.sort((function(e,t){return e.ip&&t.ip?Number(e.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join(""))-Number(t.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join("")):e.ip?1:e.hostname.localeCompare(t.hostname)})),n.setState({sort:e})},n.listItem=function(e){return[e.ip,u.a.createElement(f.HrefButton,{key:"dl_btn_info_"+e.id,text:e.hostname,onClick:function(){return n.changeContent(u.a.createElement(g,{key:"di_"+e.id,id:e.id,changeSelf:n.changeContent}))},title:e.id}),u.a.createElement(h.StateLeds,{key:"dl_state_"+e.id,state:e.ip_state?e.ip_state:e.if_state}),u.a.createElement(d.Fragment,{key:"dl_buttons_"+e.id},u.a.createElement(f.InfoButton,{key:"dl_btn_info_"+e.id,onClick:function(){return n.changeContent(u.a.createElement(g,{key:"di_"+e.id,id:e.id,changeSelf:n.changeContent}))},title:e.id}),u.a.createElement(f.DeleteButton,{key:"dl_btn_del_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete device"}))]},n.deleteList=function(e){return window.confirm("Really delete device "+e+"?")&&Object(m.c)("api/device/delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={data:null,content:null,sort:e.hasOwnProperty("sort")?e.sort:"hostname",rack_id:n.props.rack_id,searchfield:"",field:n.props.field,search:n.props.search},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/list",{sort:this.state.sort,rack_id:this.state.rack_id,field:this.state.field,search:this.state.search}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data.filter((function(t){return t.hostname.includes(e.state.searchfield)||t.ip&&t.ip.includes(e.state.searchfield)})),n=[u.a.createElement(f.HeaderButton,{key:"dl_btn_ip",text:"IP",highlight:"ip"===this.state.sort,onClick:function(){return e.sortList("ip")}}),u.a.createElement(f.HeaderButton,{key:"dl_btn_hostname",text:"Hostname",highlight:"hostname"===this.state.sort,onClick:function(){return e.sortList("hostname")}}),"",""];return u.a.createElement(d.Fragment,{key:"dl_fragment"},u.a.createElement(h.ContentList,{key:"dl_list",header:"Device List",thead:n,listItem:this.listItem,trows:t},u.a.createElement(f.ReloadButton,{key:"dl_btn_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.ItemsButton,{key:"dl_btn_items",onClick:function(){Object.assign(e.state,{rack_id:void 0,field:void 0,search:void 0}),e.componentDidMount()},title:"List all items"}),u.a.createElement(f.AddButton,{key:"dl_btn_add",onClick:function(){return e.changeContent(u.a.createElement(B,{key:"dn_new_"+Object(m.d)(),ip:"0.0.0.0"}))},title:"Add device"}),u.a.createElement(f.SearchButton,{key:"dl_btn_devices",onClick:function(){return e.changeContent(u.a.createElement(N,{key:"dd"}))},title:"Discover new devices"}),u.a.createElement(_.SearchInput,{key:"dl_search",searchHandler:this.searchHandler,value:this.state.searchfield,placeholder:"Search devices"})),u.a.createElement(h.ContentData,{key:"dl_content"},this.state.content))}return u.a.createElement(h.Spinner,null)}}]),t}(d.Component),g=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.changeContent=function(e){return r.setState({content:e})},r.changeSelf=function(e){return r.props.changeSelf(e)},r.updateInfo=function(){return Object(m.c)("api/device/info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.reload=function(){r.setState({rack:void 0,vm:void 0}),Object(m.c)("api/device/info",{id:r.props.id}).then((function(e){return r.setState(e)}))},r.lookupInfo=function(){r.setState({content:u.a.createElement(h.Spinner,null),result:""}),Object(m.c)("api/device/info",{id:r.props.id,op:"lookup"}).then((function(e){return r.setState(Object(i.a)({},e,{content:null}))}))},r.changeInterfaces=function(){return n.e(1).then(n.bind(null,41)).then((function(e){return r.changeContent(u.a.createElement(e.List,{key:"interface_list",device_id:r.props.id,changeSelf:r.changeContent}))}))},r.state={data:void 0,found:!0,content:null,navconf:!1},r}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/info",{id:this.props.id,extra:["types","classes"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data,n=this.state.extra,a=!("vm"!==t.class||!this.state.vm)&&this.state.vm,i=!(!this.state.rack||"vm"===t.class)&&this.state.rack,o=this.props.changeSelf,r=n.interface_ip,c=n.functions.length>0?n.functions.split(","):[];return u.a.createElement(d.Fragment,{key:"di_fragment"},u.a.createElement(h.InfoArticle,{key:"di_art",header:"Device"},u.a.createElement(h.InfoColumns,{key:"di_info",style:{float:"left"}},u.a.createElement(_.TextLine,{key:"hostname",id:"hostname",text:t.hostname}),u.a.createElement(_.TextInput,{key:"mac",id:"mac",label:"Sys Mac",value:t.mac,title:"System MAC",onChange:this.onChange}),t.management_id&&u.a.createElement(_.TextLine,{key:"if_mac",id:"if_mac",label:"Mgmt MAC",text:n.interface_mac,title:"Management Interface MAC"}),t.management_id&&u.a.createElement(_.TextLine,{key:"if_ip",id:"if_ip",label:"Mgmt IP",text:n.interface_ip}),u.a.createElement(_.TextLine,{key:"snmp",id:"snmp",label:"SNMP",text:t.snmp}),t.management_id&&u.a.createElement(_.StateLine,{key:"state",id:"state",state:[n.if_state,n.ip_state]})),u.a.createElement(h.InfoColumns,{key:"di_extra",style:{float:"left"}},u.a.createElement(_.TextLine,{key:"id",id:"id",text:this.props.id}),u.a.createElement(_.SelectInput,{key:"class",id:"class",value:t.class,onChange:this.onChange},this.state.classes.map((function(e){return u.a.createElement("option",{key:"di_class_"+e,value:e},e)}))),u.a.createElement(_.SelectInput,{key:"type_id",id:"type_id",label:"Type",value:t.type_id,onChange:this.onChange},this.state.types.map((function(e,t){return u.a.createElement("option",{key:"di_type_"+t,value:e.id},e.name)}))),u.a.createElement(_.TextInput,{key:"model",id:"model",value:t.model,onChange:this.onChange,extra:t.model}),u.a.createElement(_.TextLine,{key:"version",id:"version",text:t.version,onChange:this.onChange}),u.a.createElement(_.TextInput,{key:"serial",id:"serial",label:"S/N",value:t.serial,onChange:this.onChange})),u.a.createElement(h.InfoColumns,{key:"di_rack",style:{float:"left"}},i&&u.a.createElement(_.TextLine,{key:"rack_pos",id:"rack_pos",label:"Rack/Pos",text:"".concat(i.rack_name," (").concat(i.rack_unit,")")}),i&&u.a.createElement(_.TextLine,{key:"rack_size",id:"rack_size",label:"Size (U)",text:i.rack_size}),i&&u.a.createElement(_.TextLine,{key:"rack_con",id:"rack_con",label:"TS/Port",text:"".concat(i.console_name," (").concat(i.console_port,")")}),i&&this.state.pems.map((function(e){return u.a.createElement(_.TextLine,{key:"pem_"+e.id,id:"pem_"+e.id,label:e.name+" PDU",text:"".concat(e.pdu_name," (").concat(e.pdu_unit,")")})}))),u.a.createElement(h.InfoColumns,{key:"di_vm",style:{float:"left"}},a&&u.a.createElement(_.TextLine,{key:"vm_name",id:"vm_name",label:"VM Name",text:a.name}),a&&u.a.createElement(_.TextLine,{key:"vm_host",id:"vm_host",label:"VM Host",text:a.host}),a&&u.a.createElement(_.TextLine,{key:"vm_uuid",id:"vm_uuid",label:"VM UUID",text:a.device_uuid,style:{maxWidth:170},extra:a.device_uuid}),a&&u.a.createElement(_.TextLine,{key:"vm_uuhost",id:"vm_uuhost",label:"Host UUID",text:a.server_uuid,style:{maxWidth:170},extra:a.server_uuid})),u.a.createElement(h.InfoColumns,{key:"di_text",style:{clear:"both"}},u.a.createElement(_.TextInput,{key:"comment",id:"comment",value:t.comment,onChange:this.onChange}),u.a.createElement(_.UrlInput,{key:"url",id:"url",label:"URL",value:t.url,onChange:this.onChange})),u.a.createElement(f.ReloadButton,{key:"di_btn_reload",onClick:function(){return e.reload()}}),u.a.createElement(f.SaveButton,{key:"di_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(f.ConfigureButton,{key:"di_btn_edit",onClick:function(){return e.setState({navconf:!e.state.navconf})},title:"Toggle config mode"}),u.a.createElement(f.StartButton,{key:"di_btn_cont",onClick:function(){return e.changeContent(u.a.createElement(w,{key:"device_control",id:e.props.id}))},title:"Device control"}),u.a.createElement(f.CheckButton,{key:"di_btn_conf",onClick:function(){return e.changeContent(u.a.createElement(x,{key:"device_configure",id:e.props.id}))},title:"Configuration template"}),o&&u.a.createElement(f.NetworkButton,{key:"di_btn_netw",onClick:function(){return e.changeSelf(u.a.createElement(v.Edit,{key:"ve_"+e.props.id,type:"device",id:e.props.id,changeSelf:e.props.changeSelf}))},title:"Connectivity map"}),r&&u.a.createElement(f.SearchButton,{key:"di_btn_srch",onClick:function(){return e.lookupInfo()},title:"Information lookup"}),r&&u.a.createElement(f.LogButton,{key:"di_btn_logs",onClick:function(){return e.changeContent(u.a.createElement(D,{key:"device_logs",id:e.props.id}))},title:"Logs"}),c.includes("manage")&&u.a.createElement(f.GoButton,{key:"d_btn_manage",onClick:function(){return e.context.changeMain({module:e.state.extra.type_base,function:"Manage",args:{device_id:e.props.id,type:e.state.extra.type_name}})},title:"Manage "+t.hostname}),r&&u.a.createElement(f.TermButton,{key:"di_btn_ssh",onClick:function(){return window.open("ssh://".concat(n.username,"@").concat(n.interface_ip),"_self")},title:"SSH connection"}),i&&i.console_url&&u.a.createElement(f.TermButton,{key:"di_btn_console",onClick:function(){return window.open(i.console_url,"_self")},title:"Serial Connection"}),t.url&&u.a.createElement(f.UiButton,{key:"di_btn_ui",onClick:function(){return window.open(t.url,"_blank")},title:"Web UI"}),u.a.createElement(h.Result,{key:"dev_result",result:JSON.stringify(this.state.update)})),u.a.createElement(p.NavBar,{key:"di_navigation",id:"di_navigation"},this.state.navconf&&u.a.createElement(p.NavButton,{key:"di_nav_management",title:"Management",onClick:function(){return e.changeContent(u.a.createElement(E,{key:"device_configure",id:e.props.id}))}}),this.state.navconf&&u.a.createElement(p.NavButton,{key:"di_nav_interfaces",title:"Interfaces",onClick:function(){return e.changeInterfaces()}}),this.state.navconf&&["infrastructure","out-of-band"].includes(t.class)&&u.a.createElement(p.NavButton,{key:"di_nav_rack",title:"Rack",onClick:function(){return e.changeContent(u.a.createElement(C,{key:"device_rack_info",device_id:e.props.id}))}}),this.state.navconf&&["device","infrastructure","out-of-band"].includes(t.class)&&u.a.createElement(p.NavButton,{key:"di_nav_pems",title:"PEMs",onClick:function(){return e.changeContent(u.a.createElement(O,{key:"device_pem_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),this.state.navconf&&u.a.createElement(p.NavButton,{key:"di_nav_stats",title:"Statistics",onClick:function(){return e.changeContent(u.a.createElement(j,{key:"device_statistics_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),!this.state.navconf&&c.filter((function(e){return"manage"!==e})).map((function(t,n){return u.a.createElement(p.NavButton,{key:"di_nav_"+n,title:t.replace("_"," "),onClick:function(){return e.changeContent(u.a.createElement(A,{key:"dev_func_"+t,id:e.props.id,op:t,type:e.state.extra.type_name}))}})}))),this.state.content)}return u.a.createElement(h.Spinner,null)}}]),t}(d.Component);g.contextType=h.RimsContext;var E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.changeContent=function(e){return n.setState({content:e})},n.updateInfo=function(){return Object(m.c)("api/device/extended",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:void 0,found:!0,content:null},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/extended",{id:this.props.id,extra:["domains"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data&&this.state.domains?u.a.createElement(h.InfoArticle,{key:"d_conf_art",header:"Management Configuration"},u.a.createElement(h.InfoColumns,{key:"d_conf_ic"},u.a.createElement(_.TextInput,{key:"d_conf_hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange}),u.a.createElement(_.SelectInput,{key:"d_conf_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:"de_dom_"+t,value:e.id},e.name)}))),u.a.createElement(_.SelectInput,{key:"d_conf_management_id",id:"management_id",label:"Mgmt Interface",value:this.state.data.management_id,onChange:this.onChange},this.state.interfaces.map((function(e,t){return u.a.createElement("option",{key:"de_intf_"+t,value:e.interface_id},"".concat(e.name," (").concat(e.ip,")"))}))),u.a.createElement(_.TextLine,{key:"d_conf_oid",id:"oid",label:"Priv OID",text:this.state.extra.oid}),u.a.createElement(_.TextLine,{key:"d_conf_oui",id:"oui",label:"System OUI",text:this.state.extra.oui})),u.a.createElement(f.SaveButton,{key:"d_conf_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(h.Result,{key:"d_conf_result",result:this.state.status})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),C=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(m.c)("api/device/rack",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/rack",{device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data.rack_id&&"NULL"!==this.state.data.rack_id;return u.a.createElement(h.InfoArticle,{key:"d_rack_art",header:"Rack"},u.a.createElement(h.InfoColumns,{key:"d_rack_ic"},u.a.createElement(_.SelectInput,{key:"d_rack_id",id:"rack_id",label:"Rack ID",value:this.state.data.rack_id,onChange:this.onChange},this.state.racks.map((function(e,t){return u.a.createElement("option",{key:"d_rack_id_"+t,value:e.id},e.name)}))),t&&u.a.createElement(_.TextInput,{key:"d_rack_size",id:"rack_size",label:"Size",value:this.state.data.rack_size,onChange:this.onChange,title:"Size of device in U"}),t&&u.a.createElement(_.TextInput,{key:"d_rack_unit",id:"rack_unit",label:"Unit",value:this.state.data.rack_unit,onChange:this.onChange,title:"First unit of placement"}),t&&u.a.createElement(_.SelectInput,{key:"d_rack_con_id",id:"console_id",label:"Console",value:this.state.data.console_id,onChange:this.onChange},this.state.consoles.map((function(e,t){return u.a.createElement("option",{key:"d_rack_con_id_"+t,value:e.id},e.hostname)}))),t&&u.a.createElement(_.TextInput,{key:"d_rack_con_port",id:"console_port",label:"Console Port",value:this.state.data.console_port,onChange:this.onChange})),u.a.createElement(f.SaveButton,{key:"d_rack_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}))}return u.a.createElement(h.Spinner,null)}}]),t}(d.Component),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.props.changeSelf(e)},n.deleteList=function(e){return window.confirm("Really delete PEM?")&&Object(m.c)("api/pem/delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.listItem=function(e){return[e.id,e.name,e.pdu_id,e.pdu_name,e.pdu_slot,e.pdu_unit,u.a.createElement(d.Fragment,{key:"dev_pems_frag_"+e.id},u.a.createElement(f.InfoButton,{key:"dev_pem_btn_info_"+e.id,onClick:function(){return n.changeContent(u.a.createElement(S,{key:"pem_info_"+e.id,id:e.id,device_id:n.props.device_id}))},title:"Edit PEM information"}),u.a.createElement(f.DeleteButton,{key:"dev_pem_btn_delete_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete PEM"}))]},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/pem/list",{device_id:this.props.device_id,lookup:!0}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(h.ContentReport,{key:"dev_pems",header:"PEMs",thead:["ID","Name","PDU ID","PDU Name","PDU Slot","PDU Unit",""],trows:this.state.data,listItem:this.listItem},u.a.createElement(f.ReloadButton,{key:"dev_pems_btn_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.AddButton,{key:"dev_pems_btn_add",onClick:function(){return e.changeContent(u.a.createElement(S,{key:"device_pem_info_new_"+Object(m.d)(),id:"new",device_id:e.props.device_id}))},title:"Add PEM"})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(m.c)("api/pem/info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/pem/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)})),Object(m.c)("api/pdu/list",{device_id:this.props.device_id,empty:!0}).then((function(t){return e.setState({pdus:t.data})}))}},{key:"render",value:function(){var e=this;if(this.state.data&&this.state.pdus){var t=this.state.pdus.find((function(t){return parseInt(t.device_id)===parseInt(e.state.data.pdu_id)})),n=[];if(t)for(var a=0;a<t.slots;a++)n.push({id:a,name:t["".concat(a,"_slot_name")]});return u.a.createElement(h.InfoArticle,{key:"d_pem_art",header:"PEM"},u.a.createElement(h.InfoColumns,{key:"d_pem_ic"},u.a.createElement(_.TextInput,{key:"d_pem_name",id:"name",value:this.state.data.name,onChange:this.onChange}),u.a.createElement(_.SelectInput,{key:"d_pem_pdu_id",id:"pdu_id",label:"PDU",value:this.state.data.pdu_id,onChange:this.onChange},this.state.pdus.map((function(e,t){return u.a.createElement("option",{key:"d_pem_pdu_id_"+t,value:e.device_id},e.name)}))),u.a.createElement(_.SelectInput,{key:"d_pem_pdu_slot",id:"pdu_slot",label:"Slot",value:this.state.data.pdu_slot,onChange:this.onChange},n.map((function(e,t){return u.a.createElement("option",{key:"d_pem_pdu_slot_"+t,value:e.id},e.name)}))),u.a.createElement(_.TextInput,{key:"d_pem_pdu_unit",id:"pdu_unit",label:"Unit",value:this.state.data.pdu_unit,onChange:this.onChange})),u.a.createElement(f.SaveButton,{key:"d_pem_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(h.Result,{key:"d_pem_result",result:this.state.update?this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update):""}))}return u.a.createElement(h.Spinner,null)}}]),t}(d.Component),j=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).loadList=function(e){return Object(m.c)("api/statistics/list",{device_id:n.props.device_id}).then((function(t){return n.setState(e?Object(i.a)({},t,{result:"",inserts:""}):t)}))},n.changeContent=function(e){return n.props.changeSelf(e)},n.deleteList=function(e){return window.confirm("Really delete statistics point?")&&Object(m.c)("api/statistics/delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.lookupStats=function(){return Object(m.c)("api/statistics/lookup",{device_id:n.props.device_id}).then((function(e){n.setState(e),n.loadList()}))},n.listItem=function(e){return[e.id,e.measurement,e.tags,e.name,e.oid,u.a.createElement(d.Fragment,{key:"dev_stats_frag_"+e.id},u.a.createElement(f.InfoButton,{key:"dev_stats_btn_info_"+e.id,onClick:function(){return n.changeContent(u.a.createElement(I,{key:"statistics_info_"+e.id,id:e.id,device_id:n.props.device_id}))},title:"Edit data point"}),u.a.createElement(f.DeleteButton,{key:"dev_stats_btn_delete_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete data point"}))]},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(h.ContentReport,{key:"dev_stats",header:"Device statistics",thead:["ID","Measurement","Tags","Name","OID",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},u.a.createElement(f.ReloadButton,{key:"dev_stats_btn_reload",onClick:function(){return e.loadList(!0)}}),u.a.createElement(f.SearchButton,{key:"dev_stats_btn_lookup",onClick:function(){return e.lookupStats()},title:"Lookup device type stats"}),u.a.createElement(f.AddButton,{key:"dev_stats_btn_add",onClick:function(){return e.changeContent(u.a.createElement(I,{key:"device_statistics_info_new_"+Object(m.d)(),id:"new",device_id:e.props.device_id}))},title:"Add statistics"})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),I=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(m.c)("api/statistics/info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/statistics/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(h.InfoArticle,{key:"d_stat_art",header:"Data point"},u.a.createElement(h.InfoColumns,{key:"d_stat_ic"},u.a.createElement(_.TextInput,{key:"d_stat_measurement",id:"measurement",value:this.state.data.measurement,onChange:this.onChange,title:"Group, or measurement, that the data point belongs to"}),u.a.createElement(_.TextInput,{key:"d_stat_tags",id:"tags",value:this.state.data.tags,onChange:this.onChange,title:"Tags are comma separated values that extend TSDB grouping"}),u.a.createElement(_.TextInput,{key:"d_stat_name",id:"name",value:this.state.data.name,onChange:this.onChange,title:"Data point name"}),u.a.createElement(_.TextInput,{key:"d_stat_oid",id:"oid",value:this.state.data.oid,onChange:this.onChange})),u.a.createElement(f.SaveButton,{key:"d_stat_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(h.Result,{key:"d_stat_result",result:this.state.update&&this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update)})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).operationDev=function(e,t){window.confirm(t)&&(n.setState({wait:u.a.createElement(h.Spinner,null)}),Object(m.c)("api/device/control",{id:n.props.id,device_op:e}).then((function(e){return n.setState(Object(i.a)({},e,{wait:null}))})))},n.operationPem=function(e,t,a){window.confirm(a)&&(n.setState({wait:u.a.createElement(h.Spinner,null)}),Object(m.c)("api/device/control",{id:n.props.id,pem_op:t,pem_id:e}).then((function(e){return n.setState(Object(i.a)({},e,{wait:null}))})))},n.lookupState=function(e){return console.log("State lookup TODO")},n.state={pems:[]},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/control",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return u.a.createElement(h.InfoArticle,{key:"dc_art",header:"Device Control"},u.a.createElement(h.InfoColumns,{key:"dc_ic"},u.a.createElement("label",{htmlFor:"reboot"},"Reboot:"),u.a.createElement(f.ReloadButton,{id:"reboot",key:"dev_ctr_reboot",onClick:function(){return e.operationDev("reboot","Really reboot?")},title:"Restart device"}),u.a.createElement("label",{htmlFor:"shutdown"},"Shutdown:"),u.a.createElement(f.ShutdownButton,{id:"shutdown",key:"dev_ctr_shutdown",onClick:function(){return e.operationDev("shutdown","Really shutdown?")},title:"Shutdown"}),this.state.pems.map((function(t){return"off"===t.state?u.a.createElement(d.Fragment,{key:"dc_pems_"+t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.StartButton,{key:"dc_btn_start_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"on","Power on PEM?")},title:"Power ON"})):"on"===t.state?u.a.createElement(d.Fragment,{key:"dc_pems_"+t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.ShutdownButton,{key:"dc_btn_stop_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"off","Power off PEM?")},title:"Power OFF"})):u.a.createElement(d.Fragment,{key:"dc_pems_"+t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.SearchButton,{key:"dc_btn_lookup_"+t.id,id:t.id,onClick:function(){return e.lookupState(t.id)},title:"Lookup State"}))}))),u.a.createElement(h.Result,{key:"dc_result",result:JSON.stringify(this.state.result)}),this.state.wait)}}]),t}(d.Component),D=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).clearLog=function(){return Object(m.c)("api/device/log_clear",{id:n.props.id}).then((function(e){return e.deleted&&n.setState({data:[]})}))},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/log_get",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state?u.a.createElement(h.ContentReport,{key:"dev_log_cr",header:"Devices",thead:["Time","Message"],trows:this.state.data,listItem:function(e){return[e.time,e.message]}},u.a.createElement(f.DeleteButton,{key:"devlog_btn_delete",onClick:function(){return e.clearLog()},title:"Clear device logs"})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),x=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/configuration_template",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement(h.CodeArticle,{key:"dtemp_art"},"OK"===this.state.status?this.state.data.join("\n"):this.state.info):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),B=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.addDevice=function(){n.state.data.hostname&&Object(m.c)("api/device/new",n.state.data).then((function(e){return n.setState({result:JSON.stringify(e)})}))},n.searchIP=function(){n.state.data.ipam_network_id&&Object(m.c)("api/ipam/address_find",{network_id:n.state.data.ipam_network_id}).then((function(e){return n.setState({data:Object(i.a)({},n.state.data,{ip:e.ip})})}))},n.state={data:{ip:n.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:n.props.ipam_network_id,hostname:""},found:!0},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})})),Object(m.c)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(m.c)("api/device/class_list").then((function(t){return e.setState({classes:t.data})}))}},{key:"render",value:function(){var e=this;return this.state.domains&&this.state.classes&&this.state.networks?u.a.createElement(h.InfoArticle,{key:"dn_art",header:"Device Add"},u.a.createElement(h.InfoColumns,{key:"dn_content"},u.a.createElement(_.TextInput,{key:"dn_hostname",id:"hostname",value:this.state.data.hostname,placeholder:"Device hostname",onChange:this.onChange}),u.a.createElement(_.SelectInput,{key:"dn_class",id:"class",label:"Device Class",value:this.state.data.class,onChange:this.onChange},this.state.classes.map((function(e){return u.a.createElement("option",{key:"dn_class_"+e,value:e},e)}))),u.a.createElement(_.SelectInput,{key:"dn_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:"dn_a_dom_"+t,value:e.id},e.name)}))),u.a.createElement(_.SelectInput,{key:"dn_if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.data.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:"dn_if_dom_"+t,value:e.id},e.name)}))),u.a.createElement(_.SelectInput,{key:"dn_ipam_network_id",id:"ipam_network_id",label:"Interface Network",value:this.state.data.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return u.a.createElement("option",{key:"dn_net_"+t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),u.a.createElement(_.TextInput,{key:"dn_ip",id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange}),u.a.createElement(_.TextInput,{key:"dn_mac",id:"mac",label:"MAC",value:this.state.data.mac,onChange:this.onChange})),u.a.createElement(f.StartButton,{key:"dn_btn_start",onClick:function(){return e.addDevice()},title:"Add device"}),u.a.createElement(f.SearchButton,{key:"dn_btn_search",onClick:function(){return e.searchIP()},title:"Find available IP"}),u.a.createElement(h.Result,{key:"dn_result",result:this.state.result})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState(Object(a.a)({},e.target.name,e.target.value))},n.changeContent=function(e){return n.setState({content:e})},n.state={ipam_network_id:void 0,a_domain_id:void 0,content:null},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(m.c)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})}))}},{key:"runDiscovery",value:function(){var e=this;this.setState({content:u.a.createElement(h.Spinner,null)}),Object(m.c)("api/device/discover",{network_id:this.state.ipam_network_id,a_domain_id:this.state.a_domain_id,if_domain_id:this.state.if_domain_id}).then((function(t){return e.setState({content:u.a.createElement(h.CodeArticle,{key:"dd_result"},JSON.stringify(t,null,2))})}))}},{key:"render",value:function(){var e=this;return this.state.networks&&this.state.domains?u.a.createElement(d.Fragment,{key:"dd_fragment"},u.a.createElement(h.InfoArticle,{key:"dd_art",header:"Device Discovery"},u.a.createElement(h.InfoColumns,{key:"dd_content"},u.a.createElement(_.SelectInput,{key:"dd_ipam_network_id",id:"ipam_network_id",label:"Network",value:this.state.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return u.a.createElement("option",{key:"dd_net_"+t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),u.a.createElement(_.SelectInput,{key:"dd_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:"dd_dom_"+t,value:e.id},e.name)}))),u.a.createElement(_.SelectInput,{key:"dd_if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:"dd_if_dom_"+t,value:e.id},e.name)})))),u.a.createElement(f.StartButton,{key:"dd_btn_start",onClick:function(){return e.runDiscovery()},title:"Start discovery"})),u.a.createElement(p.NavBar,{key:"dd_navigation",id:"dd_navigation"}),this.state.content):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).listItem=function(e){return[e.id,e.hostname,e.class,e.ip,e.mac,e.oui,e.model,e.oid,e.serial,u.a.createElement(h.StateLeds,{key:"dr_"+e.id,state:e.state})]},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/list",{extra:["system","type","mac","oui","class"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement(h.ContentReport,{key:"dev_cr",header:"Devices",thead:["ID","Hostname","Class","IP","MAC","OUI","Model","OID","Serial","State"],trows:this.state.data,listItem:this.listItem}):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),L=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.setState({content:e})},n.changeSelf=function(e){return n.props.changeSelf(e)},n.listItem=function(e){return[e.base,u.a.createElement(f.HrefButton,{text:e.name,onClick:function(){return n.changeSelf(u.a.createElement(b,{key:"device_list",field:"type",search:e.name}))}}),e.icon]},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/type_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?u.a.createElement(d.Fragment,{key:"dev_tp_fragment"},u.a.createElement(h.ContentList,{key:"dev_tp_cl",header:"Device Types",thead:["Class","Name","Icon"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(h.ContentData,{key:"dev_tp_cd"},this.state.content)):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).syncModels=function(){return Object(m.c)("api/device/model_list",{op:"sync"}).then((function(e){return n.setState(e)}))},n.listItem=function(e){return[e.id,e.name,e.type,u.a.createElement(d.Fragment,{key:"ml_"+e.id},u.a.createElement(f.ConfigureButton,{key:"ml_btn_info_"+e.id,onClick:function(){return n.changeContent(u.a.createElement(z,{key:"model_info_"+e.id,id:e.id}))},title:"Edit model information"}),u.a.createElement(f.DeleteButton,{key:"ml_btn_delete_"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete model"}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Really delete model?")&&Object(m.c)("api/device/model_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/model_list").then((function(t){return e.setState(Object(i.a)({},t,{result:"OK"}))}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(d.Fragment,{key:"dev_ml_fragment"},u.a.createElement(h.ContentList,{key:"dev_ml_cl",header:"Device Models",thead:["ID","Model","Type",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},u.a.createElement(f.ReloadButton,{key:"ml_btn_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.SyncButton,{key:"_ml_btn_sync",onClick:function(){return e.syncModels()},title:"Resync models"})),u.a.createElement(h.ContentData,{key:"dev_ml_cd"},this.state.content)):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(m.c)("api/device/model_info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/model_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(h.InfoArticle,{key:"dm_art",header:"Device Model"},u.a.createElement(h.InfoColumns,{key:"dm_content"},u.a.createElement(_.TextLine,{key:"dm_name",id:"name",text:this.state.data.name}),u.a.createElement(_.TextLine,{key:"dm_type",id:"type",text:this.state.extra.type}),u.a.createElement(_.TextInput,{key:"dm_defaults_file",id:"defaults_file",label:"Default File",value:this.state.data.defaults_file,onChange:this.onChange}),u.a.createElement(_.TextInput,{key:"dm_image_file",id:"image_file",label:"Image  File",value:this.state.data.image_file,onChange:this.onChange})),u.a.createElement(_.TextAreaInput,{key:"dm_parameters",id:"parameters",onChange:this.onChange,value:this.state.data.parameters}),u.a.createElement(f.SaveButton,{key:"dm_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),P=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.ouiSearch=function(){Object(m.c)("api/master/oui_info",{oui:n.state.data.oui}).then((function(e){return n.setState({content:u.a.createElement(h.InfoArticle,{key:"oui_art"},u.a.createElement(h.InfoColumns,{key:"oui_cont"},u.a.createElement("label",{htmlFor:"oui"},"OUI:"),u.a.createElement("span",{id:"oui"},e.data.oui),u.a.createElement("label",{htmlFor:"company"},"Company:"),u.a.createElement("span",{id:"company"},e.data.company)))})}))},n.state={data:{oui:""},content:null},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement(h.Flex,{key:"flex"},u.a.createElement(h.LineArticle,{key:"oui_src_art"},"Type OUI or MAC address to find OUI/company name,",u.a.createElement(_.TextInput,{key:"oui",id:"oui",onChange:this.onChange,value:this.state.data.oui,placeholder:"00:00:00"}),u.a.createElement(f.SearchButton,{key:"oui_btn_search",onClick:function(){return e.ouiSearch()},title:"Search for OUI"})),this.state.content)}}]),t}(d.Component),R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/master/oui_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?u.a.createElement(h.ContentReport,{key:"oui_list_cr",header:"OUI",thead:["oui","company"],trows:this.state.data,listItem:function(e){return["".concat(e.oui.substring(0,2),":").concat(e.oui.substring(2,4),":").concat(e.oui.substring(4,6)),e.company]}}):u.a.createElement(h.Spinner,null)}}]),t}(d.Component),A=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/device/function",{op:this.props.op,id:this.props.id,type:this.props.type}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){if(this.state){if("OK"===this.state.status){if(this.state.data.length>0){var e=Object.keys(this.state.data[0]);return u.a.createElement(h.ContentReport,{key:"df_cr",thead:e,trows:this.state.data,listItem:function(t){return e.map((function(e){return t[e]}))}})}return u.a.createElement(h.InfoArticle,{key:"df_art"},"No Data")}return u.a.createElement(h.CodeArticle,{key:"df_art"},"Error in devdata: ",this.state.info)}return u.a.createElement(h.Spinner,null)}}]),t}(d.Component)},42:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return y})),n.d(t,"List",(function(){return b})),n.d(t,"Show",(function(){return g})),n.d(t,"Edit",(function(){return E}));var a=n(19),i=n(16),o=n(4),r=n(5),c=n(7),s=n(6),l=n(8),d=n(0),u=n.n(d),m=n(13),h=n(14),p=n(20),_=n(15),f=n(1),v=n.n(f),k=n(39),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.setState(e)},n.state=u.a.createElement(b,{key:"viz_list"}),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement(d.Fragment,{key:"main_base"},this.state)}}]),t}(d.Component),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).listItem=function(e){return[e.id,e.name,u.a.createElement(d.Fragment,{key:"vl_buttons"},u.a.createElement(p.EditButton,{key:"vl_btn_edt_"+e.id,onClick:function(){return n.changeContent(u.a.createElement(E,{key:"viz_edit_"+e.id,id:e.id,changeSelf:n.changeContent,type:"map"}))},title:"Show and edit map"}),u.a.createElement(p.NetworkButton,{key:"vl_btn_net_"+e.id,onClick:function(){return window.open("viz.html?id=".concat(e.id),"_blank")},title:"Show resulting map"}),u.a.createElement(p.DeleteButton,{key:"vl_btn_del_"+e.id,onClick:function(){return n.deleteList(e.id)}}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Delete map?")&&Object(m.c)("api/visualize/delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/visualize/list").then((function(t){e.setState(t)}))}},{key:"render",value:function(){var e=this;return u.a.createElement(d.Fragment,{key:"vl_fragment"},u.a.createElement(h.ContentList,{key:"vl_cl",header:"Maps",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},u.a.createElement(p.ReloadButton,{key:"vl_btn_reload",onClick:function(){return e.componentDidMount()}})),u.a.createElement(h.ContentData,{key:"vl_cd"},this.state.content))}}]),t}(d.Component),g=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).doubleClick=function(e){console.log("DoubleClick",e.nodes),e.nodes[0]&&Object(m.c)("api/device/management",{id:e.nodes[0]}).then((function(e){e&&"OK"===e.status?e.data.url&&e.data.url.length>0?window.open(e.data.url):window.open("ssh://"+e.data.username+"@"+e.data.ip,"_self"):console.log("Data not ok:"+e)}))},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hasOwnProperty("id")?{id:this.props.id}:{name:this.props.name};Object(m.c)("api/visualize/show",t).then((function(t){var n=new window.vis.DataSet(t.data.nodes),a=new window.vis.DataSet(t.data.edges),i=new window.vis.Network(e.refs.show_canvas,{nodes:n,edges:a},t.data.options);i.on("stabilizationIterationsDone",(function(){return i.setOptions({physics:!1})})),i.on("doubleClick",(function(t){return e.doubleClick(t)}))}))}},{key:"render",value:function(){return u.a.createElement(h.Article,{key:"viz_show"},u.a.createElement("div",{className:v.a.network,id:"div_network",ref:"show_canvas"}))}}]),t}(d.Component),E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).changeContent=function(e){return n.props.changeSelf(e)},n.onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.jsonHandler=function(e){var t=Object(i.a)({},n.state.data);try{t[e.target.name]=JSON.parse(e.target.value),n.setState({data:t})}catch(a){console.log("Error converting string to JSON")}},n.updateInfo=function(){return Object(m.c)("api/visualize/network",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.doubleClick=function(e){console.log("DoubleClick",e.nodes[0]),n.props.changeSelf&&n.changeContent(u.a.createElement(k.Info,{key:"di_"+e.nodes[0],id:e.nodes[0]}))},n.toggleEdit=function(){n.edit=!n.edit,n.viz.network.setOptions({manipulation:{enabled:n.edit}}),n.setState({result:"Edit:"+n.edit})},n.toggleFix=function(){n.viz.nodes.forEach((function(e,t){return n.viz.nodes.update({id:t,fixed:!e.fixed})})),n.setState({data:Object(i.a)({},n.state.data,{nodes:n.viz.nodes.get()}),result:"Fix/Unfix positions"})},n.togglePhysics=function(){var e=n.state.data;e.options.physics.enabled=!e.options.physics.enabled,n.viz.network.setOptions({physics:e.options.physics.enabled}),n.setState({data:e,physics_button:e.options.physics.enabled?p.StopButton:p.StartButton,result:"Physics:"+e.options.physics.enabled})},n.networkSync=function(e){n.viz.network.storePositions(),n.setState({data:Object(i.a)({},n.state.data,{nodes:n.viz.nodes.get(),edges:n.viz.edges.get()}),result:"Moved "+n.viz.nodes.get(e.nodes[0]).label})},n.showDiv=function(e){return e===n.state.content?{display:"block"}:{display:"none"}},n.state={content:"network",physics_button:p.StartButton,found:!0,data:{name:"N/A"},result:""},n.viz={network:null,nodes:null,edges:null},n.results=u.a.createRef(),n.edit=!1,n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.c)("api/visualize/network",{id:this.props.id,type:this.props.type}).then((function(t){e.viz.nodes=new window.vis.DataSet(t.data.nodes),e.viz.edges=new window.vis.DataSet(t.data.edges),t.data.options.physics.enabled=!0,e.viz.network=new window.vis.Network(e.refs.edit_canvas,{nodes:e.viz.nodes,edges:e.viz.edges},t.data.options),e.viz.network.on("stabilizationIterationsDone",(function(){return e.viz.network.setOptions({physics:!1})})),e.viz.network.on("doubleClick",(function(t){return e.doubleClick(t)})),e.viz.network.on("dragEnd",(function(t){return e.networkSync(t)})),t.data.options.physics.enabled=!1,e.setState(t)}))}},{key:"render",value:function(){var e=this,t=this.state.physics_button;return u.a.createElement(h.Article,{key:"viz_art",header:"Network Map"},"device"===this.props.type&&this.props.changeSelf&&u.a.createElement(p.BackButton,{key:"viz_back",onClick:function(){return e.changeContent(u.a.createElement(k.Info,{key:"di_"+e.props.id,id:e.props.id}))}}),u.a.createElement(p.ReloadButton,{key:"viz_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(p.EditButton,{key:"viz_edit",onClick:function(){return e.toggleEdit()}}),u.a.createElement(t,{key:"viz_physics",onClick:function(){return e.togglePhysics()}}),u.a.createElement(p.FixButton,{key:"viz_fix",onClick:function(){return e.toggleFix()}}),u.a.createElement(p.SaveButton,{key:"viz_save",onClick:function(){return e.updateInfo()}}),u.a.createElement(p.NetworkButton,{key:"viz_net",onClick:function(){return e.setState({content:"network"})}}),u.a.createElement(p.TextButton,{key:"viz_opt",text:"Options",onClick:function(){return e.setState({content:"options"})}}),u.a.createElement(p.TextButton,{key:"viz_nodes",text:"Nodes",onClick:function(){return e.setState({content:"nodes"})}}),u.a.createElement(p.TextButton,{key:"viz_edges",text:"Edges",onClick:function(){return e.setState({content:"edges"})}}),u.a.createElement(_.TextInput,{key:"viz_name",id:"name",value:this.state.data.name,onChange:this.onChange}),u.a.createElement(h.Result,{key:"viz_result",result:this.state.result}),u.a.createElement("div",{className:v.a.network,style:this.showDiv("network"),ref:"edit_canvas"}),u.a.createElement("div",{className:v.a.network,style:this.showDiv("options")},u.a.createElement("textarea",{id:"options",name:"options",value:JSON.stringify(this.state.data.options,void 0,2),onChange:this.jsonHandler})),u.a.createElement("div",{className:v.a.network,style:this.showDiv("nodes")},u.a.createElement("textarea",{id:"nodes",name:"nodes",value:JSON.stringify(this.state.data.nodes,void 0,2),onChange:this.jsonHandler})),u.a.createElement("div",{className:v.a.network,style:this.showDiv("edges")},u.a.createElement("textarea",{id:"edges",name:"edges",value:JSON.stringify(this.state.data.edges,void 0,2),onChange:this.jsonHandler})))}}]),t}(d.Component)}}]);
//# sourceMappingURL=0.5ecf3fcc.chunk.js.map