(this.webpackJsonprims=this.webpackJsonprims||[]).push([[8,15],{30:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return v})),n.d(t,"LogShow",(function(){return E}));var a=n(9),r=n(13),i=n(3),c=n(4),o=n(6),s=n(5),l=n(7),u=n(0),m=n.n(u),d=n(8),h=n(1),p=n(11),f=n(10),y=n(2),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).listItem=function(e){return[e.node,e.url,m.a.createElement(u.Fragment,{key:"node_buttons"},m.a.createElement(y.InfoButton,{key:"nl_btn_info"+e.id,onClick:function(){return n.changeContent(m.a.createElement(b,{key:"node_info_"+e.id,id:e.id}))},title:"Node information"}),m.a.createElement(y.DeleteButton,{key:"nl_btn_delete"+e.id,onClick:function(){return n.deleteList(e.id)},title:"Delete node"}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Really delete node?")&&Object(d.b)("api/master/node_delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.b)("api/master/node_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return m.a.createElement(u.Fragment,{key:"node_fragment"},m.a.createElement(h.ContentList,{key:"node_cl",header:"Nodes",thead:["Node","URL",""],trows:this.state.data,listItem:this.listItem},m.a.createElement(y.ReloadButton,{key:"nl_btn_reload",onClick:function(){return e.componentDidMount()}}),m.a.createElement(y.AddButton,{key:"nl_btn_add",onClick:function(){return e.changeContent(m.a.createElement(b,{key:"node_new_"+Object(d.c)(),id:"new"}))},title:"Add node"})),m.a.createElement(h.ContentData,{key:"node_cd"},this.state.content))}}]),t}(u.Component),b=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).searchInfo=function(){return Object(d.b)("api/device/search",{node:n.state.data.node}).then((function(e){return e.found&&n.setState({data:Object(r.a)({},n.state.data,{hostname:e.device.hostname,device_id:e.device.id})})}))},n.onChange=function(e){return n.setState({data:Object(r.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.changeContent=function(e){return n.setState({content:e})},n.updateInfo=function(){return Object(d.b)("api/master/node_info",Object(r.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0,content:null},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.b)("api/master/node_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.found){if(this.state.data){var t="new"!==this.state.data.id;return m.a.createElement(u.Fragment,{key:"node_info_fragment"},m.a.createElement("article",{className:"info"},m.a.createElement("h1",null,"Node"),m.a.createElement(h.InfoColumns,{key:"node_content"},m.a.createElement(f.TextInput,{key:"node",id:"node",value:this.state.data.node,onChange:this.onChange}),m.a.createElement(f.UrlInput,{key:"url",id:"url",value:this.state.data.url,onChange:this.onChange}),m.a.createElement(f.TextInput,{key:"hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange})),m.a.createElement(y.SaveButton,{key:"ni_btn_save",onClick:function(){return e.updateInfo()},title:"Save information"}),t&&!this.state.data.hostname&&m.a.createElement(y.SearchButton,{key:"ni_btn_srch",onClick:this.searchInfo,title:"Try to map node to device"}),t&&m.a.createElement(y.ReloadButton,{key:"ni_btn_reload",onClick:function(){return e.changeContent(m.a.createElement(k,{key:"node_reload",node:e.state.data.node}))}}),t&&m.a.createElement(y.LogButton,{key:"ni_btn_logs",onClick:function(){return e.changeContent(m.a.createElement(E,{key:"node_logs",node:e.state.data.node}))},title:"View node logs"}),t&&m.a.createElement(y.DeleteButton,{key:"ni_btn_logc",onClick:function(){return e.changeContent(m.a.createElement(_,{key:"node_logc",node:e.state.data.node,msg:"Really clear logs?"}))},title:"Clear logs"})),m.a.createElement(p.a,{key:"node_navigation",id:"node_navigation"}),this.state.content)}return m.a.createElement(h.Spinner,null)}return m.a.createElement("article",null,"Node with id: ",this.props.id," removed")}}]),t}(u.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.b)("system/reload/"+this.props.node).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?m.a.createElement("article",{className:"code"},m.a.createElement("h1",null,"Module"),this.state.modules.map((function(e,t){return m.a.createElement("span",{key:t},e)}))):m.a.createElement(h.Spinner,null)}}]),t}(u.Component),_=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.b)("api/system/logs_clear?node="+this.props.node).then((function(t){return e.setState({logs:t.file})}))}},{key:"render",value:function(){return this.state?m.a.createElement("article",{className:"code"},m.a.createElement("h1",null,"Cleared"),Object.entries(this.state.logs).map((function(e){return m.a.createElement("span",{key:e[0]},e[0],": ",e[1])}))):m.a.createElement(h.Spinner,null)}}]),t}(u.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.b)("api/system/logs_get?node="+this.props.node).then((function(t){return e.setState({logs:t})}))}},{key:"render",value:function(){return this.state?m.a.createElement("article",{className:"code"},Object.entries(this.state.logs).map((function(e){return m.a.createElement(u.Fragment,null,m.a.createElement("h1",null,e[0]),e[1].map((function(t,n){return m.a.createElement("span",{key:e[0]+"_"+n},t)})))}))):m.a.createElement(h.Spinner,null)}}]),t}(u.Component)},44:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return y})),n.d(t,"Report",(function(){return v})),n.d(t,"TaskReport",(function(){return b})),n.d(t,"FileList",(function(){return j}));var a=n(13),r=n(3),i=n(4),c=n(6),o=n(5),s=n(7),l=n(0),u=n.n(l),m=n(8),d=n(1),h=n(2),p=n(11),f=n(30),y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).changeContent=function(e){return n.setState({content:e})},n.compileNavItems=function(){var e="master"===n.context.cookie.node;n.context.loadNavigation(u.a.createElement(p.a,{key:"system_navbar"},e&&u.a.createElement(p.b,{key:"sys_nav_node",title:"Nodes",onClick:function(){return n.changeImport("node","List")}}),e&&u.a.createElement(p.b,{key:"sys_nav_srv",title:"Servers",onClick:function(){return n.changeImport("server","List")}}),e&&u.a.createElement(p.b,{key:"sys_nav_erd",title:"ERD",onClick:function(){return window.open("erd.pdf","_blank")}}),e&&u.a.createElement(p.b,{key:"sys_nav_user",title:"Users",onClick:function(){return n.changeImport("user","List")}}),e&&u.a.createElement(p.b,{key:"sys_nav_ctrl",title:"Controls",onClick:function(){return n.changeContent(u.a.createElement(O,{key:"system_controls"}))}}),u.a.createElement(p.c,{key:"sys_nav_logs",title:"Logs"},n.state.logs.map((function(e,t){return u.a.createElement(p.b,{key:"sys_nav_logs_"+t,title:e,onClick:function(){return n.changeContent(u.a.createElement(f.LogShow,{key:e.name,node:e}))}})}))),u.a.createElement(p.c,{key:"sys_nav_reports",title:"Reports"},u.a.createElement(p.b,{key:"sys_nav_sys",title:"System",onClick:function(){return n.changeContent(u.a.createElement(v,{key:"system_report"}))}}),u.a.createElement(p.b,{key:"sys_nav_task",title:"Tasks",onClick:function(){return n.changeContent(u.a.createElement(b,{key:"task_report"}))}}),e&&u.a.createElement(p.b,{key:"sys_nav_act",title:"Activities",onClick:function(){return n.changeImport("activity","Report")}}),e&&u.a.createElement(p.b,{key:"sys_nav_resv",title:"Reservations",onClick:function(){return n.changeImport("reservation","Report")}}),e&&u.a.createElement(p.b,{key:"sys_nav_dev",title:"Devices",onClick:function(){return n.changeImport("device","Report")}}),e&&u.a.createElement(p.b,{key:"sys_nav_inv",title:"Inventory",onClick:function(){return n.changeImport("inventory","Report")}})),u.a.createElement(p.b,{key:"sys_nav_rest",title:"REST",onClick:function(){return n.changeContent(u.a.createElement(k,{key:"rest_list"}))}}),n.state.services.length>0&&u.a.createElement(p.c,{key:"sys_nav_svcs",title:"Services"},n.state.services.map((function(e,t){return u.a.createElement(p.b,{key:"sys_nav_svcs_"+t,title:e.name,onClick:function(){return n.changeContent(u.a.createElement(g,Object.assign({key:e.name},e)))}})}))),u.a.createElement(p.e,{key:"sys_nav_reload",onClick:function(){return n.setState({content:null})}}),n.state.navinfo.map((function(e,t){return u.a.createElement(p.d,{key:"sys_nav_ni_"+t,title:e})}))))},n.state={navinfo:[],navitems:[],logs:[],services:[]},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/service_list").then((function(t){Object.assign(e.state,t),e.compileNavItems()})),Object(m.b)("api/master/inventory",{node:this.context.cookie.node,user_id:this.context.cookie.id}).then((function(t){Object.assign(e.state,t),e.compileNavItems()}))}},{key:"changeImport",value:function(e,t){var a=this;n(18)("./"+e+".jsx").then((function(n){var r=n[t];a.setState({content:u.a.createElement(r,{key:e+"_"+t})})}))}},{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"main_base"},this.state.content)}}]),t}(l.Component);y.contextType=d.RimsContext;var v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).listItem=function(e){return[e.info,e.value]},n.state={},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("system/report").then((function(t){return e.setState({data:Object.keys(t).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{info:e,value:t[e]}}))})}))}},{key:"render",value:function(){return u.a.createElement(d.ContentReport,{key:"sys_cr",header:"System Report",thead:["Key","Value"],trows:this.state.data,listItem:this.listItem})}}]),t}(l.Component),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).listItem=function(e){return[e.node,e.frequency,e.module,e.function,e.args]},n.state={},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/master/task_list",{node:this.context.cookie.node}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return u.a.createElement(d.ContentReport,{key:"task_cr",header:"Tasks",thead:["Node","Frequency","Module","Function","Arguments"],trows:this.state.data,listItem:this.listItem})}}]),t}(l.Component);b.contextType=d.RimsContext;var k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).listItem=function(e){return[e.api,u.a.createElement(h.HrefButton,{key:"rest_"+e.api,text:e.function,onClick:function(){n.changeContent(u.a.createElement(_,Object.assign({key:"rest_info_".concat(e.api,"_").concat(e.function)},e)))}})]},n.changeContent=function(e){return n.setState({content:e})},n.state={},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/rest_explore").then((function(t){var n=[];t.data.forEach((function(e){return e.functions.forEach((function(t){return n.push({api:e.api,function:t})}))})),e.setState({data:n})}))}},{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"rest_tp_fragment"},u.a.createElement(d.ContentList,{key:"rest_tp_cl",header:"REST API",thead:["API","Function"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(d.ContentData,{key:"rest_tp_cd"},this.state.content))}}]),t}(l.Component),_=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement("article",{className:"text"},u.a.createElement("h1",null,"API: ",this.props.api),this.state.module.map((function(e,t){return u.a.createElement("p",{key:"ria_"+t},e)})),u.a.createElement("h1",null,"Function: ",this.props.function),this.state.information.map((function(e,t){return u.a.createElement("p",{key:"rif_"+t},e)}))):u.a.createElement(d.Spinner,null)}}]),t}(l.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/"+this.props.api,this.props.args).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement("article",{className:"code"},u.a.createElement("h1",null,this.props.text),u.a.createElement("pre",null,JSON.stringify(this.state,null,2))):u.a.createElement(d.Spinner,null)}}]),t}(l.Component),O=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).changeContent=function(e){return n.setState({content:e})},n.listItem=function(e){return[u.a.createElement(h.HrefButton,{key:"ctrl_"+e.api,text:e.text,onClick:function(){n.changeContent(u.a.createElement(E,Object.assign({key:"rest_"+e.api},e)))}})]},n.state={data:[{api:"monitor/ipam_init",text:"IPAM status check"},{api:"ipam/address_events",text:"IPAM clear status logs",args:{op:"clear"}},{api:"monitor/interface_init",text:"Interface status check"},{api:"device/network_info_discover",text:"Discover device system information (sysmac etc)"},{api:"device/model_sync",text:"Sync device model mapping"},{api:"device/vm_mapping",text:"VM UUID mapping"},{api:"master/oui_fetch",text:"Sync OUI database"},{api:"reservation/expiration_status",text:"Check reservation status"},{api:"system/sleep",text:"Sleep Test",args:{seconds:10}}]},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement(l.Fragment,{key:"ctl_fragment"},u.a.createElement(d.ContentList,{key:"ctl_cl",header:"",thead:["API"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(d.ContentData,{key:"ctl_cd"},this.state.content))}}]),t}(l.Component),j=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).listItem=function(e){return"images"===n.state.mode?".png"===e.substr(e.length-4)?[e,u.a.createElement("img",{src:n.state.path+"/"+e,alt:n.state.path+"/"+e})]:[]:[u.a.createElement(l.Fragment,{key:e},n.state.path+"/",u.a.createElement("a",{href:n.state.path+"/"+e,target:"_blank",rel:"noopener noreferrer"},e))]},n.state={files:null},n.props.hasOwnProperty("directory")?(n.state.mode="directory",n.state.args={directory:n.props.directory}):n.props.hasOwnProperty("fullpath")?(n.state.mode="fullpath",n.state.args={fullpath:n.props.fullpath}):(n.state.mode="images",n.state.args={}),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(m.b)("api/system/file_list",this.state.args).then((function(t){"OK"===t.status?e.setState(t):(window.alert("Error retrieving files:"+t.info),e.setState({files:[]}))}))}},{key:"render",value:function(){var e=this;return this.state.files?u.a.createElement("article",{className:"files"},u.a.createElement("h1",null,this.state.mode),u.a.createElement("div",{className:"table"},u.a.createElement("div",{className:"tbody"},this.state.files.map((function(t,n){return u.a.createElement(d.TableRow,{key:"content_trow_files_"+n,cells:e.listItem(t)})}))))):u.a.createElement(d.Spinner,null)}}]),t}(l.Component),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={state:"inactive"},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateService({})}},{key:"updateService",value:function(e){var t=this;this.setState({spinner:u.a.createElement(d.Spinner,null)}),Object(m.b)("api/system/service_info",Object(a.a)({service:this.props.service},e)).then((function(e){"OK"===e.status?t.setState(Object(a.a)({},e,{spinner:null})):window.alert("Error retrieving service state:"+e.info)}))}},{key:"render",value:function(){var e=this,t="inactive"===this.state.state,n=t?h.StartButton:h.StopButton;return u.a.createElement("article",{className:"lineinput"},u.a.createElement("div",null,u.a.createElement("b",null,this.props.name),": ",this.state.state," (",this.state.extra,") ",u.a.createElement(n,{key:"state_change",onClick:function(){return e.updateService({op:t?"start":"stop"})},title:"Operate service"})),this.state.spinner)}}]),t}(l.Component)}}]);
//# sourceMappingURL=8.e0d416dc.chunk.js.map