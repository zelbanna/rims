{"version":3,"sources":["ipam.jsx"],"names":["Main","props","changeContent","elem","setState","state","NetworkList","key","this","Component","listItem","row","id","netasc","description","service","onClick","NetworkInfo","title","AddressList","changeSelf","network_id","Layout","deleteList","resetStatus","content","window","confirm","rest_call","then","result","deleted","data","filter","count","header","thead","trows","componentDidMount","rnd","Leases","onChange","e","target","name","value","updateInfo","op","found","className","label","text","network","mask","gateway","server_id","servers","map","idx","node","reverse_zone_id","domains","server","changeDevice","lib","Info","createDevice","ip","New","ipam_network_id","dict","extra","start_address","parseInt","split","layout","cnt","hasOwnProperty","start","push","device_id","int2ip","size","mac","hostname","oui","starts","ends","type","domain","a_id","ptr_id","StateMap","AddressInfo","a_domain_id","status","info"],"mappings":"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","file":"static/js/2.31769f7c.chunk.js","sourcesContent":["import React, { Fragment, Component } from 'react'\nimport { rest_call, rnd, int2ip } from './infra/Functions.js';\nimport { Spinner, InfoColumns, StateMap, Result, ContentList, ContentData, ContentReport } from './infra/UI.jsx';\nimport { TextInput, TextLine, SelectInput } from './infra/Inputs.jsx';\nimport { AddButton, DeleteButton, ViewButton, LogButton, ConfigureButton, ItemsButton, ReloadButton, SaveButton } from './infra/Buttons.jsx';\n\n// *************** Main ***************\n//\nexport class Main extends Component {\n constructor(props){\n  super(props)\n  this.state = <NetworkList key='network_list' />\n }\n\n changeContent = (elem) => this.setState(elem)\n\n render(){\n  return  <Fragment key='main_base'>{this.state}</Fragment>\n }\n}\n\n// *************** NetworkList ***************\n//\nexport class NetworkList extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  rest_call('api/ipam/network_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.id,row.netasc,row.description,row.service,<Fragment key={'network_buttons_'+row.id}>\n   <ConfigureButton key={'net_btn_info_'+row.id} onClick={() => this.changeContent(<NetworkInfo key={'network_'+row.id} id={row.id} />)} title='Edit network properties' />\n   <ItemsButton key={'net_btn_items_'+row.id} onClick={() => this.changeContent(<AddressList changeSelf={this.changeContent} key={'address_list_'+row.id} network_id={row.id} />)} title='View addresses' />\n   <ViewButton key={'net_btn_layout_'+row.id} onClick={() => this.changeContent(<Layout changeSelf={this.changeContent} key={'address_layout_'+row.id} network_id={row.id} />)} title='View usage map' />\n   <DeleteButton key={'net_btn_delete_'+row.id} onClick={() => this.deleteList(row.id)} title='Delete network' />\n   <ReloadButton key={'net_btn_rset_'+row.id} onClick={() => this.resetStatus(row.id)} title='Reset state for network addresses' />\n  </Fragment>\n ]\n\n changeContent = (elem) => this.setState({content:elem})\n deleteList = (id) => (window.confirm('Really delete network') && rest_call('api/ipam/network_delete', {id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id)),content:null})))\n\n resetStatus = (id) => rest_call('api/ipam/clear',{network_id:id}).then(result => this.setState({result:result.count}))\n\n render(){\n  return <Fragment key='nl_fragment'>\n   <ContentList key='nl_cl' header='Networks' thead={['ID','Network','Description','DHCP','']} trows={this.state.data} listItem={this.listItem} result={this.state.result}>\n    <ReloadButton key='nl_btn_reload'  onClick={() => this.componentDidMount() } />\n    <AddButton key='nl_btn_add' onClick={() => this.changeContent(<NetworkInfo key={'network_new_'+rnd()} id='new' />)} title='Add network' />\n    <LogButton key='nl_btn_doc' onClick={() => this.changeContent(<Leases key='network_leases' />)} title='View IPAM/DHCP leases' />\n   </ContentList>\n   <ContentData key='nl_cd'>{this.state.content}</ContentData>\n  </Fragment>\n }\n}\n\n// *************** NetworkInfo ***************\n//\nclass NetworkInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, found:true };\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n changeContent = (elem) => this.setState({content:elem})\n\n updateInfo = () => rest_call('api/ipam/network_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidMount(){\n  rest_call('api/ipam/network_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n render() {\n  if (this.state.data)\n   return (\n    <article className='info'>\n     <h1>Network</h1>\n     <InfoColumns key='network_content'>\n      <TextLine key='id' id='id' label='ID' text={this.state.data.id} />\n      <TextInput key='description' id='description'  value={this.state.data.description} onChange={this.onChange} />\n      <TextInput key='network' id='network' value={this.state.data.network} onChange={this.onChange} />\n      <TextInput key='mask' id='mask' value={this.state.data.mask} onChange={this.onChange} />\n      <TextInput key='gateway' id='gateway' value={this.state.data.gateway} onChange={this.onChange} />\n      <SelectInput key='server_id' id='server_id' label='Server' value={this.state.data.server_id} onChange={this.onChange}>\n       {this.state.servers.map((row,idx) => <option key={'ni_srv_'+idx} value={row.id}>{`${row.service}@${row.node}`}</option>)}\n      </SelectInput>\n      <SelectInput key='reverse_zone_id' id='reverse_zone_id' label='Reverse Zone' value={this.state.data.reverse_zone_id} onChange={this.onChange}>\n       {this.state.domains.map((row,idx) => <option key={'ni_rzone_'+idx} value={row.id}>{`${row.server} (${row.name})`}</option>)}\n      </SelectInput>\n     </InfoColumns>\n     <SaveButton key='network_btn_save' onClick={() => this.updateInfo()} title='Save' />\n    </article>\n   );\n  else\n   return <Spinner />\n }\n}\n\n// *************** Network Layout ***************\n//\nclass Layout extends Component {\n\n componentDidMount(){\n  rest_call('api/ipam/address_list',{network_id:this.props.network_id,dict:'ip_integer',extra:['device_id']}).then(result => this.setState({...result, start_address:parseInt(result.network.split('.')[3])}))\n }\n\n changeContent = (elem) => this.props.changeSelf(elem)\n\n changeDevice = (id) => import('./device.jsx').then(lib => this.changeContent(<lib.Info key={'di_'+id} id={id} />))\n\n createDevice = (network,ip) => import('./device.jsx').then(lib =>  this.changeContent(<lib.New key={'dn_new'} ipam_network_id={network} ip={ip} />))\n\n render(){\n  if (!this.state)\n   return <Spinner />\n  else {\n   const layout = [];\n   for (let cnt = 0; cnt <= this.state.size; cnt++){\n    if (this.state.data.hasOwnProperty(this.state.start + cnt))\n     layout.push(<button key={'btn_' + this.state.start + cnt} className='info ipam red' onClick={() => this.changeDevice(this.state.data[this.state.start + cnt].device_id)}>{cnt%256}</button>)\n    else\n     layout.push(<button key={'btn_' + this.state.start + cnt} className='info ipam green' onClick={() => this.createDevice(this.props.network_id,int2ip(this.state.start + cnt))}>{cnt%256}</button>)\n   }\n   return (\n    <article>\n     <h1>{this.state.network}/{this.state.mask}</h1>\n     {layout}\n    </article>\n   );\n  }\n }\n}\n\n// *************** Leases ***************\n//\nclass Leases extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  rest_call('api/ipam/server_leases',{type:'active'}).then(result => this.setState(result))\n }\n\n listItem = (row) => [row.ip,row.mac,row.hostname,row.oui,row.starts,row.ends]\n\n render(){\n  return <ContentReport key='lease_cr' header='Leases' thead={['IP','Mac','Hostname','OUI','Starts','End']} trows={this.state.data} listItem={this.listItem} />\n }\n}\n\n// *************** Address List ***************\n//\nclass AddressList extends Component{\n constructor(props){\n  super(props)\n  this.state = {data:null,result:null}\n }\n\n componentDidMount(){\n  rest_call('api/ipam/address_list',{network_id:this.props.network_id,extra:['a_id','ptr_id','hostname','a_domain_id','device_id']}).then(result => this.setState(result))\n }\n\n changeContent = (elem) => this.props.changeSelf(elem)\n\n listItem = (row) => [row.id,row.ip,row.hostname,row.domain,row.a_id,row.ptr_id,StateMap({state:row.state}),<Fragment key={'ip_button_'+row.id}>\n   <ConfigureButton key={'al_btn_info'+row.id} onClick={() => this.changeContent(<AddressInfo key={'address_info_'+row.id} id={row.id} />)} title='Edit address entry' />\n   <DeleteButton key={'al_btn_delete'+row.id} onClick={() => this.deleteList(row.id)} title='Delete address entry' />\n  </Fragment>]\n\n deleteList = (id) => (window.confirm('Delete address?') && rest_call('api/ipam/address_delete', {id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id))})))\n\n render(){\n  return <ContentReport key='al_cr' header='Allocated IP Addresses' thead={['ID','IP','Hostname','Domain','A','PTR','','']} trows={this.state.data} listItem={this.listItem} result={this.state.result}>\n   <ReloadButton key='al_btn_reload' onClick={() => this.componentDidMount() } />\n   <AddButton key='al_btn_add' onClick={() => this.changeContent(<AddressInfo key={'address_new_' + rnd()} network_id={this.props.network_id} id='new' />)} title='Add address entry' />\n  </ContentReport>\n }\n}\n\n// *************** Address Info ***************\n//\nexport class AddressInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, found:true};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n updateInfo = () => rest_call('api/ipam/address_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidMount(){\n  rest_call('api/ipam/address_info',{id:this.props.id,network_id:this.props.network_id}).then(result => this.setState(result))\n  rest_call('api/dns/domain_list',{'filter':'forward'}).then(result => this.setState({domains:result.data}))\n }\n\n render() {\n  if (this.state && this.state.data && this.state.domains)\n   return (\n    <article className='info'>\n     <h1>IP Address</h1>\n     <InfoColumns key='ip_content'>\n      <TextLine key='id' id='id' label='ID' text={this.state.data.id} />\n      <TextLine key='network' id='network' text={this.state.extra.network} />\n      <TextInput key='ip' id='ip' label='IP'  value={this.state.data.ip} onChange={this.onChange} />\n      <TextInput key='a_id' id='a_id' label='A_id' value={this.state.data.a_id} onChange={this.onChange} />\n      <TextInput key='ptr_id' id='ptr_id' label='PTR_id' value={this.state.data.ptr_id} onChange={this.onChange} />\n      <TextInput key='hostname' id='hostname' value={this.state.data.hostname} onChange={this.onChange} />\n      <SelectInput key='a_domain_id' id='a_domain_id' label='Domain' value={this.state.data.a_domain_id} onChange={this.onChange}>{this.state.domains.map((row,idx) => <option key={'ai_dom_'+idx} value={row.id}>{row.name}</option>)}</SelectInput>\n     </InfoColumns>\n     <SaveButton key='ip_save' onClick={() => this.updateInfo()} title='Save' />\n     <Result key='ip_operation' result={(this.state.status !== 'OK') ? this.state.info : 'OK'} />\n    </article>\n   );\n  else\n   return <Spinner />\n }\n}\n"],"sourceRoot":""}