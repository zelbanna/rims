(this.webpackJsonprims=this.webpackJsonprims||[]).push([[16],{46:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return f})),n.d(t,"Info",(function(){return C})),n.d(t,"Report",(function(){return E}));var a=n(18),r=n(14),o=n(4),i=n(5),c=n(6),l=n(7),u=n(0),s=n.n(u),d=n(12),h=n(13),v=n(15),m=n(20),p=n(16),f=function(e){Object(l.a)(Main,e);var t=Object(c.a)(Main);function Main(){var e;Object(o.a)(this,Main);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).compileNavItems=function(){return e.context.loadNavigation(s.a.createElement(p.NavBar,{key:"inventory_navbar"},s.a.createElement(p.NavDropDown,{key:"inv_nav_inv",title:"Inventory"},s.a.createElement(p.NavDropButton,{key:"inv_nav_srch",title:"Search",onClick:function onClick(){return e.changeContent(s.a.createElement(y,{key:"search_list",changeSelf:e.changeContent}))}}),s.a.createElement(p.NavDropButton,{key:"inv_nav_vend",title:"Vendor",onClick:function onClick(){return e.changeContent(s.a.createElement(g,{key:"vendor_list",changeSelf:e.changeContent}))}}),s.a.createElement(p.NavDropButton,{key:"inv_nav_list",title:"List",onClick:function onClick(){return e.changeContent(s.a.createElement(k,{key:"list",changeSelf:e.changeContent}))}})),s.a.createElement(p.NavButton,{key:"inv_nav_loc",title:"Locations",onClick:function onClick(){return e.changeLocation()}})))},e.changeLocation=function(){return n.e(5).then(n.bind(null,38)).then((function(t){return e.setState(s.a.createElement(t.List,{key:"location_list"}))}))},e.changeContent=function(t){return e.setState(t)},e}return Object(i.a)(Main,[{key:"componentDidMount",value:function componentDidMount(){this.compileNavItems()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e!==this.props&&this.compileNavItems()}},{key:"render",value:function render(){return s.a.createElement(s.a.Fragment,null,this.state)}}]),Main}(u.Component);f.contextType=h.RimsContext;var k=function(e){Object(l.a)(List,e);var t=Object(c.a)(List);function List(e){var n;return Object(o.a)(this,List),(n=t.call(this,e)).listItem=function(e){return[e.id,e.serial,e.model,s.a.createElement(s.a.Fragment,null,s.a.createElement(m.InfoButton,{key:"info",onClick:function onClick(){return n.changeContent(s.a.createElement(C,{key:"inventory_"+e.id,id:e.id}))},title:"View inventory item"}),s.a.createElement(m.DeleteButton,{key:"del",onClick:function onClick(){return n.deleteList(e.id)},title:"Delete inventory item"}))]},n.deleteList=function(e){return window.confirm("Really delete item")&&Object(d.d)("api/inventory/delete",{id:e}).then((function(t){t.deleted&&(n.setState({data:n.state.data.filter((function(t){return t.id!==e}))}),n.changeContent(null))}))},n.state={searchfield:""},n}return Object(i.a)(List,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/inventory/list",this.props.args).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;if(this.state.data){var t=0===this.state.searchfield.length?this.state.data:this.state.data.filter((function(t){return t.model.includes(e.state.searchfield)||t.serial.includes(e.state.searchfield)}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.ContentList,{key:"cl",header:"Inventory",thead:["ID","Serial","Model",""],trows:t,listItem:this.listItem,result:this.state.result},s.a.createElement(m.ReloadButton,{key:"reload",onClick:function onClick(){return e.componentDidMount()}}),s.a.createElement(m.AddButton,{key:"add",onClick:function onClick(){return e.changeContent(s.a.createElement(C,{key:"inventory_new_"+Object(d.e)(),id:"new"}))},title:"Add inventory item"}),s.a.createElement(v.SearchInput,{key:"search",searchFire:function searchFire(t){return e.setState({searchfield:t})},placeholder:"Search inventory (case sensitive)"})),s.a.createElement(h.ContentData,{key:"cda",mountUpdate:function mountUpdate(t){return e.changeContent=t}}))}return s.a.createElement(h.Spinner,null)}}]),List}(u.Component),y=function(e){Object(l.a)(Search,e);var t=Object(c.a)(Search);function Search(e){var n;return Object(o.a)(this,Search),(n=t.call(this,e)).changeContent=function(e){return n.props.changeSelf(e)},n.onChange=function(e){return n.setState({data:Object(r.a)({},n.state.data,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},n.state={data:{field:"serial",search:""}},n}return Object(i.a)(Search,[{key:"render",value:function render(){var e=this;return s.a.createElement(h.LineArticle,{key:"inv_srch_art",header:"Inventory search"},s.a.createElement(v.SelectInput,{key:"field",id:"field",value:this.state.data.field,onChange:this.onChange},s.a.createElement("option",{value:"serial"},"Serial"),s.a.createElement("option",{value:"vendor"},"Vendor")),s.a.createElement(v.TextInput,{key:"search",id:"search",value:this.state.data.search,placeholder:"search",onChange:this.onChange}),s.a.createElement(m.SearchButton,{key:"inv_btn_search",onClick:function onClick(){return e.changeContent(s.a.createElement(k,{key:"inventory_list",args:e.state.data}))},title:"Search inventory"}))}}]),Search}(u.Component),C=function(e){Object(l.a)(Info,e);var t=Object(c.a)(Info);function Info(e){var n;return Object(o.a)(this,Info),(n=t.call(this,e)).onChange=function(e){return n.setState({data:Object(r.a)({},n.state.data,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},n.changeContent=function(e){return n.setState({content:e})},n.updateInfo=function(){return Object(d.d)("api/inventory/info",Object(r.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(i.a)(Info,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/inventory/info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;if(this.state.data){var t=this.state.data;return s.a.createElement(h.InfoArticle,{key:"inv_article",header:"Inventory Item"},s.a.createElement(h.InfoColumns,{key:"inv_content"},s.a.createElement(v.TextInput,{key:"vendor",id:"vendor",value:t.vendor,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"serial",id:"serial",label:"S/N",value:t.serial,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"product",id:"product",value:t.product,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"model",id:"model",value:t.model,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"description",id:"description",value:t.description,onChange:this.onChange}),s.a.createElement(v.SelectInput,{key:"location_id",id:"location_id",label:"Location",value:t.location_id,onChange:this.onChange},this.state.locations.map((function(e,t){return s.a.createElement("option",{key:"ii_"+t,value:e.id},e.name)}))),s.a.createElement(v.DateInput,{key:"receive_date",id:"receive_date",label:"Received",value:t.receive_date,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"purchase_order",id:"purchase_order",label:"Purchase Order",value:t.purchase_order,onChange:this.onChange}),s.a.createElement(v.CheckboxInput,{key:"license",id:"license",value:t.license,onChange:this.onChange}),t.license&&s.a.createElement(v.TextInput,{key:"license_key",id:"license_key",label:"Key",value:t.license_key,onChange:this.onChange}),s.a.createElement(v.CheckboxInput,{key:"support_contract",id:"support_contract",value:t.support_contract,onChange:this.onChange}),t.support_contract&&s.a.createElement(v.DateInput,{key:"support_end_date",id:"support_end_date",label:"Contract End",value:t.support_end_date,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"comments",id:"comments",value:t.comments,onChange:this.onChange})),s.a.createElement(m.ReloadButton,{key:"inv_btn_reload",onClick:function onClick(){return e.componentDidMount()}}),t.serial&&s.a.createElement(m.SaveButton,{key:"inv_btn_save",onClick:function onClick(){return e.updateInfo()},title:"Save"}))}return s.a.createElement(h.Spinner,null)}}]),Info}(u.Component),g=function(e){Object(l.a)(Vendor,e);var t=Object(c.a)(Vendor);function Vendor(e){var n;return Object(o.a)(this,Vendor),(n=t.call(this,e)).listItem=function(e){return[s.a.createElement(m.HrefButton,{key:"search_"+e.vendor,text:e.vendor,onClick:function onClick(){return n.changeContent(s.a.createElement(k,{key:"inventory_list",args:{field:"vendor",search:e.vendor}}))}}),e.count]},n.state={},n}return Object(i.a)(Vendor,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/inventory/vendor_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.ContentList,{key:"cl",header:"Vendors",thead:["Name","Count"],trows:this.state.data,listItem:this.listItem}),s.a.createElement(h.ContentData,{key:"cda",mountUpdate:function mountUpdate(t){return e.changeContent=t}}))}}]),Vendor}(u.Component),E=function(e){Object(l.a)(Report,e);var t=Object(c.a)(Report);function Report(e){var n;return Object(o.a)(this,Report),(n=t.call(this,e)).listItem=function(e){return[e.id,e.serial,e.vendor,e.model,e.product,e.description]},n.state={},n}return Object(i.a)(Report,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/inventory/list",{extra:["vendor","product","description"],sort:"vendor"}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){return s.a.createElement(h.ContentReport,{key:"inv_cr",header:"Inventory",thead:["ID","Serial","Vendor","Model","Product","Description"],trows:this.state.data,listItem:this.listItem})}}]),Report}(u.Component)}}]);
//# sourceMappingURL=16.7cf3b39b.chunk.js.map