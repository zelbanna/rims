(this.webpackJsonprims=this.webpackJsonprims||[]).push([[14],{42:function(e,t,n){"use strict";n.r(t),n.d(t,"Search",(function(){return m})),n.d(t,"Device",(function(){return p})),n.d(t,"List",(function(){return v}));var a=n(18),r=n(4),c=n(5),i=n(6),s=n(7),o=n(0),l=n.n(o),u=n(12),h=n(13),f=n(15),d=n(19),m=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this,e)).changeContent=function(e){return c.props.changeSelf(e)},c.onChange=function(e){return c.setState(Object(a.a)({},e.target.name,e.target.value))},c.state={field:"mac",search:""},c}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(h.LineArticle,{key:"fs_art",header:"FDB Search"},l.a.createElement(f.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},l.a.createElement("option",{value:"mac"},"MAC"),l.a.createElement("option",{value:"device_id"},"Device ID")),l.a.createElement(f.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),l.a.createElement(d.SearchButton,{key:"fs_btn_search",onClick:function(){return e.changeContent(l.a.createElement(v,Object.assign({key:"fdb_list"},e.state,{changeSelf:e.props.changeSelf})))},title:"Search FDB"}))}}]),n}(o.Component),p=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var c;return Object(r.a)(this,a),(c=t.call(this,e)).changeContent=function(e){return c.props.changeSelf(e)},c.changeInterface=function(e){return n.e(1).then(n.bind(null,40)).then((function(t){return c.changeContent(l.a.createElement(t.Info,{key:"interface_info",device_id:c.props.id,interface_id:e,changeSelf:c.changeContent}))}))},c.listItem=function(e,t){return[e.vlan,e.snmp_index,l.a.createElement(d.HrefButton,{key:"fd_intf_"+e.interface_id,text:e.name,onClick:function(){return c.changeInterface(e.interface_id)}}),e.mac]},c.state={wait:null},c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/fdb/list",{field:"device_id",search:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"syncFDB",value:function(){var e=this;this.setState({wait:l.a.createElement(h.Spinner,null)}),Object(u.c)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(t){return e.setState({wait:null})}))}},{key:"render",value:function(){var e=this;return this.state.data?l.a.createElement(h.ContentReport,{key:"fd_cr",header:"FDB",thead:["VLAN","SNMP","Interface","MAC"],trows:this.state.data,listItem:this.listItem},l.a.createElement(d.ReloadButton,{key:"fd_btn_reload",onClick:function(){return e.componentDidMount()}}),l.a.createElement(d.SyncButton,{key:"fd_btn_sync",onClick:function(){return e.syncFDB()},title:"Resync FDB"}),this.state.wait):l.a.createElement(h.Spinner,null)}}]),a}(o.Component),v=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).changeSearch=function(e,t){return a.setState({content:l.a.createElement(k,{key:"fi_"+t,mac:e})})},a.searchHandler=function(e){return a.setState({searchfield:e.target.value})},a.listItem=function(e,t){return[e.device_id,e.hostname,e.vlan,e.snmp_index,e.name,l.a.createElement(d.HrefButton,{key:"fd_intf_"+t,text:e.mac,onClick:function(){return a.changeSearch(e.mac,t)}})]},a.state={searchfield:"",content:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.searchfield.toUpperCase(),n=0===t.length?this.state.data:this.state.data.filter((function(e){return e.mac.includes(t)}));return l.a.createElement(o.Fragment,{key:"fl_frag"},l.a.createElement(h.ContentList,{key:"fl_cr",header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC"],trows:n,listItem:this.listItem},l.a.createElement(d.ReloadButton,{key:"fl_btn_reload",onClick:function(){return e.componentDidMount()}}),l.a.createElement(f.SearchInput,{key:"fl_search",searchHandler:this.searchHandler,value:this.state.searchfield,placeholder:"Search MAC"})),l.a.createElement(h.ContentData,{key:"fl_content"},this.state.content))}return l.a.createElement(h.Spinner,null)}}]),n}(o.Component),k=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/fdb/search",{mac:this.props.mac}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.device?l.a.createElement(h.ContentReport,{key:"fd_cr",header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Name","Description"],trows:this.state.interfaces,listItem:function(e){return[e.interface_id,e.name,e.description]}}):this.state.status?l.a.createElement(h.LineArticle,{key:"fd_la",header:"Search error"},"Search result: ",this.state.info):l.a.createElement(h.Spinner,null)}}]),n}(o.Component)}}]);
//# sourceMappingURL=14.7f85f0aa.chunk.js.map