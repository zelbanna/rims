"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[533],{533:(t,e,s)=>{s.r(e),s.d(e,{FileList:()=>x,Main:()=>p,Report:()=>l});var n=s(43),i=s(524),o=s(662),a=s(728),r=s(307),c=s(263),h=s(579);class p extends n.Component{constructor(t){super(t),this.compileNavItems=()=>{const t="master"===this.context.settings.node,e="admin"===this.context.settings.class,s=t&&e;this.context.loadNavigation((0,h.jsxs)(r.NavBar,{children:[s&&(0,h.jsx)(r.NavButton,{title:"Nodes",onClick:()=>this.changeImport("node","List")},"sys_nav_node"),s&&(0,h.jsx)(r.NavButton,{title:"Servers",onClick:()=>this.changeImport("server","List")},"sys_nav_srv"),t&&(0,h.jsx)(r.NavButton,{title:"ERD",onClick:()=>window.open("erd.pdf","_blank")},"sys_nav_erd"),s&&(0,h.jsx)(r.NavButton,{title:"Users",onClick:()=>this.changeImport("user","List")},"sys_nav_user"),t&&(0,h.jsx)(r.NavButton,{title:"Controls",onClick:()=>this.changeContent((0,h.jsx)(u,{},"system_controls"))},"sys_nav_ctrl"),(0,h.jsxs)(r.NavDropDown,{title:"Reports",children:[(0,h.jsx)(r.NavDropButton,{title:"System",onClick:()=>this.changeContent((0,h.jsx)(l,{},"system_report"))},"sys_nav_sys"),e&&(0,h.jsx)(r.NavDropButton,{title:"Activities",onClick:()=>this.changeImport("activity","Report")},"sys_nav_act"),t&&(0,h.jsx)(r.NavDropButton,{title:"Reservations",onClick:()=>this.changeImport("reservation","Report")},"sys_nav_resv"),t&&(0,h.jsx)(r.NavDropButton,{title:"Devices",onClick:()=>this.changeImport("device","Report")},"sys_nav_dev"),t&&(0,h.jsx)(r.NavDropButton,{title:"Software",onClick:()=>this.changeImport("device","ReportSoftware")},"sys_nav_dev_sw"),t&&(0,h.jsx)(r.NavDropButton,{title:"Interfaces",onClick:()=>this.changeImport("interface","Report")},"sys_nav_if"),t&&(0,h.jsx)(r.NavDropButton,{title:"Inventory",onClick:()=>this.changeImport("inventory","Report")},"sys_nav_inv")]},"sys_nav_reports"),(0,h.jsx)(r.NavButton,{title:"Logs",onClick:()=>this.changeImport("node","LogShow",{node:this.context.settings.node})},"sys_nav_logs"),e&&(0,h.jsx)(r.NavButton,{title:"REST",onClick:()=>this.changeContent((0,h.jsx)(d,{},"rest_list"))},"sys_nav_rest"),(0,h.jsx)(r.NavReload,{onClick:()=>this.changeContent(null)},"sys_nav_reload"),this.state.navinfo.map(((t,e)=>(0,h.jsx)(r.NavInfo,{title:t},"sys_nav_ni_"+e)))]},"system_navbar"))},this.changeContent=t=>this.setState({content:t}),this.state={navinfo:[],navitems:[],logs:[]}}componentDidMount(){(0,i.Cc)("api/system/inventory",{user_id:this.context.settings.id}).then((t=>{Object.assign(this.state,t),this.compileNavItems()}))}componentDidUpdate(t){t!==this.props&&this.compileNavItems()}changeImport(t,e,n){s(25)("./"+t+".jsx").then((s=>{var i=s[e];this.setState({content:(0,h.jsx)(i,{...n},t+"_"+e)})}))}render(){return(0,h.jsx)(h.Fragment,{children:this.state.content})}}p.contextType=o.RimsContext;class l extends n.Component{constructor(t){super(t),this.listItem=t=>[t.info,t.value],this.state={}}componentDidMount(){(0,i.Cc)("api/system/report").then((t=>this.setState({data:Object.keys(t).sort(((t,e)=>t.localeCompare(e))).map((e=>({info:e,value:t[e]})))})))}render(){return(0,h.jsx)(o.ContentReport,{header:"System Report",thead:["Key","Value"],trows:this.state.data,listItem:this.listItem},"sys_cr")}}class d extends n.Component{constructor(t){super(t),this.listItem=t=>[t.api,(0,h.jsx)(a.HrefButton,{text:t.function,onClick:()=>{this.changeContent((0,h.jsx)(m,{...t},"rest_info"))}},"rest_"+t.api)],this.state={}}componentDidMount(){(0,i.Cc)("api/system/rest_explore").then((t=>{var e=[];t.data.forEach((t=>t.functions.forEach((s=>e.push({api:t.api,function:s}))))),this.setState({data:e})}))}render(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.ContentList,{header:"REST API",thead:["API","Function"],trows:this.state.data,listItem:this.listItem},"cl"),(0,h.jsx)(o.ContentData,{mountUpdate:t=>this.changeContent=t},"cda")]})}}class m extends n.Component{constructor(t){super(t),this.state={}}componentDidUpdate(t){t!==this.props&&(0,i.Cc)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((t=>this.setState(t)))}componentDidMount(){(0,i.Cc)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((t=>this.setState(t)))}render(){return this.state.module&&this.state.information?(0,h.jsxs)(o.Article,{header:this.props.api,children:[this.state.module.join("\n"),(0,h.jsx)(o.Title,{text:this.props.function}),this.state.information.join("\n")]},"ri_art"):(0,h.jsx)(o.Spinner,{})}}class v extends n.Component{componentDidMount(){(0,i.Cc)("api/"+this.props.api,this.props.args).then((t=>this.setState(t)))}render(){return this.state?(0,h.jsx)(o.CodeArticle,{header:this.props.text,children:JSON.stringify(this.state,null,2)},"re_code"):(0,h.jsx)(o.Spinner,{})}}class u extends n.Component{constructor(t){super(t),this.listItem=t=>[(0,h.jsx)(a.HrefButton,{text:t.text,onClick:()=>this.changeContent((0,h.jsx)(v,{...t},"rest_"+t.api))},"ctrl_"+t.api)],this.state={data:[{api:"ipam/check",text:"IPAM status check"},{api:"interface/check",text:"Interface status check"},{api:"device/system_info_discover",text:"Discover device system information (sysmac etc)"},{api:"device/model_sync",text:"Sync device model mapping"},{api:"device/vm_mapping",text:"VM UUID mapping"},{api:"master/oui_fetch",text:"Sync OUI database"},{api:"reservation/expiration_status",text:"Check reservation status"},{api:"fdb/check",text:"Update FDB"}]}}render(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.ContentList,{header:"",thead:["API"],trows:this.state.data,listItem:this.listItem},"cl"),(0,h.jsx)(o.ContentData,{mountUpdate:t=>this.changeContent=t},"cda")]})}}class x extends n.Component{constructor(t){super(t),this.loadFiles=()=>{let t={};t=this.props.hasOwnProperty("directory")?{mode:"directory",args:{directory:this.props.directory},files:void 0}:this.props.hasOwnProperty("fullpath")?{mode:"fullpath",args:{fullpath:this.props.fullpath},files:void 0}:{mode:"images",args:{},files:void 0},(0,i.Cc)("api/system/file_list",t.args).then((e=>{"OK"===e.status?this.setState({mode:t.mode,...e}):(window.alert("Error retrieving files:"+e.info),this.setState({files:[]}))}))},this.listItem=t=>"images"===this.state.mode?".png"===t.substr(t.length-4)?[t,(0,h.jsx)("img",{src:this.state.path+"/"+t,alt:this.state.path+"/"+t})]:[]:[(0,h.jsxs)(h.Fragment,{children:[this.state.path+"/",(0,h.jsx)("a",{className:c.A.href,href:this.state.path+"/"+t,target:"_blank",rel:"noopener noreferrer",children:t})]})],this.state={}}componentDidUpdate(t){t!==this.props&&this.loadFiles()}componentDidMount(){this.loadFiles()}render(){return this.state.files?(0,h.jsx)(o.ContentReport,{header:this.state.mode,thead:[],trows:this.state.files,listItem:this.listItem}):(0,h.jsx)(o.Spinner,{})}}}}]);
//# sourceMappingURL=533.670c2014.chunk.js.map