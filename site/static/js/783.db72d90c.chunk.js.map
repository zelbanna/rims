{"version":3,"file":"static/js/783.db72d90c.chunk.js","mappings":"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","sources":["user.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { post_call } from './infra/Functions.js';\nimport { RimsContext, Flex, Spinner, InfoArticle, InfoColumns, ContentList, ContentData, Result } from './infra/UI.jsx';\nimport { AddButton, DeleteButton, ConfigureButton, ReloadButton, SaveButton } from './infra/Buttons.jsx';\nimport { TextInput, TextLine, PasswordInput, SelectInput } from './infra/Inputs.jsx';\n\n// ************** List **************\n//\nexport class List extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  post_call('api/master/user_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.id,row.alias,row.name,<>\n   <ConfigureButton key='config' onClick={() => this.changeContent(<Info key='user_info' id={row.id} />)} title='Edit user' />\n   <DeleteButton key='del' onClick={() => this.deleteList(row.id)} title='Delete user' />\n  </>]\n\n deleteList = (id) => (window.confirm('Really delete user?') && post_call('api/master/user_delete', {id:id}).then(result => {\n  if (result.deleted){\n   this.setState({data:this.state.data.filter(row => (row.id !== id))});\n   this.changeContent(null);\n  }}))\n\n render(){\n  return <>\n   <ContentList key='cl' header='Users' thead={['ID','Alias','Name','']} trows={this.state.data} listItem={this.listItem}>\n    <ReloadButton key='reload' onClick={() => this.componentDidMount()} />\n    <AddButton key='add' onClick={() => this.changeContent(<Info key='user_info' id='new' />)} title='Add user' />\n   </ContentList>\n   <ContentData key='cda' mountUpdate={(fun) => this.changeContent = fun} />\n  </>\n }\n}\n\n// ************** Info **************\n//\nexport class Info extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, found:true};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props){\n   post_call('api/master/user_info',{id:this.props.id}).then(result => this.setState(result))\n  }\n }\n\n componentDidMount(){\n  post_call('api/portal/theme_list').then(result => this.setState({themes:result.data}))\n  post_call('api/master/user_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n updateInfo = () => {\n  this.setState({update:false,password_check:''})\n  if(this.context.settings.id === this.state.data.id)\n   this.context.changeTheme(this.state.data.theme);\n  post_call('api/master/user_info',{op:'update', ...this.state.data},{'X-Log':'false'}).then(result => this.setState(result))\n }\n\n render() {\n  if (!this.state.found)\n   return <InfoArticle key='ui_art'>User with id: {this.props.id} removed</InfoArticle>\n  else if (this.state.data && this.state.themes){\n   let result = (this.state.update) ? 'OK - updated' : '';\n   return <InfoArticle key='ui_art' header='User'>\n     <InfoColumns key='ui_content'>\n      {(this.context.settings.id === this.props.id) ?  <TextLine key='alias' id='alias' text={this.state.data.alias} /> : <TextInput key='alias' id='alias' value={this.state.data.alias} onChange={this.onChange} />}\n      <PasswordInput key='password' id='password' placeholder='******' onChange={this.onChange} />\n      {this.context.settings.class === 'admin' && <SelectInput key='class' id='class' value={this.state.data.class} onChange={this.onChange}>{this.state.classes.map(row => <option key={row} value={row}>{row}</option>)}</SelectInput>}\n      <TextInput key='email' id='email' label='E-Mail' value={this.state.data.email} onChange={this.onChange} />\n      <TextInput key='name' id='name' label='Full name' value={this.state.data.name} onChange={this.onChange} />\n      <SelectInput key='theme' id='theme' value={this.state.data.theme} onChange={this.onChange}>{this.state.themes.map(row => <option key={row} value={row}>{row}</option>)}</SelectInput>\n     </InfoColumns>\n     <SaveButton key='ui_btn_save' onClick={() => this.updateInfo()} title='Save' />\n     <Result key='ui_operation' result={result} />\n    </InfoArticle>\n  } else\n   return <Spinner />\n }\n}\nInfo.contextType = RimsContext;\n\n// ************** User **************\n//\nexport class User extends Component {\n render() {\n  return <Flex key='flex' style={{justifyContent:'space-evenly'}}><Info key='user_info' id={this.props.id} /></Flex>\n }\n}\n"],"names":["List","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","listItem","row","id","alias","name","_jsxs","_Fragment","children","_jsx","ConfigureButton","onClick","changeContent","Info","title","DeleteButton","deleteList","window","confirm","post_call","then","result","deleted","setState","data","state","filter","_createClass","key","value","_this2","_this3","ContentList","header","thead","trows","this","ReloadButton","componentDidMount","AddButton","ContentData","mountUpdate","fun","Component","_Component2","_super2","_this4","onChange","e","_objectSpread","_defineProperty","target","updateInfo","update","password_check","context","settings","changeTheme","theme","op","found","prevProps","_this5","_this6","themes","_this7","InfoArticle","InfoColumns","TextLine","text","TextInput","PasswordInput","placeholder","class","SelectInput","classes","map","label","email","SaveButton","Result","Spinner","contextType","RimsContext","User","_Component3","_super3","apply","arguments","Flex","style","justifyContent"],"sourceRoot":""}