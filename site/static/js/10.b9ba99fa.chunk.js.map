{"version":3,"sources":["activity.jsx"],"names":["Main","props","compileNavItems","context","loadNavigation","key","title","onClick","changeContent","Info","id","Daily","changeSelf","List","TypeList","Report","elem","setState","state","this","prevProps","Component","contextType","RimsContext","listItem","row","date","time","text","type","deleteList","window","confirm","post_call","then","result","deleted","data","filter","searchfield","act_list","length","includes","header","thead","trows","componentDidMount","searchFire","s","placeholder","mountUpdate","fun","onChange","e","target","name","value","updateInfo","op","user_id","settings","extras","label","users","map","idx","alias","type_id","types","event","JSON","stringify","update","activity_id","findIndex","obj","act_id","Object","assign","field","args","syncEvent","parseInt","Date","now","toISOString","substring","undefined","values","user","class","group","mode","TypeInfo","content","classes"],"mappings":"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","file":"static/js/10.b9ba99fa.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { post_call } from './infra/Functions.js';\nimport { RimsContext, Result, InfoArticle, InfoColumns, Spinner, ContentList, ContentData, ContentReport } from './infra/UI.jsx';\nimport { TextLine, TextAreaInput, TextInput, SelectInput, DateInput, TimeInput, SearchInput } from './infra/Inputs.jsx';\nimport { AddButton, DeleteButton, ConfigureButton, HrefButton, InfoButton, ReloadButton, SaveButton, SyncButton } from './infra/Buttons.jsx';\nimport { NavBar, NavButton, NavDropDown, NavDropButton } from './infra/Navigation.jsx';\n\n// ************** Main **************\n//\nexport class Main extends Component {\n constructor(props){\n  super(props)\n  this.state = <Daily key='activity_daily' changeSelf={this.changeContent} />\n }\n\n componentDidMount(){\n  this.compileNavItems()\n }\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props){\n   this.compileNavItems()\n  }\n }\n\n compileNavItems = () => this.context.loadNavigation(<NavBar key='activity_navbar'>\n   <NavDropDown key='act_nav' title='Activities'>\n   <NavDropButton key='act_nav_new' title='New' onClick={() => this.changeContent(<Info key='activity_info' id='new' />)} />\n   <NavDropButton key='act_nav_day' title='Daily' onClick={() => this.changeContent(<Daily key='activity_daily' changeSelf={this.changeContent} />)} />\n   <NavDropButton key='act_nav_list' title='List' onClick={() => this.changeContent(<List key='activity_list' />)} />\n   </NavDropDown>\n   <NavButton key='act_nav_types' title='Types' onClick={() => this.changeContent(<TypeList key='activity_type_list' />)} />\n   <NavButton key='act_nav_report' title='Report' onClick={() => this.changeContent(<Report key='activity_report' />)} />\n  </NavBar>)\n\n changeContent = (elem) => this.setState(elem)\n\n render(){\n  return <>{this.state}</>\n }\n\n}\nMain.contextType = RimsContext;\n\n// ************** List **************\n//\nclass List extends Component {\n constructor(props){\n  super(props)\n  this.state = {searchfield:''}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.date + ' - ' + row.time,<HrefButton key={'info_'+row.id} onClick={() => this.changeContent(<Info key='activity' id={row.id} />)} text={row.type} />,<>\n   <InfoButton key='info' onClick={() => this.changeContent(<Info key='activity_info' id={row.id} />) } title='Activity information' />\n   <DeleteButton key='del' onClick={() => this.deleteList(row.id) } title='Delete activity' />\n  </>]\n\n\n deleteList = (id) => (window.confirm('Delete activity') && post_call('api/master/activity_delete', {id:id}).then(result => {\n  if (result.deleted){\n   this.setState({data:this.state.data.filter(row => (row.id !== id))});\n   this.changeContent(null);\n  }}))\n\n render(){\n  if (this.state.data) {\n   let act_list = (this.state.searchfield.length === 0) ? this.state.data : this.state.data.filter(row => row.type.includes(this.state.searchfield));\n   return <>\n    <ContentList key='cl' header='Activities' thead={['Date','Type','']} trows={act_list} listItem={this.listItem}>\n     <ReloadButton key='reload' onClick={() => this.componentDidMount() } />\n     <AddButton key='add' onClick={() => this.changeContent(<Info key='activity_info' id='new' />) } title='Add activity' />\n     <SearchInput key='search' searchFire={(s) => this.setState({searchfield:s})} placeholder='Search activities' />\n    </ContentList>\n    <ContentData key='cda' mountUpdate={(fun) => this.changeContent = fun} />\n   </>\n  } else\n   return <Spinner />\n }\n}\n\n// *************** Info ***************\n//\nclass Info extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n updateInfo = () => {\n  post_call('api/master/activity_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n }\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props)\n   post_call('api/master/activity_info',{id:this.props.id}).then(result => {\n    if (result.data.user_id === null)\n     result.data.user_id = this.context.settings.id;\n    this.setState(result);\n   })\n }\n\n componentDidMount(){\n  post_call('api/master/activity_info',{id:this.props.id, extras:['types','users']}).then(result => {\n   if (result.data.user_id === null)\n    result.data.user_id = this.context.settings.id;\n   this.setState(result);\n  })\n }\n\n render() {\n  if (this.state.data)\n   return <InfoArticle key='ai_art' header='Activity'>\n     <InfoColumns key='ai_content'>\n      <TextLine key='ai_id' id='id' label='ID' text={this.state.data.id} />\n      <SelectInput key='ai_user_id' id='user_id' label='User' value={this.state.data.user_id} onChange={this.onChange}>{this.state.users.map((row,idx) => <option key={idx} value={row.id}>{row.alias}</option>)}</SelectInput>\n      <SelectInput key='ai_type_id' id='type_id' label='Type' value={this.state.data.type_id} onChange={this.onChange}>{this.state.types.map((row,idx) => <option key={idx} value={row.id}>{row.type}</option>)}</SelectInput>\n      <DateInput key='ai_date' id='date' value={this.state.data.date} onChange={this.onChange} />\n      <TimeInput key='ai_time' id='time' value={this.state.data.time} onChange={this.onChange} />\n     </InfoColumns>\n     <TextAreaInput key='ai_event' id='event' value={this.state.data.event} onChange={this.onChange} />\n     <SaveButton key='ai_btn_save' onClick={() => this.updateInfo()} title='Save' />\n     <Result key='ai_result' result={JSON.stringify(this.state.update)} />\n    </InfoArticle>\n  else\n   return <Spinner />\n }\n}\nInfo.contextType = RimsContext;\n\n// *************** Daily ***************\n//\nclass Daily extends Component {\n constructor(props){\n  super(props);\n  const date = new Date(Date.now());\n  this.state = {data:[], date:date.toISOString().substring(0,10), user_id:undefined, users:{}}\n }\n\n changeContent = (elem) => this.props.changeSelf(elem);\n\n componentDidMount(){\n  post_call('api/master/activity_daily',{extras:['users']}).then(result => this.setState({...result, user_id:this.context.settings.id}));\n }\n\n deleteList = (activity_id) => (window.confirm('Delete activity') && post_call('api/master/activity_delete', {id:activity_id}).then(result => {\n  if(result.deleted){\n   const idx = this.state.data.findIndex(obj => obj.act_id === activity_id);\n   const data = this.state.data[idx];\n   Object.assign(data,{user_id:null, event:null, act_id:null});\n   this.setState({data:this.state.data})\n  }\n }))\n\n onChange = (e) => {\n  const field = e.target.name;\n  const value = e.target.value;\n  const args = {date:(field === 'date') ? value : this.state.date};\n  post_call('api/master/activity_daily',args).then(result => this.setState({...result, [field]:value}));\n }\n\n syncEvent = (type_id,activity_id) =>\n  post_call('api/master/activity_info',{op:'update', id:(activity_id) ? activity_id : 'new', user_id:this.state.user_id, type_id:type_id, event:'auto', date:this.state.date}).then(result => {\n   if(result.update){\n    const idx = this.state.data.findIndex(obj => obj.id === type_id);\n    const data = this.state.data[idx];\n    Object.assign(data,{user_id:this.state.user_id, event:'auto', act_id:result.data.id});\n    this.setState({data:this.state.data})\n   }\n  })\n\n listItem = (row) => [row.type, (row.user_id) ? this.state.users[row.user_id].alias : '-', (row.event) ? row.event : '-',<>\n   {!row.user_id && <AddButton key='add' onClick={() => this.syncEvent(row.id,row.act_id)} />}\n   {row.user_id && row.user_id !== parseInt(this.state.user_id) && <SyncButton key='sync' onClick={() => this.syncEvent(row.id,row.act_id)} />}\n   {row.act_id && <InfoButton key='info' onClick={() => this.changeContent(<Info key={'activity_'+row.act_id} id={row.act_id} />)} />}\n   {row.act_id && <DeleteButton key='del' onClick={() => this.deleteList(row.act_id)} />}\n  </>]\n\n render(){\n  if (this.state.data)\n   return <ContentReport key='cr' header='Activities' thead={['Type','User','Event','']} trows={this.state.data} listItem={this.listItem}>\n    <ReloadButton key='reload' onClick={() => this.componentDidMount()} />\n    <SelectInput key='user_id' id='user_id' label='User' value={this.state.user_id} onChange={this.onChange}>{Object.values(this.state.users).map((row,idx) => <option key={idx} value={row.id}>{row.alias}</option>)}</SelectInput>\n    <DateInput key='date' id='date' value={this.state.date} onChange={this.onChange} />\n   </ContentReport>\n  else\n   return <Spinner />\n }\n}\nDaily.contextType = RimsContext;\n\n// ************** Report **************\n//\nexport class Report extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_list',{group:'month',mode:'full'}).then(result => this.setState(result))\n }\n\n listItem = (row) => [row.date + ' - ' + row.time,row.user,row.type,row.class,row.event]\n\n render(){\n  return <ContentReport key='act_cr' header='Activities' thead={['Time','User','Type','Class','Event']} trows={this.state.data} listItem={this.listItem} />\n }\n}\n\n// ************** TypeList **************\n//\nclass TypeList extends Component {\n constructor(props){\n  super(props);\n  this.state = {}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_type_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.id,row.type,row.class,<>\n   <ConfigureButton key='info' onClick={() => this.changeContent(<TypeInfo key='act_tp' id={row.id} />) } title='Edit type information' />\n   <DeleteButton key='delete' onClick={() => this.deleteList(row.id) } title='Delete type' />\n  </>]\n\n deleteList = (id) => (window.confirm('Really delete type?') && post_call('api/master/activity_type_delete', {id:id}).then(result => {\n  if (result.deleted){\n   this.setState({data:this.state.data.filter(row => (row.id !== id))});\n   this.changeContent(null);\n  }}))\n\n render(){\n  return <>\n   <ContentList key='cl' header='Activity Types' thead={['ID','Type','Class','']} trows={this.state.data} listItem={this.listItem}>\n    <ReloadButton key='reload' onClick={() => this.componentDidMount() } />\n    <AddButton key='add' onClick={() => this.changeContent(<TypeInfo key='act_tp' id='new' />) } title='Add activity type' />\n   </ContentList>\n   <ContentData key='cda' mountUpdate={(fun) => this.changeContent = fun} />\n  </>\n }\n}\n\n// *************** TypeInfo ***************\n//\nclass TypeInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, content:null};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n changeContent = (elem) => this.setState({content:elem})\n\n updateInfo = () =>  post_call('api/master/activity_type_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props)\n   post_call('api/master/activity_type_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n componentDidMount(){\n  post_call('api/master/activity_type_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n render() {\n  if (this.state.data)\n   return (\n    <InfoArticle key='ia_at' header='Activity Type'>\n     <InfoColumns key='ic'>\n      <TextLine key='id' id='id' text={this.state.data.id} />\n      <TextInput key='type' id='type' value={this.state.data.type} onChange={this.onChange} placeholder='name' />\n      <SelectInput key='class' id='class' value={this.state.data.class} onChange={this.onChange}>{this.state.classes.map(row => <option key={row} value={row}>{row}</option>)}</SelectInput>\n     </InfoColumns>\n     <SaveButton key='save' onClick={() => this.updateInfo()} title='Save' />\n    </InfoArticle>\n   )\n  else\n   return <Spinner />\n }\n}\n"],"sourceRoot":""}