{"version":3,"sources":["activity.jsx"],"names":["Main","props","compileNavItems","context","loadNavigation","key","title","onClick","changeContent","Info","id","Daily","changeSelf","List","TypeList","Report","elem","setState","state","this","prevProps","Component","contextType","RimsContext","listItem","row","date","time","text","type","deleteList","content","window","confirm","post_call","then","result","deleted","data","filter","searchfield","act_list","length","includes","header","thead","trows","componentDidMount","searchFire","s","placeholder","onChange","e","target","name","value","updateInfo","op","user_id","settings","extras","label","users","map","idx","alias","type_id","types","event","JSON","stringify","update","activity_id","findIndex","obj","act_id","Object","assign","field","args","syncEvent","parseInt","Date","now","toISOString","substring","undefined","values","user","class","group","mode","TypeInfo","classes"],"mappings":"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","file":"static/js/10.fe015625.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { post_call } from './infra/Functions.js';\nimport { RimsContext, Result, InfoArticle, InfoColumns, Spinner, ContentList, ContentData, ContentReport } from './infra/UI.jsx';\nimport { TextLine, TextAreaInput, TextInput, SelectInput, DateInput, TimeInput, SearchInput } from './infra/Inputs.jsx';\nimport { AddButton, DeleteButton, ConfigureButton, HrefButton, InfoButton, ReloadButton, SaveButton, SyncButton } from './infra/Buttons.jsx';\nimport { NavBar, NavButton, NavDropDown, NavDropButton } from './infra/Navigation.jsx';\n\n// ************** Main **************\n//\nexport class Main extends Component {\n constructor(props){\n  super(props)\n  this.state = <Daily key='activity_daily' changeSelf={this.changeContent} />\n }\n\n componentDidMount(){\n  this.compileNavItems()\n }\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props){\n   this.compileNavItems()\n  }\n }\n\n compileNavItems = () => this.context.loadNavigation(<NavBar key='activity_navbar'>\n   <NavDropDown key='act_nav' title='Activities'>\n   <NavDropButton key='act_nav_new' title='New' onClick={() => this.changeContent(<Info key='activity_info' id='new' />)} />\n   <NavDropButton key='act_nav_day' title='Daily' onClick={() => this.changeContent(<Daily key='activity_daily' changeSelf={this.changeContent} />)} />\n   <NavDropButton key='act_nav_list' title='List' onClick={() => this.changeContent(<List key='activity_list' />)} />\n   </NavDropDown>\n   <NavButton key='act_nav_types' title='Types' onClick={() => this.changeContent(<TypeList key='activity_type_list' />)} />\n   <NavButton key='act_nav_report' title='Report' onClick={() => this.changeContent(<Report key='activity_report' />)} />\n  </NavBar>)\n\n changeContent = (elem) => this.setState(elem)\n\n render(){\n  return <>{this.state}</>\n }\n\n}\nMain.contextType = RimsContext;\n\n// ************** List **************\n//\nclass List extends Component {\n constructor(props){\n  super(props)\n  this.state = {searchfield:''}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.date + ' - ' + row.time,<HrefButton key={'info_'+row.id} onClick={() => this.changeContent(<Info key='activity' id={row.id} />)} text={row.type} />,<>\n   <InfoButton key='info' onClick={() => this.changeContent(<Info key='activity_info' id={row.id} />) } title='Activity information' />\n   <DeleteButton key='del' onClick={() => this.deleteList(row.id) } title='Delete activity' />\n  </>]\n\n changeContent = (elem) => this.setState({content:elem})\n\n deleteList = (id) => (window.confirm('Delete activity') && post_call('api/master/activity_delete', {id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id)),content:null})))\n\n render(){\n  if (this.state.data) {\n   let act_list = (this.state.searchfield.length === 0) ? this.state.data : this.state.data.filter(row => row.type.includes(this.state.searchfield));\n   return <>\n    <ContentList key='cl' header='Activities' thead={['Date','Type','']} trows={act_list} listItem={this.listItem}>\n     <ReloadButton key='reload' onClick={() => this.componentDidMount() } />\n     <AddButton key='add' onClick={() => this.changeContent(<Info key='activity_info' id='new' />) } title='Add activity' />\n     <SearchInput key='search' searchFire={(s) => this.setState({searchfield:s})} placeholder='Search activities' />\n    </ContentList>\n    <ContentData key='cd'>{this.state.content}</ContentData>\n   </>\n  } else\n   return <Spinner />\n }\n}\n\n// *************** Info ***************\n//\nclass Info extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n updateInfo = () => {\n  post_call('api/master/activity_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n }\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props)\n   post_call('api/master/activity_info',{id:this.props.id}).then(result => {\n    if (result.data.user_id === null)\n     result.data.user_id = this.context.settings.id;\n    this.setState(result);\n   })\n }\n\n componentDidMount(){\n  post_call('api/master/activity_info',{id:this.props.id, extras:['types','users']}).then(result => {\n   if (result.data.user_id === null)\n    result.data.user_id = this.context.settings.id;\n   this.setState(result);\n  })\n }\n\n render() {\n  if (this.state.data)\n   return <InfoArticle key='ai_art' header='Activity'>\n     <InfoColumns key='ai_content'>\n      <TextLine key='ai_id' id='id' label='ID' text={this.state.data.id} />\n      <SelectInput key='ai_user_id' id='user_id' label='User' value={this.state.data.user_id} onChange={this.onChange}>{this.state.users.map((row,idx) => <option key={idx} value={row.id}>{row.alias}</option>)}</SelectInput>\n      <SelectInput key='ai_type_id' id='type_id' label='Type' value={this.state.data.type_id} onChange={this.onChange}>{this.state.types.map((row,idx) => <option key={idx} value={row.id}>{row.type}</option>)}</SelectInput>\n      <DateInput key='ai_date' id='date' value={this.state.data.date} onChange={this.onChange} />\n      <TimeInput key='ai_time' id='time' value={this.state.data.time} onChange={this.onChange} />\n     </InfoColumns>\n     <TextAreaInput key='ai_event' id='event' value={this.state.data.event} onChange={this.onChange} />\n     <SaveButton key='ai_btn_save' onClick={() => this.updateInfo()} title='Save' />\n     <Result key='ai_result' result={JSON.stringify(this.state.update)} />\n    </InfoArticle>\n  else\n   return <Spinner />\n }\n}\nInfo.contextType = RimsContext;\n\n// *************** Daily ***************\n//\nclass Daily extends Component {\n constructor(props){\n  super(props);\n  const date = new Date(Date.now());\n  this.state = {data:[], date:date.toISOString().substring(0,10), user_id:undefined, users:{}}\n }\n\n changeContent = (elem) => this.props.changeSelf(elem);\n\n componentDidMount(){\n  post_call('api/master/activity_daily',{extras:['users']}).then(result => this.setState({...result, user_id:this.context.settings.id}));\n }\n\n deleteList = (activity_id) => (window.confirm('Delete activity') && post_call('api/master/activity_delete', {id:activity_id}).then(result => {\n  if(result.deleted){\n   const idx = this.state.data.findIndex(obj => obj.act_id === activity_id);\n   const data = this.state.data[idx];\n   Object.assign(data,{user_id:null, event:null, act_id:null});\n   this.setState({data:this.state.data})\n  }\n }))\n\n onChange = (e) => {\n  const field = e.target.name;\n  const value = e.target.value;\n  const args = {date:(field === 'date') ? value : this.state.date};\n  post_call('api/master/activity_daily',args).then(result => this.setState({...result, [field]:value}));\n }\n\n syncEvent = (type_id,activity_id) =>\n  post_call('api/master/activity_info',{op:'update', id:(activity_id) ? activity_id : 'new', user_id:this.state.user_id, type_id:type_id, event:'auto', date:this.state.date}).then(result => {\n   if(result.update){\n    const idx = this.state.data.findIndex(obj => obj.id === type_id);\n    const data = this.state.data[idx];\n    Object.assign(data,{user_id:this.state.user_id, event:'auto', act_id:result.data.id});\n    this.setState({data:this.state.data})\n   }\n  })\n\n listItem = (row) => [row.type, (row.user_id) ? this.state.users[row.user_id].alias : '-', (row.event) ? row.event : '-',<>\n   {!row.user_id && <AddButton key='add' onClick={() => this.syncEvent(row.id,row.act_id)} />}\n   {row.user_id && row.user_id !== parseInt(this.state.user_id) && <SyncButton key='sync' onClick={() => this.syncEvent(row.id,row.act_id)} />}\n   {row.act_id && <InfoButton key='info' onClick={() => this.changeContent(<Info key={'activity_'+row.act_id} id={row.act_id} />)} />}\n   {row.act_id && <DeleteButton key='del' onClick={() => this.deleteList(row.act_id)} />}\n  </>]\n\n render(){\n  if (this.state.data)\n   return <ContentReport key='cr' header='Activities' thead={['Type','User','Event','']} trows={this.state.data} listItem={this.listItem}>\n    <ReloadButton key='reload' onClick={() => this.componentDidMount()} />\n    <SelectInput key='user_id' id='user_id' label='User' value={this.state.user_id} onChange={this.onChange}>{Object.values(this.state.users).map((row,idx) => <option key={idx} value={row.id}>{row.alias}</option>)}</SelectInput>\n    <DateInput key='date' id='date' value={this.state.date} onChange={this.onChange} />\n   </ContentReport>\n  else\n   return <Spinner />\n }\n}\nDaily.contextType = RimsContext;\n\n// ************** Report **************\n//\nexport class Report extends Component {\n constructor(props){\n  super(props)\n  this.state = {}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_list',{group:'month',mode:'full'}).then(result => this.setState(result))\n }\n\n listItem = (row) => [row.date + ' - ' + row.time,row.user,row.type,row.class,row.event]\n\n render(){\n  return <ContentReport key='act_cr' header='Activities' thead={['Time','User','Type','Class','Event']} trows={this.state.data} listItem={this.listItem} />\n }\n}\n\n// ************** TypeList **************\n//\nclass TypeList extends Component {\n constructor(props){\n  super(props);\n  this.state = {}\n }\n\n componentDidMount(){\n  post_call('api/master/activity_type_list').then(result => this.setState(result))\n }\n\n listItem = (row) => [row.id,row.type,row.class,<>\n   <ConfigureButton key='info' onClick={() => this.changeContent(<TypeInfo key='act_tp' id={row.id} />) } title='Edit type information' />\n   <DeleteButton key='delete' onClick={() => this.deleteList(row.id) } title='Delete type' />\n  </>]\n\n changeContent = (elem) => this.setState({content:elem})\n deleteList = (id) => (window.confirm('Really delete type?') && post_call('api/master/activity_type_delete', {id:id}).then(result => result.deleted && this.setState({data:this.state.data.filter(row => (row.id !== id)),content:null})))\n\n render(){\n  return <>\n   <ContentList key='cl' header='Activity Types' thead={['ID','Type','Class','']} trows={this.state.data} listItem={this.listItem}>\n    <ReloadButton key='reload' onClick={() => this.componentDidMount() } />\n    <AddButton key='add' onClick={() => this.changeContent(<TypeInfo key='act_tp' id='new' />) } title='Add activity type' />\n   </ContentList>\n   <ContentData key='cd'>{this.state.content}</ContentData>\n  </>\n }\n}\n\n// *************** TypeInfo ***************\n//\nclass TypeInfo extends Component {\n constructor(props){\n  super(props);\n  this.state = {data:null, content:null};\n }\n\n onChange = (e) => this.setState({data:{...this.state.data, [e.target.name]:e.target.value}});\n\n changeContent = (elem) => this.setState({content:elem})\n\n updateInfo = () =>  post_call('api/master/activity_type_info',{op:'update', ...this.state.data}).then(result => this.setState(result))\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props)\n   post_call('api/master/activity_type_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n componentDidMount(){\n  post_call('api/master/activity_type_info',{id:this.props.id}).then(result => this.setState(result))\n }\n\n render() {\n  if (this.state.data)\n   return (\n    <InfoArticle key='ia_at' header='Activity Type'>\n     <InfoColumns key='ic'>\n      <TextLine key='id' id='id' text={this.state.data.id} />\n      <TextInput key='type' id='type' value={this.state.data.type} onChange={this.onChange} placeholder='name' />\n      <SelectInput key='class' id='class' value={this.state.data.class} onChange={this.onChange}>{this.state.classes.map(row => <option key={row} value={row}>{row}</option>)}</SelectInput>\n     </InfoColumns>\n     <SaveButton key='save' onClick={() => this.updateInfo()} title='Save' />\n    </InfoArticle>\n   )\n  else\n   return <Spinner />\n }\n}\n"],"sourceRoot":""}