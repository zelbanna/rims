"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[297],{297:function(t,e,n){n.r(e),n.d(e,{Inventory:function(){return j},Manage:function(){return _}});var i=n(942),s=n(413),o=n(671),a=n(144),r=n(340),u=n(882),p=n(791),c=n(252),d=n(885),l=n(698),h=n(682),v=n(355),f=n(184),_=function(t){(0,r.Z)(n,t);var e=(0,u.Z)(n);function n(){var t;(0,o.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).changeContent=function(e){return t.setState(e)},t}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,c.Fh)("api/device/hostname",{id:this.props.device_id}).then((function(e){t.context.loadNavigation((0,f.jsxs)(v.NavBar,{children:[(0,f.jsx)(v.NavInfo,{title:e.data},"pdu_nav_name"),(0,f.jsx)(v.NavButton,{title:"Inventory",onClick:function(){return t.changeContent((0,f.jsx)(j,{device_id:t.props.device_id,type:t.props.type},"pdu_inventory"))}},"pdu_nav_inv"),(0,f.jsx)(v.NavButton,{title:"Info",onClick:function(){return t.changeContent((0,f.jsx)(x,{device_id:t.props.device_id,type:t.props.type},"pdu_info"))}},"pdu_nav_info")]},"pdu_navbar"))})),this.setState((0,f.jsx)(j,{device_id:this.props.device_id,type:this.props.type},"pdu_inventory"))}},{key:"render",value:function(){return(0,f.jsx)(f.Fragment,{children:this.state})}}]),n}(p.Component);_.contextType=d.RimsContext;var x=function(t){(0,r.Z)(n,t);var e=(0,u.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).lookupSlots=function(){return(0,c.Fh)("api/devices/"+i.props.type+"/info",{device_id:i.props.device_id,op:"lookup"}).then((function(t){return i.setState(t)}))},i.state={},i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,c.Fh)("api/devices/"+this.props.type+"/info",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){for(var e=[],n=0;n<this.state.data.slots;n++)e.push((0,f.jsx)(l.TextLine,{id:"pi_slot_name_"+n,label:"Slot "+n+" Name",text:this.state.data[n+"_slot_name"]},"pi_sn_"+n)),e.push((0,f.jsx)(l.TextLine,{id:"pi_slot_id_"+n,label:"Slot "+n+" ID",text:this.state.data[n+"_slot_id"]},"pi_si_"+n));return(0,f.jsx)(d.Flex,{style:{justifyContent:"space-evenly"},children:(0,f.jsxs)(d.InfoArticle,{header:"PDU Device Info - "+this.props.type,children:[(0,f.jsxs)(d.InfoColumns,{children:[(0,f.jsx)(l.TextLine,{id:"slots",label:"Right/Left slots",text:JSON.stringify(2===this.state.data.slots)},"pi_slots"),e]},"pi_info"),(0,f.jsx)(h.ReloadButton,{onClick:function(){return t.componentDidMount()}},"pi_btn_reload"),(0,f.jsx)(h.SearchButton,{onClick:function(){return t.lookupSlots()}},"pi_btn_search")]},"pi_article")},"pi_flex")}return(0,f.jsx)(d.Spinner,{})}}]),n}(p.Component),j=function(t){(0,r.Z)(n,t);var e=(0,u.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).listItem=function(t,e){return["".concat(t.slotname,".").concat(t.unit),(0,f.jsx)(h.HrefButton,{onClick:function(){return i.changeContent((0,f.jsx)(m,(0,s.Z)({device_id:i.props.device_id,type:i.props.type},t),"pdu_unit_"+e))},text:t.name,title:"Edit port info"},"inv_"+e),(0,f.jsx)(y,(0,s.Z)({idx:e,device_id:i.props.device_id,type:i.props.type},t),"state_"+e)]},i.state={},i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,c.Fh)("api/devices/"+this.props.type+"/inventory",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.ContentList,{header:"Inventory",thead:["Position","Device","State"],trows:this.state.data,listItem:this.listItem,children:(0,f.jsx)(h.ReloadButton,{onClick:function(){t.setState({data:void 0}),t.componentDidMount()}},"reload")},"cl"),(0,f.jsx)(d.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]}):(0,f.jsx)(d.Spinner,{})}}]),n}(p.Component),y=function(t){(0,r.Z)(n,t);var e=(0,u.Z)(n);function n(t){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).operation=function(t){i.setState({wait:(0,f.jsx)(d.Spinner,{})}),(0,c.Fh)("api/devices/"+i.props.type+"/op",{device_id:i.props.device_id,slot:i.props.slot,unit:i.props.unit,state:t}).then((function(t){return i.setState((0,s.Z)((0,s.Z)({},t),{},{wait:null}))}))},i.state={state:i.props.state,status:"",wait:null},i}return(0,a.Z)(n,[{key:"render",value:function(){var t=this,e="off"===this.state.state;return(0,f.jsxs)(f.Fragment,{children:[e&&(0,f.jsx)(h.StartButton,{onClick:function(){return t.operation("on")},title:this.state.status},"start"),!e&&(0,f.jsx)(h.StopButton,{onClick:function(){return t.operation("off")},title:this.state.status},"stop"),!e&&(0,f.jsx)(h.ReloadButton,{onClick:function(){return t.operation("reboot")},title:this.state.status},"reload"),this.state.wait]})}}]),n}(p.Component),m=function(t){(0,r.Z)(n,t);var e=(0,u.Z)(n);function n(t){var a;return(0,o.Z)(this,n),(a=e.call(this,t)).onChange=function(t){return a.setState((0,i.Z)({},t.target.name,t.target.value))},a.updatePDU=function(){a.setState({wait:(0,f.jsx)(d.Spinner,{}),info:void 0}),(0,c.Fh)("api/devices/"+a.props.type+"/update",{op:"update",device_id:a.props.device_id,slot:a.props.slot,unit:a.props.unit,text:a.state.text}).then((function(t){return a.setState((0,s.Z)((0,s.Z)({},t),{},{wait:null}))}))},a.state={text:a.props.name,wait:null},a}return(0,a.Z)(n,[{key:"render",value:function(){var t=this,e="";return this.state.status&&(e="OK"===this.state.status?"OK":this.state.info),(0,f.jsxs)(d.InfoArticle,{children:[(0,f.jsxs)(d.InfoColumns,{children:[(0,f.jsx)(l.TextLine,{id:"su",label:"Slot.Unit",text:"".concat(this.props.slotname,".").concat(this.props.unit)},"pu_slot_unit"),(0,f.jsx)(l.TextInput,{id:"text",value:this.state.text,onChange:this.onChange},"pu_slot_text")]},"pu_info"),(0,f.jsx)(d.Result,{result:e},"pu_result"),(0,f.jsx)(h.SaveButton,{onClick:function(){return t.updatePDU()},title:"Update pdu"},"pu_btn_save"),this.state.wait]},"pu_article")}}]),n}(p.Component)}}]);
//# sourceMappingURL=297.4c4003ca.chunk.js.map