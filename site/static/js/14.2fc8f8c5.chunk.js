(this.webpackJsonprims=this.webpackJsonprims||[]).push([[14],{40:function(t,e,n){"use strict";n.r(e),n.d(e,"Search",(function(){return p})),n.d(e,"Device",(function(){return b})),n.d(e,"List",(function(){return O}));var i=n(10),c=n(19),a=n(5),r=n(6),s=n(8),o=n(7),u=n(3),h=n(14),d=n(15),l=n(16),f=n(21),j=n(0),p=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).changeContent=function(t){return i.props.changeSelf(t)},i.onChange=function(t){return i.setState(Object(c.a)({},t.target.name,t.target.value))},i.state={field:"mac",search:""},i}return Object(r.a)(n,[{key:"render",value:function(){var t=this;return Object(j.jsxs)(d.LineArticle,{header:"FDB Search",children:[Object(j.jsxs)(l.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[Object(j.jsx)("option",{value:"mac",children:"MAC"}),Object(j.jsx)("option",{value:"device_id",children:"Device ID"})]},"field"),Object(j.jsx)(l.TextInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),Object(j.jsx)(f.SearchButton,{onClick:function(){return t.changeContent(Object(j.jsx)(O,Object(i.a)(Object(i.a)({},t.state),{},{changeSelf:t.props.changeSelf}),"fdb_list"))},title:"Search FDB"},"fs_btn_search")]},"fs_art")}}]),n}(u.Component),b=function(t){Object(s.a)(c,t);var e=Object(o.a)(c);function c(t){var i;return Object(a.a)(this,c),(i=e.call(this,t)).changeContent=function(t){return i.props.changeSelf(t)},i.changeInterface=function(t){return n.e(1).then(n.bind(null,37)).then((function(e){return i.changeContent(Object(j.jsx)(e.Info,{device_id:i.props.id,interface_id:t,changeSelf:i.changeContent},"interface_info"))}))},i.listItem=function(t,e){return[t.vlan,t.snmp_index,Object(j.jsx)(f.HrefButton,{text:t.name,onClick:function(){return i.changeInterface(t.interface_id)}},"fd_intf_"+t.interface_id),t.mac,t.oui]},i.state={wait:null,searchfield:""},i}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var t=this;Object(h.d)("api/fdb/list",{field:"device_id",search:this.props.id,extra:["oui"]}).then((function(e){return t.setState(e)}))}},{key:"syncFDB",value:function(){var t=this;this.setState({wait:Object(j.jsx)(d.Spinner,{})}),Object(h.d)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(e){return"OK"===e.status&&Object(h.d)("api/fdb/list",{field:"device_id",search:t.props.id,extra:["oui"]}).then((function(e){return t.setState(Object(i.a)(Object(i.a)({},e),{},{wait:null}))}))}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return Object(j.jsxs)(d.ContentReport,{header:"FDB",thead:["VLAN","SNMP","Interface","MAC","OUI"],trows:n,listItem:this.listItem,children:[Object(j.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"fd_btn_reload"),Object(j.jsx)(f.SyncButton,{onClick:function(){return t.syncFDB()},title:"Resync FDB"},"fd_btn_sync"),Object(j.jsx)(l.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC"},"fd_search"),this.state.wait]},"fd_cr")}return Object(j.jsx)(d.Spinner,{})}}]),c}(u.Component),O=function(t){Object(s.a)(i,t);var e=Object(o.a)(i);function i(t){var c;return Object(a.a)(this,i),(c=e.call(this,t)).changeSearch=function(t,e){return c.changeContent(Object(j.jsx)(v,{mac:t},"fdb_info"))},c.changeVisualize=function(t){return"changeSelf"in c.props&&n.e(4).then(n.bind(null,39)).then((function(e){return c.changeContent(Object(j.jsx)(e.Edit,{type:"device",id:t},"viz_id_"+t))}))},c.listItem=function(t,e){return[t.device_id,t.hostname,t.vlan,t.snmp_index,t.name,Object(j.jsx)(f.HrefButton,{text:t.mac,onClick:function(){return c.setState({searchfield:t.mac})}},"intf_"+e),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f.InfoButton,{onClick:function(){return c.changeSearch(t.mac,e)},title:"Find interface(s)"},"info"),Object(j.jsx)(f.NetworkButton,{onClick:function(){return c.changeVisualize(t.device_id)}},"map")]})]},c.state={searchfield:""},c}return Object(r.a)(i,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;Object(h.d)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(d.ContentList,{header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC",""],trows:n,listItem:this.listItem,children:[Object(j.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(j.jsx)(l.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC",text:this.state.searchfield},"search")]},"cl"),Object(j.jsx)(d.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return Object(j.jsx)(d.Spinner,{})}}]),i}(u.Component),v=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).state={},i}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;Object(h.d)("api/fdb/search",{mac:this.props.mac}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.device?Object(j.jsx)(d.ContentReport,{header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Interface","Description","OUI"],trows:this.state.interfaces,listItem:function(t){return[t.interface_id,t.name,t.description,t.oui]}},"fd_cr"):this.state.oui?Object(j.jsxs)(d.LineArticle,{header:"Search result",children:["OUI: ",this.state.oui]},"fd_oui_la"):this.state.status?Object(j.jsxs)(d.LineArticle,{header:"Search result",children:["Search result: ",this.state.info]},"fd_oui_la"):Object(j.jsx)(d.Spinner,{})}}]),n}(u.Component)}}]);
//# sourceMappingURL=14.2fc8f8c5.chunk.js.map