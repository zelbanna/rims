(this.webpackJsonprims=this.webpackJsonprims||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return v})),n.d(t,"Info",(function(){return g})),n.d(t,"Logs",(function(){return w})),n.d(t,"New",(function(){return x})),n.d(t,"Report",(function(){return N})),n.d(t,"ModelInfo",(function(){return T}));var a=n(18),i=n(15),o=n(4),r=n(5),c=n(6),s=n(7),l=n(0),d=n.n(l),u=n(12),m=n(13),h=n(16),p=n(14),_=n(19),f=n(41),v=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).compileNavItems=function(){n.context.loadNavigation(d.a.createElement(h.NavBar,{key:"device_navbar"},d.a.createElement(h.NavDropDown,{key:"dev_nav_devs",title:"Devices"},d.a.createElement(h.NavDropButton,{key:"dev_nav_list",title:"List",onClick:function(){return n.changeContent(d.a.createElement(y,{key:"dl",rack_id:n.state.rack_id}))}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_new",title:"New",onClick:function(){return n.changeContent(d.a.createElement(x,{key:"device_new",ip:"0.0.0.0"}))}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_srch",title:"Search",onClick:function(){return n.changeContent(d.a.createElement(k,{key:"ds",changeSelf:n.changeContent}))}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_types",title:"Types",onClick:function(){return n.changeContent(d.a.createElement(M,{key:"dtl",changeSelf:n.changeContent}))}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_model",title:"Models",onClick:function(){return n.changeContent(d.a.createElement(L,{key:"dml"}))}})),d.a.createElement(h.NavButton,{key:"dev_nav_maps",title:"Maps",onClick:function(){return n.changeContent(d.a.createElement(f.List,{key:"visualize_list"}))}}),n.state.pdu.length>0&&d.a.createElement(h.NavDropDown,{key:"dev_nav_pdus",title:"PDUs"},n.state.pdu.map((function(e,t){return d.a.createElement(h.NavDropButton,{key:"dev_nav_pdu_"+t,title:e.hostname,onClick:function(){return n.changeImport("pdu","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.console.length>0&&d.a.createElement(h.NavDropDown,{key:"dev_nav_consoles",title:"Consoles"},n.state.console.map((function(e,t){return d.a.createElement(h.NavDropButton,{key:"dev_nav_console_"+t,title:e.hostname,onClick:function(){return n.changeImport("console","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.rack_id&&d.a.createElement(h.NavButton,{key:"dev_nav_rack",title:n.state.name,onClick:function(){return n.changeImport("rack","Layout",{id:n.state.rack_id})}}),d.a.createElement(h.NavDropDown,{key:"dev_nav_oui",title:"OUI"},d.a.createElement(h.NavDropButton,{key:"dev_nav_ouis",title:"Search",onClick:function(){return n.changeContent(d.a.createElement(z,{key:"oui_search"}))}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_ouil",title:"List",onClick:function(){return n.changeContent(d.a.createElement(P,{key:"oui_list"}))}})),d.a.createElement(h.NavButton,{key:"dev_nav_resv",title:"Reservations",onClick:function(){return n.changeImport("reservation","List",{})},style:{float:"right"}}),d.a.createElement(h.NavDropDown,{key:"dev_nav_ipam",title:"IPAM",style:{float:"right"}},d.a.createElement(h.NavDropButton,{key:"dev_nav_nets",title:"Networks",onClick:function(){return n.changeImport("ipam","NetworkList",{})}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_isrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DHCP"})}})),d.a.createElement(h.NavDropDown,{key:"dev_nav_dns",title:"DNS",style:{float:"right"}},d.a.createElement(h.NavDropButton,{key:"dev_nav_doms",title:"Domains",onClick:function(){return n.changeImport("dns","DomainList",{})}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_dsrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DNS"})}}),d.a.createElement(h.NavDropButton,{key:"dev_nav_recs",title:"Recursors",onClick:function(){return n.changeImport("server","List",{type:"RECURSOR"})}})),d.a.createElement(h.NavReload,{key:"dev_nav_reload",onClick:function(){return n.changeContent(null)}})))},n.changeContent=function(e){return n.setState({content:e})},n.state={pdu:[],console:[],name:"N/A",rack_id:void 0},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.rack_id?Object(u.c)("api/rack/inventory",{id:this.props.rack_id}).then((function(t){Object.assign(e.state,Object(i.a)({rack_id:e.props.rack_id},t)),e.compileNavItems()})):this.compileNavItems()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(e,t,a){var i=this;n(25)("./"+e+".jsx").then((function(n){var o=n[t];i.setState({content:d.a.createElement(o,Object.assign({key:e+"_"+t},a))})}))}},{key:"render",value:function(){return d.a.createElement(l.Fragment,{key:"main_base"},this.state.content)}}]),a}(l.Component);v.contextType=m.RimsContext;var k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).changeContent=function(e){return i.props.changeSelf(e)},i.onChange=function(e){return i.setState(Object(a.a)({},e.target.name,e.target.value))},i.state={field:"ip",search:""},i}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return d.a.createElement(m.LineArticle,{key:"d_srch_art",header:"Device Search"},d.a.createElement(p.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},d.a.createElement("optgroup",{label:"Group"},d.a.createElement("option",{value:"hostname"},"Hostname"),d.a.createElement("option",{value:"type"},"Type")),d.a.createElement("optgroup",{label:"Unique"},d.a.createElement("option",{value:"id"},"ID"),d.a.createElement("option",{value:"ip"},"IP"),d.a.createElement("option",{value:"mac"},"MAC"),d.a.createElement("option",{value:"ipam_id"},"IPAM ID"))),d.a.createElement(p.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),d.a.createElement(_.SearchButton,{key:"ds_btn_search",onClick:function(){return e.changeContent(d.a.createElement(y,Object.assign({key:"device_list"},e.state)))},title:"Search devices"}))}}]),n}(l.Component),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.setState({content:e})},a.searchHandler=function(e){a.setState({searchfield:e.target.value})},a.sortList=function(e){"hostname"===e?a.state.data.sort((function(e,t){return e.hostname.localeCompare(t.hostname)})):a.state.data.sort((function(e,t){return e.ip&&t.ip?Number(e.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join(""))-Number(t.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join("")):e.ip?1:e.hostname.localeCompare(t.hostname)})),a.setState({sort:e})},a.listItem=function(e){return[e.ip,d.a.createElement(_.HrefButton,{key:"dl_btn_info_"+e.id,text:e.hostname,onClick:function(){return a.changeContent(d.a.createElement(g,{key:"di_"+e.id,id:e.id,changeSelf:a.changeContent}))},title:e.id}),d.a.createElement(m.StateLeds,{key:"dl_state_"+e.id,state:e.ip_state?e.ip_state:e.if_state}),d.a.createElement(l.Fragment,{key:"dl_buttons_"+e.id},d.a.createElement(_.InfoButton,{key:"dl_btn_info_"+e.id,onClick:function(){return a.changeContent(d.a.createElement(g,{key:"di_"+e.id,id:e.id,changeSelf:a.changeContent}))},title:e.id}),d.a.createElement(_.DeleteButton,{key:"dl_btn_del_"+e.id,onClick:function(){return a.deleteList(e.id)},title:"Delete device"}))]},a.deleteList=function(e){return window.confirm("Really delete device "+e+"?")&&Object(u.c)("api/device/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.state={data:null,content:null,sort:e.hasOwnProperty("sort")?e.sort:"hostname",rack_id:a.props.rack_id,searchfield:"",field:a.props.field,search:a.props.search},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/list",{sort:this.state.sort,rack_id:this.state.rack_id,field:this.state.field,search:this.state.search}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data.filter((function(t){return t.hostname.includes(e.state.searchfield)||t.ip&&t.ip.includes(e.state.searchfield)})),n=[d.a.createElement(_.HeaderButton,{key:"dl_btn_ip",text:"IP",highlight:"ip"===this.state.sort,onClick:function(){return e.sortList("ip")}}),d.a.createElement(_.HeaderButton,{key:"dl_btn_hostname",text:"Hostname",highlight:"hostname"===this.state.sort,onClick:function(){return e.sortList("hostname")}}),"",""];return d.a.createElement(l.Fragment,{key:"dl_fragment"},d.a.createElement(m.ContentList,{key:"dl_list",header:"Device List",thead:n,listItem:this.listItem,trows:t},d.a.createElement(_.ReloadButton,{key:"dl_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(_.ItemsButton,{key:"dl_btn_items",onClick:function(){Object.assign(e.state,{rack_id:void 0,field:void 0,search:void 0}),e.componentDidMount()},title:"List all items"}),d.a.createElement(_.AddButton,{key:"dl_btn_add",onClick:function(){return e.changeContent(d.a.createElement(x,{key:"dn_new_"+Object(u.d)(),ip:"0.0.0.0"}))},title:"Add device"}),d.a.createElement(_.SearchButton,{key:"dl_btn_devices",onClick:function(){return e.changeContent(d.a.createElement(B,{key:"dd"}))},title:"Discover new devices"}),d.a.createElement(p.SearchInput,{key:"dl_search",searchHandler:this.searchHandler,value:this.state.searchfield,placeholder:"Search devices"})),d.a.createElement(m.ContentData,{key:"dl_content"},this.state.content))}return d.a.createElement(m.Spinner,null)}}]),n}(l.Component),g=function(e){Object(s.a)(v,e);var t=Object(c.a)(v);function v(e){var r;return Object(o.a)(this,v),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.changeContent=function(e){return r.setState({content:e})},r.changeSelf=function(e){return r.props.changeSelf(e)},r.updateInfo=function(){return Object(u.c)("api/device/info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.reload=function(){r.setState({rack:void 0,vm:void 0}),Object(u.c)("api/device/info",{id:r.props.id}).then((function(e){return r.setState(e)}))},r.lookupInfo=function(){r.setState({content:d.a.createElement(m.Spinner,null),result:""}),Object(u.c)("api/device/info",{id:r.props.id,op:"lookup"}).then((function(e){return r.setState(Object(i.a)({},e,{content:null}))}))},r.changeInterfaces=function(){return n.e(1).then(n.bind(null,40)).then((function(e){return r.changeContent(d.a.createElement(e.List,{key:"interface_list",device_id:r.props.id,changeSelf:r.changeContent}))}))},r.state={data:void 0,found:!0,content:null,navconf:!1},r}return Object(r.a)(v,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/info",{id:this.props.id,extra:["types","classes"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data,n=this.state.extra,a=!("vm"!==t.class||!this.state.vm)&&this.state.vm,i=!(!this.state.rack||"vm"===t.class)&&this.state.rack,o=this.props.changeSelf,r=n.interface_ip,c=n.functions.length>0?n.functions.split(","):[];return d.a.createElement(l.Fragment,{key:"di_fragment"},d.a.createElement(m.InfoArticle,{key:"di_art",header:"Device"},d.a.createElement(m.InfoColumns,{key:"di_info",style:{float:"left"}},d.a.createElement(p.TextLine,{key:"hostname",id:"hostname",text:t.hostname}),d.a.createElement(p.TextInput,{key:"mac",id:"mac",label:"Sys Mac",value:t.mac,title:"System MAC",onChange:this.onChange}),t.management_id&&d.a.createElement(p.TextLine,{key:"if_mac",id:"if_mac",label:"Mgmt MAC",text:n.interface_mac,title:"Management Interface MAC"}),t.management_id&&d.a.createElement(p.TextLine,{key:"if_ip",id:"if_ip",label:"Mgmt IP",text:n.interface_ip}),d.a.createElement(p.TextLine,{key:"snmp",id:"snmp",label:"SNMP",text:t.snmp}),t.management_id&&d.a.createElement(p.StateLine,{key:"state",id:"state",state:[n.if_state,n.ip_state]})),d.a.createElement(m.InfoColumns,{key:"di_extra",style:{float:"left"}},d.a.createElement(p.TextLine,{key:"id",id:"id",text:this.props.id}),d.a.createElement(p.SelectInput,{key:"class",id:"class",value:t.class,onChange:this.onChange},this.state.classes.map((function(e){return d.a.createElement("option",{key:"di_class_"+e,value:e},e)}))),d.a.createElement(p.SelectInput,{key:"type_id",id:"type_id",label:"Type",value:t.type_id,onChange:this.onChange},this.state.types.map((function(e,t){return d.a.createElement("option",{key:"di_type_"+t,value:e.id},e.name)}))),d.a.createElement(p.TextInput,{key:"model",id:"model",value:t.model,onChange:this.onChange,extra:t.model}),d.a.createElement(p.TextLine,{key:"version",id:"version",text:t.version,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"serial",id:"serial",label:"S/N",value:t.serial,onChange:this.onChange})),d.a.createElement(m.InfoColumns,{key:"di_rack",style:{float:"left"}},i&&d.a.createElement(p.TextLine,{key:"rack_pos",id:"rack_pos",label:"Rack/Pos",text:"".concat(i.rack_name," (").concat(i.rack_unit,")")}),i&&d.a.createElement(p.TextLine,{key:"rack_size",id:"rack_size",label:"Size (U)",text:i.rack_size}),i&&d.a.createElement(p.TextLine,{key:"rack_con",id:"rack_con",label:"TS/Port",text:"".concat(i.console_name," (").concat(i.console_port,")")}),i&&this.state.pems.map((function(e){return d.a.createElement(p.TextLine,{key:"pem_"+e.id,id:"pem_"+e.id,label:e.name+" PDU",text:"".concat(e.pdu_name," (").concat(e.pdu_unit,")")})}))),d.a.createElement(m.InfoColumns,{key:"di_vm",style:{float:"left"}},a&&d.a.createElement(p.TextLine,{key:"vm_name",id:"vm_name",label:"VM Name",text:a.name}),a&&d.a.createElement(p.TextLine,{key:"vm_host",id:"vm_host",label:"VM Host",text:a.host}),a&&d.a.createElement(p.TextLine,{key:"vm_uuid",id:"vm_uuid",label:"VM UUID",text:a.device_uuid,style:{maxWidth:170},extra:a.device_uuid}),a&&d.a.createElement(p.TextLine,{key:"vm_uuhost",id:"vm_uuhost",label:"Host UUID",text:a.server_uuid,style:{maxWidth:170},extra:a.server_uuid})),d.a.createElement(m.InfoColumns,{key:"di_text",style:{clear:"both"}},d.a.createElement(p.TextInput,{key:"comment",id:"comment",value:t.comment,onChange:this.onChange}),d.a.createElement(p.UrlInput,{key:"url",id:"url",label:"URL",value:t.url,onChange:this.onChange})),d.a.createElement(_.ReloadButton,{key:"di_btn_reload",onClick:function(){return e.reload()}}),d.a.createElement(_.SaveButton,{key:"di_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),d.a.createElement(_.ConfigureButton,{key:"di_btn_edit",onClick:function(){return e.setState({navconf:!e.state.navconf})},title:"Toggle config mode"}),d.a.createElement(_.StartButton,{key:"di_btn_cont",onClick:function(){return e.changeContent(d.a.createElement(I,{key:"device_control",id:e.props.id}))},title:"Device control"}),d.a.createElement(_.CheckButton,{key:"di_btn_conf",onClick:function(){return e.changeContent(d.a.createElement(D,{key:"device_configure",id:e.props.id}))},title:"Configuration template"}),o&&d.a.createElement(_.NetworkButton,{key:"di_btn_netw",onClick:function(){return e.changeSelf(d.a.createElement(f.Edit,{key:"ve_"+e.props.id,type:"device",id:e.props.id,changeSelf:e.props.changeSelf}))},title:"Connectivity map"}),r&&d.a.createElement(_.SearchButton,{key:"di_btn_srch",onClick:function(){return e.lookupInfo()},title:"Information lookup"}),r&&d.a.createElement(_.LogButton,{key:"di_btn_logs",onClick:function(){return e.changeContent(d.a.createElement(w,{key:"device_logs",id:e.props.id}))},title:"Logs"}),c.includes("manage")&&d.a.createElement(_.GoButton,{key:"d_btn_manage",onClick:function(){return e.context.changeMain({module:e.state.extra.type_base,function:"Manage",args:{device_id:e.props.id,type:e.state.extra.type_name}})},title:"Manage "+t.hostname}),r&&d.a.createElement(_.TermButton,{key:"di_btn_ssh",onClick:function(){return window.open("ssh://".concat(n.username,"@").concat(n.interface_ip),"_self")},title:"SSH connection"}),i&&i.console_url&&d.a.createElement(_.TermButton,{key:"di_btn_console",onClick:function(){return window.open(i.console_url,"_self")},title:"Serial Connection"}),t.url&&d.a.createElement(_.UiButton,{key:"di_btn_ui",onClick:function(){return window.open(t.url,"_blank")},title:"Web UI"}),d.a.createElement(m.Result,{key:"dev_result",result:JSON.stringify(this.state.update)})),d.a.createElement(h.NavBar,{key:"di_navigation",id:"di_navigation"},this.state.navconf&&d.a.createElement(h.NavButton,{key:"di_nav_management",title:"Management",onClick:function(){return e.changeContent(d.a.createElement(b,{key:"device_configure",id:e.props.id}))}}),this.state.navconf&&d.a.createElement(h.NavButton,{key:"di_nav_interfaces",title:"Interfaces",onClick:function(){return e.changeInterfaces()}}),this.state.navconf&&["infrastructure","out-of-band"].includes(t.class)&&d.a.createElement(h.NavButton,{key:"di_nav_rack",title:"Rack",onClick:function(){return e.changeContent(d.a.createElement(E,{key:"device_rack_info",device_id:e.props.id}))}}),this.state.navconf&&["device","infrastructure","out-of-band"].includes(t.class)&&d.a.createElement(h.NavButton,{key:"di_nav_pems",title:"PEMs",onClick:function(){return e.changeContent(d.a.createElement(C,{key:"device_pem_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),this.state.navconf&&d.a.createElement(h.NavButton,{key:"di_nav_stats",title:"Statistics",onClick:function(){return e.changeContent(d.a.createElement(O,{key:"device_statistics_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),!this.state.navconf&&c.filter((function(e){return"manage"!==e})).map((function(t,n){return d.a.createElement(h.NavButton,{key:"di_nav_"+n,title:t.replace("_"," "),onClick:function(){return e.changeContent(d.a.createElement(R,{key:"dev_func_"+t,id:e.props.id,op:t,type:e.state.extra.type_name}))}})}))),this.state.content)}return d.a.createElement(m.Spinner,null)}}]),v}(l.Component);g.contextType=m.RimsContext;var b=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.changeContent=function(e){return r.setState({content:e})},r.updateInfo=function(){return Object(u.c)("api/device/extended",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.state={data:void 0,found:!0,content:null},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/extended",{id:this.props.id,extra:["domains"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data&&this.state.domains?d.a.createElement(m.InfoArticle,{key:"d_conf_art",header:"Management Configuration"},d.a.createElement(m.InfoColumns,{key:"d_conf_ic"},d.a.createElement(p.TextInput,{key:"d_conf_hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"d_conf_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"de_dom_"+t,value:e.id},e.name)}))),d.a.createElement(p.SelectInput,{key:"d_conf_management_id",id:"management_id",label:"Mgmt Interface",value:this.state.data.management_id,onChange:this.onChange},this.state.interfaces.map((function(e,t){return d.a.createElement("option",{key:"de_intf_"+t,value:e.interface_id},"".concat(e.name," (").concat(e.ip,")"))}))),d.a.createElement(p.TextLine,{key:"d_conf_oid",id:"oid",label:"Priv OID",text:this.state.extra.oid}),d.a.createElement(p.TextLine,{key:"d_conf_oui",id:"oui",label:"System OUI",text:this.state.extra.oui})),d.a.createElement(_.SaveButton,{key:"d_conf_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),d.a.createElement(m.Result,{key:"d_conf_result",result:this.state.status})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),E=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.updateInfo=function(){return Object(u.c)("api/device/rack",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.state={},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/rack",{device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data.rack_id&&"NULL"!==this.state.data.rack_id;return d.a.createElement(m.InfoArticle,{key:"d_rack_art",header:"Rack"},d.a.createElement(m.InfoColumns,{key:"d_rack_ic"},d.a.createElement(p.SelectInput,{key:"d_rack_id",id:"rack_id",label:"Rack ID",value:this.state.data.rack_id,onChange:this.onChange},this.state.racks.map((function(e,t){return d.a.createElement("option",{key:"d_rack_id_"+t,value:e.id},e.name)}))),t&&d.a.createElement(p.TextInput,{key:"d_rack_size",id:"rack_size",label:"Size",value:this.state.data.rack_size,onChange:this.onChange,title:"Size of device in U"}),t&&d.a.createElement(p.TextInput,{key:"d_rack_unit",id:"rack_unit",label:"Unit",value:this.state.data.rack_unit,onChange:this.onChange,title:"First unit of placement"}),t&&d.a.createElement(p.SelectInput,{key:"d_rack_con_id",id:"console_id",label:"Console",value:this.state.data.console_id,onChange:this.onChange},this.state.consoles.map((function(e,t){return d.a.createElement("option",{key:"d_rack_con_id_"+t,value:e.id},e.hostname)}))),t&&d.a.createElement(p.TextInput,{key:"d_rack_con_port",id:"console_port",label:"Console Port",value:this.state.data.console_port,onChange:this.onChange})),d.a.createElement(_.SaveButton,{key:"d_rack_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}))}return d.a.createElement(m.Spinner,null)}}]),n}(l.Component),C=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.props.changeSelf(e)},a.deleteList=function(e){return window.confirm("Really delete PEM?")&&Object(u.c)("api/pem/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.listItem=function(e){return[e.id,e.name,e.pdu_id,e.pdu_name,e.pdu_slot,e.pdu_unit,d.a.createElement(l.Fragment,{key:"dev_pems_frag_"+e.id},d.a.createElement(_.InfoButton,{key:"dev_pem_btn_info_"+e.id,onClick:function(){return a.changeContent(d.a.createElement(S,{key:"pem_info_"+e.id,id:e.id,device_id:a.props.device_id}))},title:"Edit PEM information"}),d.a.createElement(_.DeleteButton,{key:"dev_pem_btn_delete_"+e.id,onClick:function(){return a.deleteList(e.id)},title:"Delete PEM"}))]},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/pem/list",{device_id:this.props.device_id,lookup:!0}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(m.ContentReport,{key:"dev_pems",header:"PEMs",thead:["ID","Name","PDU ID","PDU Name","PDU Slot","PDU Unit",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(_.ReloadButton,{key:"dev_pems_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(_.AddButton,{key:"dev_pems_btn_add",onClick:function(){return e.changeContent(d.a.createElement(S,{key:"device_pem_info_new_"+Object(u.d)(),id:"new",device_id:e.props.device_id}))},title:"Add PEM"})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),S=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.updateInfo=function(){return Object(u.c)("api/pem/info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.state={},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/pem/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)})),Object(u.c)("api/pdu/list",{device_id:this.props.device_id,empty:!0}).then((function(t){return e.setState({pdus:t.data})}))}},{key:"render",value:function(){var e=this;if(this.state.data&&this.state.pdus){var t=this.state.pdus.find((function(t){return parseInt(t.device_id)===parseInt(e.state.data.pdu_id)})),n=[];if(t)for(var a=0;a<t.slots;a++)n.push({id:a,name:t["".concat(a,"_slot_name")]});return d.a.createElement(m.InfoArticle,{key:"d_pem_art",header:"PEM"},d.a.createElement(m.InfoColumns,{key:"d_pem_ic"},d.a.createElement(p.TextInput,{key:"d_pem_name",id:"name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"d_pem_pdu_id",id:"pdu_id",label:"PDU",value:this.state.data.pdu_id,onChange:this.onChange},this.state.pdus.map((function(e,t){return d.a.createElement("option",{key:"d_pem_pdu_id_"+t,value:e.device_id},e.name)}))),d.a.createElement(p.SelectInput,{key:"d_pem_pdu_slot",id:"pdu_slot",label:"Slot",value:this.state.data.pdu_slot,onChange:this.onChange},n.map((function(e,t){return d.a.createElement("option",{key:"d_pem_pdu_slot_"+t,value:e.id},e.name)}))),d.a.createElement(p.TextInput,{key:"d_pem_pdu_unit",id:"pdu_unit",label:"Unit",value:this.state.data.pdu_unit,onChange:this.onChange})),d.a.createElement(_.SaveButton,{key:"d_pem_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),d.a.createElement(m.Result,{key:"d_pem_result",result:this.state.update?this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update):""}))}return d.a.createElement(m.Spinner,null)}}]),n}(l.Component),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).loadList=function(e){return Object(u.c)("api/statistics/list",{device_id:a.props.device_id}).then((function(t){return a.setState(e?Object(i.a)({},t,{result:"",inserts:""}):t)}))},a.changeContent=function(e){return a.props.changeSelf(e)},a.deleteList=function(e){return window.confirm("Really delete statistics point?")&&Object(u.c)("api/statistics/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.lookupStats=function(){return Object(u.c)("api/statistics/lookup",{device_id:a.props.device_id}).then((function(e){a.setState(e),a.loadList()}))},a.listItem=function(e){return[e.id,e.measurement,e.tags,e.name,e.oid,d.a.createElement(l.Fragment,{key:"dev_stats_frag_"+e.id},d.a.createElement(_.InfoButton,{key:"dev_stats_btn_info_"+e.id,onClick:function(){return a.changeContent(d.a.createElement(j,{key:"statistics_info_"+e.id,id:e.id,device_id:a.props.device_id}))},title:"Edit data point"}),d.a.createElement(_.DeleteButton,{key:"dev_stats_btn_delete_"+e.id,onClick:function(){return a.deleteList(e.id)},title:"Delete data point"}))]},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(m.ContentReport,{key:"dev_stats",header:"Device statistics",thead:["ID","Measurement","Tags","Name","OID",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},d.a.createElement(_.ReloadButton,{key:"dev_stats_btn_reload",onClick:function(){return e.loadList(!0)}}),d.a.createElement(_.SearchButton,{key:"dev_stats_btn_lookup",onClick:function(){return e.lookupStats()},title:"Lookup device type stats"}),d.a.createElement(_.AddButton,{key:"dev_stats_btn_add",onClick:function(){return e.changeContent(d.a.createElement(j,{key:"device_statistics_info_new_"+Object(u.d)(),id:"new",device_id:e.props.device_id}))},title:"Add statistics"})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.updateInfo=function(){return Object(u.c)("api/statistics/info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.state={},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/statistics/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(m.InfoArticle,{key:"d_stat_art",header:"Data point"},d.a.createElement(m.InfoColumns,{key:"d_stat_ic"},d.a.createElement(p.TextInput,{key:"d_stat_measurement",id:"measurement",value:this.state.data.measurement,onChange:this.onChange,title:"Group, or measurement, that the data point belongs to"}),d.a.createElement(p.TextInput,{key:"d_stat_tags",id:"tags",value:this.state.data.tags,onChange:this.onChange,title:"Tags are comma separated values that extend TSDB grouping"}),d.a.createElement(p.TextInput,{key:"d_stat_name",id:"name",value:this.state.data.name,onChange:this.onChange,title:"Data point name"}),d.a.createElement(p.TextInput,{key:"d_stat_oid",id:"oid",value:this.state.data.oid,onChange:this.onChange})),d.a.createElement(_.SaveButton,{key:"d_stat_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),d.a.createElement(m.Result,{key:"d_stat_result",result:this.state.update&&this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update)})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),I=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).operationDev=function(e,t){window.confirm(t)&&(a.setState({wait:d.a.createElement(m.Spinner,null)}),Object(u.c)("api/device/control",{id:a.props.id,device_op:e}).then((function(e){return a.setState(Object(i.a)({},e,{wait:null}))})))},a.operationPem=function(e,t,n){window.confirm(n)&&(a.setState({wait:d.a.createElement(m.Spinner,null)}),Object(u.c)("api/device/control",{id:a.props.id,pem_op:t,pem_id:e}).then((function(e){return a.setState(Object(i.a)({},e,{wait:null}))})))},a.lookupState=function(e){return console.log("State lookup TODO")},a.state={pems:[]},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/control",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(m.InfoArticle,{key:"dc_art",header:"Device Control"},d.a.createElement(m.InfoColumns,{key:"dc_ic"},d.a.createElement("label",{htmlFor:"reboot"},"Reboot:"),d.a.createElement(_.ReloadButton,{id:"reboot",key:"dev_ctr_reboot",onClick:function(){return e.operationDev("reboot","Really reboot?")},title:"Restart device"}),d.a.createElement("label",{htmlFor:"shutdown"},"Shutdown:"),d.a.createElement(_.ShutdownButton,{id:"shutdown",key:"dev_ctr_shutdown",onClick:function(){return e.operationDev("shutdown","Really shutdown?")},title:"Shutdown"}),this.state.pems.map((function(t){return"off"===t.state?d.a.createElement(l.Fragment,{key:"dc_pems_"+t.id},d.a.createElement("label",{htmlFor:t.id},t.name,":"),d.a.createElement(_.StartButton,{key:"dc_btn_start_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"on","Power on PEM?")},title:"Power ON"})):"on"===t.state?d.a.createElement(l.Fragment,{key:"dc_pems_"+t.id},d.a.createElement("label",{htmlFor:t.id},t.name,":"),d.a.createElement(_.ShutdownButton,{key:"dc_btn_stop_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"off","Power off PEM?")},title:"Power OFF"})):d.a.createElement(l.Fragment,{key:"dc_pems_"+t.id},d.a.createElement("label",{htmlFor:t.id},t.name,":"),d.a.createElement(_.SearchButton,{key:"dc_btn_lookup_"+t.id,id:t.id,onClick:function(){return e.lookupState(t.id)},title:"Lookup State"}))}))),d.a.createElement(m.Result,{key:"dc_result",result:JSON.stringify(this.state.result)}),this.state.wait)}}]),n}(l.Component),w=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).clearLog=function(){return Object(u.c)("api/device/log_clear",{id:e.props.id}).then((function(t){return t.deleted&&e.setState({data:[]})}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/log_get",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state?d.a.createElement(m.ContentReport,{key:"dev_log_cr",header:"Devices",thead:["Time","Message"],trows:this.state.data,listItem:function(e){return[e.time,e.message]}},d.a.createElement(_.DeleteButton,{key:"devlog_btn_delete",onClick:function(){return e.clearLog()},title:"Clear device logs"})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),D=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/configuration_template",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?d.a.createElement(m.CodeArticle,{key:"dtemp_art"},"OK"===this.state.status?this.state.data.join("\n"):this.state.info):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),x=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.addDevice=function(){r.state.data.hostname&&Object(u.c)("api/device/new",r.state.data).then((function(e){return r.setState({result:JSON.stringify(e)})}))},r.searchIP=function(){r.state.data.ipam_network_id&&Object(u.c)("api/ipam/address_find",{network_id:r.state.data.ipam_network_id}).then((function(e){return r.setState({data:Object(i.a)({},r.state.data,{ip:e.ip})})}))},r.state={data:{ip:r.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:r.props.ipam_network_id,hostname:""},found:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})})),Object(u.c)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(u.c)("api/device/class_list").then((function(t){return e.setState({classes:t.data})}))}},{key:"render",value:function(){var e=this;return this.state.domains&&this.state.classes&&this.state.networks?d.a.createElement(m.InfoArticle,{key:"dn_art",header:"Device Add"},d.a.createElement(m.InfoColumns,{key:"dn_content"},d.a.createElement(p.TextInput,{key:"dn_hostname",id:"hostname",value:this.state.data.hostname,placeholder:"Device hostname",onChange:this.onChange}),d.a.createElement(p.SelectInput,{key:"dn_class",id:"class",label:"Device Class",value:this.state.data.class,onChange:this.onChange},this.state.classes.map((function(e){return d.a.createElement("option",{key:"dn_class_"+e,value:e},e)}))),d.a.createElement(p.SelectInput,{key:"dn_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"dn_a_dom_"+t,value:e.id},e.name)}))),d.a.createElement(p.SelectInput,{key:"dn_if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.data.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"dn_if_dom_"+t,value:e.id},e.name)}))),d.a.createElement(p.SelectInput,{key:"dn_ipam_network_id",id:"ipam_network_id",label:"Interface Network",value:this.state.data.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return d.a.createElement("option",{key:"dn_net_"+t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),d.a.createElement(p.TextInput,{key:"dn_ip",id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"dn_mac",id:"mac",label:"MAC",value:this.state.data.mac,onChange:this.onChange})),d.a.createElement(_.StartButton,{key:"dn_btn_start",onClick:function(){return e.addDevice()},title:"Add device"}),d.a.createElement(_.SearchButton,{key:"dn_btn_search",onClick:function(){return e.searchIP()},title:"Find available IP"}),d.a.createElement(m.Result,{key:"dn_result",result:this.state.result})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).onChange=function(e){return i.setState(Object(a.a)({},e.target.name,e.target.value))},i.changeContent=function(e){return i.setState({content:e})},i.state={ipam_network_id:void 0,a_domain_id:void 0,content:null},i}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(u.c)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})}))}},{key:"runDiscovery",value:function(){var e=this;this.setState({content:d.a.createElement(m.Spinner,null)}),Object(u.c)("api/device/discover",{network_id:this.state.ipam_network_id,a_domain_id:this.state.a_domain_id,if_domain_id:this.state.if_domain_id}).then((function(t){return e.setState({content:d.a.createElement(m.CodeArticle,{key:"dd_result"},JSON.stringify(t,null,2))})}))}},{key:"render",value:function(){var e=this;return this.state.networks&&this.state.domains?d.a.createElement(l.Fragment,{key:"dd_fragment"},d.a.createElement(m.InfoArticle,{key:"dd_art",header:"Device Discovery"},d.a.createElement(m.InfoColumns,{key:"dd_content"},d.a.createElement(p.SelectInput,{key:"dd_ipam_network_id",id:"ipam_network_id",label:"Network",value:this.state.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return d.a.createElement("option",{key:"dd_net_"+t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),d.a.createElement(p.SelectInput,{key:"dd_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"dd_dom_"+t,value:e.id},e.name)}))),d.a.createElement(p.SelectInput,{key:"dd_if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return d.a.createElement("option",{key:"dd_if_dom_"+t,value:e.id},e.name)})))),d.a.createElement(_.StartButton,{key:"dd_btn_start",onClick:function(){return e.runDiscovery()},title:"Start discovery"})),d.a.createElement(h.NavBar,{key:"dd_navigation",id:"dd_navigation"}),this.state.content):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),N=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).listItem=function(e){return[e.id,e.hostname,e.class,e.ip,e.mac,e.oui,e.model,e.oid,e.serial,d.a.createElement(m.StateLeds,{key:"dr_"+e.id,state:e.state})]},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/list",{extra:["system","type","mac","oui","class"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?d.a.createElement(m.ContentReport,{key:"dev_cr",header:"Devices",thead:["ID","Hostname","Class","IP","MAC","OUI","Model","OID","Serial","State"],trows:this.state.data,listItem:this.listItem}):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),M=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.setState({content:e})},a.changeSelf=function(e){return a.props.changeSelf(e)},a.listItem=function(e){return[e.base,d.a.createElement(_.HrefButton,{text:e.name,onClick:function(){return a.changeSelf(d.a.createElement(y,{key:"device_list",field:"type",search:e.name}))}}),e.icon]},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/type_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?d.a.createElement(l.Fragment,{key:"dev_tp_fragment"},d.a.createElement(m.ContentList,{key:"dev_tp_cl",header:"Device Types",thead:["Class","Name","Icon"],trows:this.state.data,listItem:this.listItem}),d.a.createElement(m.ContentData,{key:"dev_tp_cd"},this.state.content)):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),L=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).syncModels=function(){return Object(u.c)("api/device/model_list",{op:"sync"}).then((function(e){return a.setState(e)}))},a.listItem=function(e){return[e.id,e.name,e.type,d.a.createElement(l.Fragment,{key:"ml_"+e.id},d.a.createElement(_.ConfigureButton,{key:"ml_btn_info_"+e.id,onClick:function(){return a.changeContent(d.a.createElement(T,{key:"model_info_"+e.id,id:e.id}))},title:"Edit model information"}),d.a.createElement(_.DeleteButton,{key:"ml_btn_delete_"+e.id,onClick:function(){return a.deleteList(e.id)},title:"Delete model"}))]},a.changeContent=function(e){return a.setState({content:e})},a.deleteList=function(e){return window.confirm("Really delete model?")&&Object(u.c)("api/device/model_delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/model_list").then((function(t){return e.setState(Object(i.a)({},t,{result:"OK"}))}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(l.Fragment,{key:"dev_ml_fragment"},d.a.createElement(m.ContentList,{key:"dev_ml_cl",header:"Device Models",thead:["ID","Model","Type",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},d.a.createElement(_.ReloadButton,{key:"ml_btn_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(_.SyncButton,{key:"_ml_btn_sync",onClick:function(){return e.syncModels()},title:"Resync models"})),d.a.createElement(m.ContentData,{key:"dev_ml_cd"},this.state.content)):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),T=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.updateInfo=function(){return Object(u.c)("api/device/model_info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.state={data:null,found:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/model_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(m.InfoArticle,{key:"dm_art",header:"Device Model"},d.a.createElement(m.InfoColumns,{key:"dm_content"},d.a.createElement(p.TextLine,{key:"dm_name",id:"name",text:this.state.data.name}),d.a.createElement(p.TextLine,{key:"dm_type",id:"type",text:this.state.extra.type}),d.a.createElement(p.TextInput,{key:"dm_defaults_file",id:"defaults_file",label:"Default File",value:this.state.data.defaults_file,onChange:this.onChange}),d.a.createElement(p.TextInput,{key:"dm_image_file",id:"image_file",label:"Image  File",value:this.state.data.image_file,onChange:this.onChange})),d.a.createElement(p.TextAreaInput,{key:"dm_parameters",id:"parameters",onChange:this.onChange,value:this.state.data.parameters}),d.a.createElement(_.SaveButton,{key:"dm_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),z=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.ouiSearch=function(){Object(u.c)("api/master/oui_info",{oui:r.state.data.oui}).then((function(e){return r.setState({content:d.a.createElement(m.InfoArticle,{key:"oui_art"},d.a.createElement(m.InfoColumns,{key:"oui_cont"},d.a.createElement("label",{htmlFor:"oui"},"OUI:"),d.a.createElement("span",{id:"oui"},e.data.oui),d.a.createElement("label",{htmlFor:"company"},"Company:"),d.a.createElement("span",{id:"company"},e.data.company)))})}))},r.state={data:{oui:""},content:null},r}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return d.a.createElement(m.Flex,{key:"flex"},d.a.createElement(m.LineArticle,{key:"oui_src_art"},"Type OUI or MAC address to find OUI/company name,",d.a.createElement(p.TextInput,{key:"oui",id:"oui",onChange:this.onChange,value:this.state.data.oui,placeholder:"00:00:00"}),d.a.createElement(_.SearchButton,{key:"oui_btn_search",onClick:function(){return e.ouiSearch()},title:"Search for OUI"})),this.state.content)}}]),n}(l.Component),P=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/master/oui_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?d.a.createElement(m.ContentReport,{key:"oui_list_cr",header:"OUI",thead:["oui","company"],trows:this.state.data,listItem:function(e){return["".concat(e.oui.substring(0,2),":").concat(e.oui.substring(2,4),":").concat(e.oui.substring(4,6)),e.company]}}):d.a.createElement(m.Spinner,null)}}]),n}(l.Component),R=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/device/function",{op:this.props.op,id:this.props.id,type:this.props.type}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){if(this.state){if("OK"===this.state.status){if(this.state.data.length>0){var e=Object.keys(this.state.data[0]);return d.a.createElement(m.ContentReport,{key:"df_cr",thead:e,trows:this.state.data,listItem:function(t){return e.map((function(e){return t[e]}))}})}return d.a.createElement(m.InfoArticle,{key:"df_art"},"No Data")}return d.a.createElement(m.CodeArticle,{key:"df_art"},"Error in devdata: ",this.state.info)}return d.a.createElement(m.Spinner,null)}}]),n}(l.Component)},41:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return k})),n.d(t,"List",(function(){return y})),n.d(t,"Show",(function(){return g})),n.d(t,"Edit",(function(){return b}));var a=n(18),i=n(15),o=n(4),r=n(5),c=n(6),s=n(7),l=n(0),d=n.n(l),u=n(12),m=n(13),h=n(19),p=n(14),_=n(1),f=n.n(_),v=n(38),k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.setState(e)},a.state=d.a.createElement(y,{key:"viz_list"}),a}return Object(r.a)(n,[{key:"render",value:function(){return d.a.createElement(l.Fragment,{key:"main_base"},this.state)}}]),n}(l.Component),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).listItem=function(e){return[e.id,e.name,d.a.createElement(l.Fragment,{key:"vl_buttons"},d.a.createElement(h.EditButton,{key:"vl_btn_edt_"+e.id,onClick:function(){return a.changeContent(d.a.createElement(b,{key:"viz_edit_"+e.id,id:e.id,changeSelf:a.changeContent,type:"map"}))},title:"Show and edit map"}),d.a.createElement(h.NetworkButton,{key:"vl_btn_net_"+e.id,onClick:function(){return window.open("viz.html?id=".concat(e.id),"_blank")},title:"Show resulting map"}),d.a.createElement(h.DeleteButton,{key:"vl_btn_del_"+e.id,onClick:function(){return a.deleteList(e.id)}}))]},a.changeContent=function(e){return a.setState({content:e})},a.deleteList=function(e){return window.confirm("Delete map?")&&Object(u.c)("api/visualize/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/visualize/list").then((function(t){e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(l.Fragment,{key:"vl_fragment"},d.a.createElement(m.ContentList,{key:"vl_cl",header:"Maps",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(h.ReloadButton,{key:"vl_btn_reload",onClick:function(){return e.componentDidMount()}})),d.a.createElement(m.ContentData,{key:"vl_cd"},this.state.content))}}]),n}(l.Component),g=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).doubleClick=function(e){console.log("DoubleClick",e.nodes),e.nodes[0]&&Object(u.c)("api/device/management",{id:e.nodes[0]}).then((function(e){e&&"OK"===e.status?e.data.url&&e.data.url.length>0?window.open(e.data.url):window.open("ssh://"+e.data.username+"@"+e.data.ip,"_self"):console.log("Data not ok:"+e)}))},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.hasOwnProperty("id")?{id:this.props.id}:{name:this.props.name};Object(u.c)("api/visualize/show",t).then((function(t){var n=new window.vis.DataSet(t.data.nodes),a=new window.vis.DataSet(t.data.edges),i=new window.vis.Network(e.refs.show_canvas,{nodes:n,edges:a},t.data.options);i.on("stabilizationIterationsDone",(function(){return i.setOptions({physics:!1})})),i.on("doubleClick",(function(t){return e.doubleClick(t)}))}))}},{key:"render",value:function(){return d.a.createElement(m.Article,{key:"viz_show"},d.a.createElement("div",{className:f.a.network,id:"div_network",ref:"show_canvas"}))}}]),n}(l.Component),b=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).changeContent=function(e){return r.props.changeSelf(e)},r.onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.jsonHandler=function(e){var t=Object(i.a)({},r.state.data);try{t[e.target.name]=JSON.parse(e.target.value),r.setState({data:t})}catch(n){console.log("Error converting string to JSON")}},r.updateInfo=function(){return Object(u.c)("api/visualize/network",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.doubleClick=function(e){console.log("DoubleClick",e.nodes[0]),r.props.changeSelf&&r.changeContent(d.a.createElement(v.Info,{key:"di_"+e.nodes[0],id:e.nodes[0]}))},r.toggleEdit=function(){r.edit=!r.edit,r.viz.network.setOptions({manipulation:{enabled:r.edit}}),r.setState({result:"Edit:"+r.edit})},r.toggleFix=function(){r.viz.nodes.forEach((function(e,t){return r.viz.nodes.update({id:t,fixed:!e.fixed})})),r.setState({data:Object(i.a)({},r.state.data,{nodes:r.viz.nodes.get()}),result:"Fix/Unfix positions"})},r.togglePhysics=function(){var e=r.state.data;e.options.physics.enabled=!e.options.physics.enabled,r.viz.network.setOptions({physics:e.options.physics.enabled}),r.setState({data:e,physics_button:e.options.physics.enabled?h.StopButton:h.StartButton,result:"Physics:"+e.options.physics.enabled})},r.networkSync=function(e){r.viz.network.storePositions(),r.setState({data:Object(i.a)({},r.state.data,{nodes:r.viz.nodes.get(),edges:r.viz.edges.get()}),result:"Moved "+r.viz.nodes.get(e.nodes[0]).label})},r.showDiv=function(e){return e===r.state.content?{display:"block"}:{display:"none"}},r.state={content:"network",physics_button:h.StartButton,found:!0,data:{name:"N/A"},result:""},r.viz={network:null,nodes:null,edges:null},r.results=d.a.createRef(),r.edit=!1,r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.c)("api/visualize/network",{id:this.props.id,type:this.props.type}).then((function(t){e.viz.nodes=new window.vis.DataSet(t.data.nodes),e.viz.edges=new window.vis.DataSet(t.data.edges),t.data.options.physics.enabled=!0,e.viz.network=new window.vis.Network(e.refs.edit_canvas,{nodes:e.viz.nodes,edges:e.viz.edges},t.data.options),e.viz.network.on("stabilizationIterationsDone",(function(){return e.viz.network.setOptions({physics:!1})})),e.viz.network.on("doubleClick",(function(t){return e.doubleClick(t)})),e.viz.network.on("dragEnd",(function(t){return e.networkSync(t)})),t.data.options.physics.enabled=!1,e.setState(t)}))}},{key:"render",value:function(){var e=this,t=this.state.physics_button;return d.a.createElement(m.Article,{key:"viz_art",header:"Network Map"},"device"===this.props.type&&this.props.changeSelf&&d.a.createElement(h.BackButton,{key:"viz_back",onClick:function(){return e.changeContent(d.a.createElement(v.Info,{key:"di_"+e.props.id,id:e.props.id}))}}),d.a.createElement(h.ReloadButton,{key:"viz_reload",onClick:function(){return e.componentDidMount()}}),d.a.createElement(h.EditButton,{key:"viz_edit",onClick:function(){return e.toggleEdit()}}),d.a.createElement(t,{key:"viz_physics",onClick:function(){return e.togglePhysics()}}),d.a.createElement(h.FixButton,{key:"viz_fix",onClick:function(){return e.toggleFix()}}),d.a.createElement(h.SaveButton,{key:"viz_save",onClick:function(){return e.updateInfo()}}),d.a.createElement(h.NetworkButton,{key:"viz_net",onClick:function(){return e.setState({content:"network"})}}),d.a.createElement(h.TextButton,{key:"viz_opt",text:"Options",onClick:function(){return e.setState({content:"options"})}}),d.a.createElement(h.TextButton,{key:"viz_nodes",text:"Nodes",onClick:function(){return e.setState({content:"nodes"})}}),d.a.createElement(h.TextButton,{key:"viz_edges",text:"Edges",onClick:function(){return e.setState({content:"edges"})}}),d.a.createElement(p.TextInput,{key:"viz_name",id:"name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement(m.Result,{key:"viz_result",result:this.state.result}),d.a.createElement("div",{className:f.a.network,style:this.showDiv("network"),ref:"edit_canvas"}),d.a.createElement("div",{className:f.a.network,style:this.showDiv("options")},d.a.createElement("textarea",{id:"options",name:"options",value:JSON.stringify(this.state.data.options,void 0,2),onChange:this.jsonHandler})),d.a.createElement("div",{className:f.a.network,style:this.showDiv("nodes")},d.a.createElement("textarea",{id:"nodes",name:"nodes",value:JSON.stringify(this.state.data.nodes,void 0,2),onChange:this.jsonHandler})),d.a.createElement("div",{className:f.a.network,style:this.showDiv("edges")},d.a.createElement("textarea",{id:"edges",name:"edges",value:JSON.stringify(this.state.data.edges,void 0,2),onChange:this.jsonHandler})))}}]),n}(l.Component)}}]);
//# sourceMappingURL=0.0dfea8cd.chunk.js.map