(this.webpackJsonprims=this.webpackJsonprims||[]).push([[16],{45:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return p})),n.d(e,"Info",(function(){return C})),n.d(e,"Report",(function(){return g}));var a=n(19),i=n(10),r=n(5),o=n(6),c=n(8),s=n(7),u=n(3),l=n(14),d=n(15),h=n(16),j=n(21),v=n(17),b=n(0),p=function(t){Object(c.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(r.a)(this,a);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).compileNavItems=function(){return t.context.loadNavigation(Object(b.jsxs)(v.NavBar,{children:[Object(b.jsxs)(v.NavDropDown,{title:"Inventory",children:[Object(b.jsx)(v.NavDropButton,{title:"Search",onClick:function(){return t.changeContent(Object(b.jsx)(O,{changeSelf:t.changeContent},"search_list"))}},"inv_nav_srch"),Object(b.jsx)(v.NavDropButton,{title:"Vendor",onClick:function(){return t.changeContent(Object(b.jsx)(x,{changeSelf:t.changeContent},"vendor_list"))}},"inv_nav_vend"),Object(b.jsx)(v.NavDropButton,{title:"List",onClick:function(){return t.changeContent(Object(b.jsx)(f,{changeSelf:t.changeContent},"list"))}},"inv_nav_list")]},"inv_nav_inv"),Object(b.jsx)(v.NavButton,{title:"Locations",onClick:function(){return t.changeLocation()}},"inv_nav_loc")]},"inventory_navbar"))},t.changeLocation=function(){return n.e(5).then(n.bind(null,38)).then((function(e){return t.setState(Object(b.jsx)(e.List,{},"location_list"))}))},t.changeContent=function(e){return t.setState(e)},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:this.state})}}]),a}(u.Component);p.contextType=d.RimsContext;var f=function(t){Object(c.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[t.id,t.serial,t.model,Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j.InfoButton,{onClick:function(){return a.changeContent(Object(b.jsx)(C,{id:t.id},"inventory_"+t.id))},title:"View inventory item"},"info"),Object(b.jsx)(j.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete inventory item"},"del")]})]},a.deleteList=function(t){return window.confirm("Really delete item")&&Object(l.d)("api/inventory/delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.state={searchfield:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/inventory/list",this.props.args).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=0===this.state.searchfield.length?this.state.data:this.state.data.filter((function(e){return e.model.includes(t.state.searchfield)||e.serial.includes(t.state.searchfield)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(d.ContentList,{header:"Inventory",thead:["ID","Serial","Model",""],trows:e,listItem:this.listItem,result:this.state.result,children:[Object(b.jsx)(j.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(b.jsx)(j.AddButton,{onClick:function(){return t.changeContent(Object(b.jsx)(C,{id:"new"},"inventory_new_"+Object(l.e)()))},title:"Add inventory item"},"add"),Object(b.jsx)(h.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search inventory (case sensitive)"},"search")]},"cl"),Object(b.jsx)(d.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return Object(b.jsx)(d.Spinner,{})}}]),n}(u.Component),O=function(t){Object(c.a)(n,t);var e=Object(s.a)(n);function n(t){var o;return Object(r.a)(this,n),(o=e.call(this,t)).changeContent=function(t){return o.props.changeSelf(t)},o.onChange=function(t){return o.setState({data:Object(i.a)(Object(i.a)({},o.state.data),{},Object(a.a)({},t.target.name,t.target["checkbox"!==t.target.type?"value":"checked"]))})},o.state={data:{field:"serial",search:""}},o}return Object(o.a)(n,[{key:"render",value:function(){var t=this;return Object(b.jsxs)(d.LineArticle,{header:"Inventory search",children:[Object(b.jsxs)(h.SelectInput,{id:"field",value:this.state.data.field,onChange:this.onChange,children:[Object(b.jsx)("option",{value:"serial",children:"Serial"}),Object(b.jsx)("option",{value:"vendor",children:"Vendor"})]},"field"),Object(b.jsx)(h.TextInput,{id:"search",value:this.state.data.search,placeholder:"search",onChange:this.onChange},"search"),Object(b.jsx)(j.SearchButton,{onClick:function(){return t.changeContent(Object(b.jsx)(f,{args:t.state.data},"inventory_list"))},title:"Search inventory"},"inv_btn_search")]},"inv_srch_art")}}]),n}(u.Component),C=function(t){Object(c.a)(n,t);var e=Object(s.a)(n);function n(t){var o;return Object(r.a)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:Object(i.a)(Object(i.a)({},o.state.data),{},Object(a.a)({},t.target.name,t.target["checkbox"!==t.target.type?"value":"checked"]))})},o.changeContent=function(t){return o.setState({content:t})},o.updateInfo=function(){return Object(l.d)("api/inventory/info",Object(i.a)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/inventory/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data;return Object(b.jsxs)(d.InfoArticle,{header:"Inventory Item",children:[Object(b.jsxs)(d.InfoColumns,{children:[Object(b.jsx)(h.TextInput,{id:"vendor",value:e.vendor,onChange:this.onChange},"vendor"),Object(b.jsx)(h.TextInput,{id:"serial",label:"S/N",value:e.serial,onChange:this.onChange},"serial"),Object(b.jsx)(h.TextInput,{id:"product",value:e.product,onChange:this.onChange},"product"),Object(b.jsx)(h.TextInput,{id:"model",value:e.model,onChange:this.onChange},"model"),Object(b.jsx)(h.TextInput,{id:"description",value:e.description,onChange:this.onChange},"description"),Object(b.jsx)(h.SelectInput,{id:"location_id",label:"Location",value:e.location_id,onChange:this.onChange,children:this.state.locations.map((function(t,e){return Object(b.jsx)("option",{value:t.id,children:t.name},"ii_"+e)}))},"location_id"),Object(b.jsx)(h.DateInput,{id:"receive_date",label:"Received",value:e.receive_date,onChange:this.onChange},"receive_date"),Object(b.jsx)(h.TextInput,{id:"purchase_order",label:"Purchase Order",value:e.purchase_order,onChange:this.onChange},"purchase_order"),Object(b.jsx)(h.CheckboxInput,{id:"license",value:e.license,onChange:this.onChange},"license"),e.license&&Object(b.jsx)(h.TextInput,{id:"license_key",label:"Key",value:e.license_key,onChange:this.onChange},"license_key"),Object(b.jsx)(h.CheckboxInput,{id:"support_contract",value:e.support_contract,onChange:this.onChange},"support_contract"),e.support_contract&&Object(b.jsx)(h.DateInput,{id:"support_end_date",label:"Contract End",value:e.support_end_date,onChange:this.onChange},"support_end_date"),Object(b.jsx)(h.TextInput,{id:"comments",value:e.comments,onChange:this.onChange},"comments")]},"inv_content"),Object(b.jsx)(j.ReloadButton,{onClick:function(){return t.componentDidMount()}},"inv_btn_reload"),e.serial&&Object(b.jsx)(j.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"inv_btn_save")]},"inv_article")}return Object(b.jsx)(d.Spinner,{})}}]),n}(u.Component),x=function(t){Object(c.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[Object(b.jsx)(j.HrefButton,{text:t.vendor,onClick:function(){return a.changeContent(Object(b.jsx)(f,{args:{field:"vendor",search:t.vendor}},"inventory_list"))}},"search_"+t.vendor),t.count]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/inventory/vendor_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.ContentList,{header:"Vendors",thead:["Name","Count"],trows:this.state.data,listItem:this.listItem},"cl"),Object(b.jsx)(d.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component),g=function(t){Object(c.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[t.id,t.serial,t.vendor,t.model,t.product,t.description]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/inventory/list",{extra:["vendor","product","description"],sort:"vendor"}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return Object(b.jsx)(d.ContentReport,{header:"Inventory",thead:["ID","Serial","Vendor","Model","Product","Description"],trows:this.state.data,listItem:this.listItem},"inv_cr")}}]),n}(u.Component)}}]);
//# sourceMappingURL=16.b96d775b.chunk.js.map