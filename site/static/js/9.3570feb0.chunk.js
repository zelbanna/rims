(this.webpackJsonprims=this.webpackJsonprims||[]).push([[9,5],{37:function(t,e,n){"use strict";n.r(e),n.d(e,"List",(function(){return b})),n.d(e,"Info",(function(){return O}));var a=n(19),i=n(10),c=n(5),o=n(6),r=n(8),s=n(7),u=n(3),d=n(14),l=n(15),j=n(21),h=n(16),f=n(0),b=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).deleteList=function(t){return window.confirm("Really delete location?")&&Object(d.d)("api/location/delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.listItem=function(t){return[t.id,t.name,Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(j.ConfigureButton,{onClick:function(){return a.changeContent(Object(f.jsx)(O,{id:t.id},"location"))},title:"Edit location"},"conf"),Object(f.jsx)(j.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete location"},"del")]})]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/location/list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(l.ContentList,{header:"Locations",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem,children:[Object(f.jsx)(j.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(f.jsx)(j.AddButton,{onClick:function(){return t.changeContent(Object(f.jsx)(O,{id:"new"},"location"))},title:"Add location"},"add")]},"cl"),Object(f.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component),O=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:Object(i.a)(Object(i.a)({},o.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},o.updateInfo=function(){return Object(d.d)("api/location/info",Object(i.a)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(t,e){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/location/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.found?this.state.data?Object(f.jsxs)(l.InfoArticle,{header:"Location",children:[Object(f.jsx)(l.InfoColumns,{children:Object(f.jsx)(h.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange},"name")},"ic"),Object(f.jsx)(j.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"save")]},"ia_loc"):Object(f.jsx)(l.Spinner,{}):Object(f.jsxs)(l.InfoArticle,{children:["Location id: ",this.props.id," removed"]},"ia_loc")}}]),n}(u.Component)},49:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return k})),n.d(e,"List",(function(){return m})),n.d(e,"Layout",(function(){return C})),n.d(e,"Infra",(function(){return g}));var a=n(19),i=n(10),c=n(5),o=n(6),r=n(8),s=n(7),u=n(3),d=n(14),l=n(15),j=n(16),h=n(21),f=n(17),b=n(57),O=n.n(b),p=n(35),v=n(37),x=n(0),k=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).compileNavItems=function(){return a.context.loadNavigation(Object(x.jsxs)(f.NavBar,{children:[Object(x.jsxs)(f.NavDropDown,{title:"Rack",children:[Object(x.jsx)(f.NavDropButton,{title:"Racks",onClick:function(){return a.changeContent(Object(x.jsx)(m,{},"rack_list"))}},"dev_nav_all_rack"),Object(x.jsx)(f.NavDropButton,{title:"PDUs",onClick:function(){return a.changeContent(Object(x.jsx)(g,{type:"pdu"},"pdu_list"))}},"dev_nav_all_pdu"),Object(x.jsx)(f.NavDropButton,{title:"Consoles",onClick:function(){return a.changeContent(Object(x.jsx)(g,{type:"console"},"console_list"))}},"dev_nav_all_con")]},"dev_nav_racks"),Object(x.jsx)(f.NavButton,{title:"Locations",onClick:function(){return a.changeContent(Object(x.jsx)(v.List,{},"location_list"))}},"dev_nav_loc")]},"rack_navbar"))},a.changeContent=function(t){return a.setState(t)},a.state=Object(x.jsx)(m,{},"rack_list"),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:this.state})}}]),n}(u.Component);k.contextType=l.RimsContext;var m=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[Object(x.jsx)(h.HrefButton,{text:t.location,onClick:function(){return a.changeContent(Object(x.jsx)(v.Info,{id:t.location_id},"li_"+t.location_id))}},"rl_btn_loc_"+t.id),t.name,Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.InfoButton,{onClick:function(){return a.changeContent(Object(x.jsx)(_,{id:t.id},"rack_info_"+t.id))},title:"Rack information"},"info"),Object(x.jsx)(h.GoButton,{onClick:function(){return a.context.changeMain(Object(x.jsx)(p.Main,{rack_id:t.id},"rack_device_"+t.id))},title:"Rack inventory"},"go"),Object(x.jsx)(h.ItemsButton,{onClick:function(){return a.changeContent(Object(x.jsx)(C,{id:t.id,changeSelf:a.changeContent},"rack_layout_"+t.id))},title:"Rack layout"},"items"),Object(x.jsx)(h.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete rack"},"del")]})]},a.deleteList=function(t){return window.confirm("Really delete rack?")&&Object(d.d)("api/rack/delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/list",{sort:"name"}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(l.ContentList,{header:"Racks",thead:["Location","Name",""],trows:this.state.data,listItem:this.listItem,children:[Object(x.jsx)(h.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(x.jsx)(h.AddButton,{onClick:function(){return t.changeContent(Object(x.jsx)(_,{id:"new"},"rack_new_"+Object(d.e)()))},title:"Add rack"},"add")]},"cl"),Object(x.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component);m.contextType=l.RimsContext;var _=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:Object(i.a)(Object(i.a)({},o.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},o.updateInfo=function(){return Object(d.d)("api/rack/info",Object(i.a)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(x.jsxs)(l.InfoArticle,{header:"Rack",children:[Object(x.jsxs)(l.InfoColumns,{children:[Object(x.jsx)(j.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange},"name"),Object(x.jsx)(j.TextInput,{id:"size",value:this.state.data.size,onChange:this.onChange},"size"),Object(x.jsx)(j.SelectInput,{id:"console",value:this.state.data.console,onChange:this.onChange,children:this.state.consoles.map((function(t){return Object(x.jsx)("option",{value:t.id,children:t.hostname},t.id)}))},"console"),Object(x.jsx)(j.SelectInput,{id:"location_id",label:"Location",value:this.state.data.location_id,onChange:this.onChange,children:this.state.locations.map((function(t){return Object(x.jsx)("option",{value:t.id,children:t.name},t.id)}))},"location_id"),Object(x.jsx)(j.SelectInput,{id:"pdu_1",label:"PDU1",value:this.state.data.pdu_1,onChange:this.onChange,children:this.state.pdus.map((function(t){return Object(x.jsx)("option",{value:t.id,children:t.hostname},t.id)}))},"pdu_1"),Object(x.jsx)(j.SelectInput,{id:"pdu_2",label:"PDU2",value:this.state.data.pdu_2,onChange:this.onChange,children:this.state.pdus.map((function(t){return Object(x.jsx)("option",{value:t.id,children:t.hostname},t.id)}))},"pdu_2")]},"rack_content"),Object(x.jsx)(h.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"ri_btn_save")]},"rack_article"):Object(x.jsx)(l.Spinner,{})}}]),n}(u.Component),C=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).changeContent=function(t){a.props.changeSelf&&a.props.changeSelf(t)},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/devices",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"createRack",value:function(t,e,n){for(var a=this,i=[],c=1;c<this.state.size+1;c++)i.push(Object(x.jsx)("div",{className:O.a.rackLeft,style:{gridRow:-c},children:c},"left_"+c),Object(x.jsx)("div",{className:O.a.rackRight,style:{gridRow:-c},children:c},"right_"+c));return e.forEach((function(t){return i.push(Object(x.jsx)("div",{className:O.a.rackItem,style:{gridRowStart:a.state.size+2-n*t.rack_unit,gridRowEnd:a.state.size+2-(n*t.rack_unit+t.rack_size)},children:Object(x.jsx)(h.HrefButton,{style:{color:"var(--ui-txt-color)"},onClick:function(){return a.changeContent(Object(x.jsx)(p.Info,{id:t.id},"device_info"))},text:t.hostname},"rd_btn_"+t.id)},"dev_"+t.id))})),Object(x.jsx)("div",{className:O.a.rack,style:{grid:"repeat(".concat(this.state.size-1,", 2vw)/2vw 25vw 2vw")},children:i})}},{key:"render",value:function(){return this.state.size?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.InfoArticle,{header:"Front",children:this.createRack("front",this.state.front,1)},"rl_front"),Object(x.jsx)(l.InfoArticle,{header:"Back",children:this.createRack("back",this.state.back,-1)},"rl_back")]}):Object(x.jsx)(l.Spinner,{})}}]),n}(u.Component),g=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[Object(x.jsx)(h.HrefButton,{text:t.id,onClick:function(){return a.changeContent(Object(x.jsx)(p.Info,{id:t.id},"device_"+t.id))},title:"Device info"},"dev_"+t.id),t.hostname,Object(x.jsx)(h.InfoButton,{onClick:function(){return a.context.changeMain({module:t.type_base,function:"Manage",args:{device_id:t.id,type:t.type_name}})},title:"Manage device"},"rinfra_btn_"+t.id)]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/device/list",{field:"base",search:this.props.type,extra:["type"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.ContentList,{header:this.props.type,thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem,children:Object(x.jsx)(h.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload")},"cl"),Object(x.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component);g.contextType=l.RimsContext},57:function(t,e,n){t.exports={rack:"rack_rack__2xnnq",rackLeft:"rack_rackLeft__1E8o9",rackRight:"rack_rackRight__1Jn29",rackItem:"rack_rackItem__2yVLG"}}}]);
//# sourceMappingURL=9.3570feb0.chunk.js.map