"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[845],{845:function(t,e,n){n.r(e),n.d(e,{Info:function(){return m},Main:function(){return C},Report:function(){return j}});var i=n(942),r=n(413),a=n(671),o=n(144),s=n(340),c=n(882),u=n(791),l=n(252),h=n(885),d=n(698),v=n(682),p=n(355),f=n(184),C=function(t){(0,s.Z)(i,t);var e=(0,c.Z)(i);function i(){var t;(0,a.Z)(this,i);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).compileNavItems=function(){return t.context.loadNavigation((0,f.jsxs)(p.NavBar,{children:[(0,f.jsxs)(p.NavDropDown,{title:"Inventory",children:[(0,f.jsx)(p.NavDropButton,{title:"Search",onClick:function(){return t.changeContent((0,f.jsx)(g,{changeSelf:t.changeContent},"search_list"))}},"inv_nav_srch"),(0,f.jsx)(p.NavDropButton,{title:"Vendor",onClick:function(){return t.changeContent((0,f.jsx)(_,{changeSelf:t.changeContent},"vendor_list"))}},"inv_nav_vend"),(0,f.jsx)(p.NavDropButton,{title:"List",onClick:function(){return t.changeContent((0,f.jsx)(x,{changeSelf:t.changeContent},"list"))}},"inv_nav_list")]},"inv_nav_inv"),(0,f.jsx)(p.NavButton,{title:"Locations",onClick:function(){return t.changeLocation()}},"inv_nav_loc")]},"inventory_navbar"))},t.changeLocation=function(){return n.e(208).then(n.bind(n,208)).then((function(e){return t.setState((0,f.jsx)(e.List,{},"location_list"))}))},t.changeContent=function(e){return t.setState(e)},t}return(0,o.Z)(i,[{key:"componentDidMount",value:function(){this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"render",value:function(){return(0,f.jsx)(f.Fragment,{children:this.state})}}]),i}(u.Component);C.contextType=h.RimsContext;var x=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).listItem=function(t){return[t.id,t.serial,t.model,(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.InfoButton,{onClick:function(){return i.changeContent((0,f.jsx)(m,{id:t.id},"inventory_"+t.id))},title:"View inventory item"},"info"),(0,f.jsx)(v.DeleteButton,{onClick:function(){return i.deleteList(t.id)},title:"Delete inventory item"},"del")]})]},i.deleteList=function(t){return window.confirm("Really delete item")&&(0,l.Fh)("api/inventory/delete",{id:t}).then((function(e){e.deleted&&(i.setState({data:i.state.data.filter((function(e){return e.id!==t}))}),i.changeContent(null))}))},i.state={searchfield:""},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,l.Fh)("api/inventory/list",this.props.args).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=0===this.state.searchfield.length?this.state.data:this.state.data.filter((function(e){return e.model.includes(t.state.searchfield)||e.serial.includes(t.state.searchfield)}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(h.ContentList,{header:"Inventory",thead:["ID","Serial","Model",""],trows:e,listItem:this.listItem,result:this.state.result,children:[(0,f.jsx)(v.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),(0,f.jsx)(v.AddButton,{onClick:function(){return t.changeContent((0,f.jsx)(m,{id:"new"},"inventory_new_"+(0,l.P4)()))},title:"Add inventory item"},"add"),(0,f.jsx)(d.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search inventory (case sensitive)"},"search")]},"cl"),(0,f.jsx)(h.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return(0,f.jsx)(h.Spinner,{})}}]),n}(u.Component),g=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,a.Z)(this,n),(o=e.call(this,t)).changeContent=function(t){return o.props.changeSelf(t)},o.onChange=function(t){return o.setState({data:(0,r.Z)((0,r.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target["checkbox"!==t.target.type?"value":"checked"]))})},o.state={data:{field:"serial",search:""}},o}return(0,o.Z)(n,[{key:"render",value:function(){var t=this;return(0,f.jsxs)(h.LineArticle,{header:"Inventory search",children:[(0,f.jsxs)(d.SelectInput,{id:"field",value:this.state.data.field,onChange:this.onChange,children:[(0,f.jsx)("option",{value:"serial",children:"Serial"}),(0,f.jsx)("option",{value:"vendor",children:"Vendor"})]},"field"),(0,f.jsx)(d.TextInput,{id:"search",value:this.state.data.search,placeholder:"search",onChange:this.onChange},"search"),(0,f.jsx)(v.SearchButton,{onClick:function(){return t.changeContent((0,f.jsx)(x,{args:t.state.data},"inventory_list"))},title:"Search inventory"},"inv_btn_search")]},"inv_srch_art")}}]),n}(u.Component),m=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,a.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,r.Z)((0,r.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target["checkbox"!==t.target.type?"value":"checked"]))})},o.changeContent=function(t){return o.setState({content:t})},o.updateInfo=function(){return(0,l.Fh)("api/inventory/info",(0,r.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:null,found:!0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,l.Fh)("api/inventory/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data;return(0,f.jsxs)(h.InfoArticle,{header:"Inventory Item",children:[(0,f.jsxs)(h.InfoColumns,{children:[(0,f.jsx)(d.TextInput,{id:"vendor",value:e.vendor,onChange:this.onChange},"vendor"),(0,f.jsx)(d.TextInput,{id:"serial",label:"S/N",value:e.serial,onChange:this.onChange},"serial"),(0,f.jsx)(d.TextInput,{id:"product",value:e.product,onChange:this.onChange},"product"),(0,f.jsx)(d.TextInput,{id:"model",value:e.model,onChange:this.onChange},"model"),(0,f.jsx)(d.TextInput,{id:"description",value:e.description,onChange:this.onChange},"description"),(0,f.jsx)(d.SelectInput,{id:"location_id",label:"Location",value:e.location_id,onChange:this.onChange,children:this.state.locations.map((function(t,e){return(0,f.jsx)("option",{value:t.id,children:t.name},"ii_"+e)}))},"location_id"),(0,f.jsx)(d.DateInput,{id:"receive_date",label:"Received",value:e.receive_date,onChange:this.onChange},"receive_date"),(0,f.jsx)(d.TextInput,{id:"purchase_order",label:"Purchase Order",value:e.purchase_order,onChange:this.onChange},"purchase_order"),(0,f.jsx)(d.CheckboxInput,{id:"license",value:e.license,onChange:this.onChange},"license"),e.license&&(0,f.jsx)(d.TextInput,{id:"license_key",label:"Key",value:e.license_key,onChange:this.onChange},"license_key"),(0,f.jsx)(d.CheckboxInput,{id:"support_contract",value:e.support_contract,onChange:this.onChange},"support_contract"),e.support_contract&&(0,f.jsx)(d.DateInput,{id:"support_end_date",label:"Contract End",value:e.support_end_date,onChange:this.onChange},"support_end_date"),(0,f.jsx)(d.TextInput,{id:"comments",value:e.comments,onChange:this.onChange},"comments")]},"inv_content"),(0,f.jsx)(v.ReloadButton,{onClick:function(){return t.componentDidMount()}},"inv_btn_reload"),e.serial&&(0,f.jsx)(v.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"inv_btn_save")]},"inv_article")}return(0,f.jsx)(h.Spinner,{})}}]),n}(u.Component),_=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).listItem=function(t){return[(0,f.jsx)(v.HrefButton,{text:t.vendor,onClick:function(){return i.changeContent((0,f.jsx)(x,{args:{field:"vendor",search:t.vendor}},"inventory_list"))}},"search_"+t.vendor),t.count]},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,l.Fh)("api/inventory/vendor_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.ContentList,{header:"Vendors",thead:["Name","Count"],trows:this.state.data,listItem:this.listItem},"cl"),(0,f.jsx)(h.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component),j=function(t){(0,s.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t)).listItem=function(t){return[t.id,t.serial,t.vendor,t.model,t.product,t.description]},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,l.Fh)("api/inventory/list",{extra:["vendor","product","description"],sort:"vendor"}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return(0,f.jsx)(h.ContentReport,{header:"Inventory",thead:["ID","Serial","Vendor","Model","Product","Description"],trows:this.state.data,listItem:this.listItem},"inv_cr")}}]),n}(u.Component)}}]);
//# sourceMappingURL=845.83222007.chunk.js.map