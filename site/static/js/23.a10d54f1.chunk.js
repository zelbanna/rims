(this.webpackJsonprims=this.webpackJsonprims||[]).push([[23],{54:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return d})),n.d(e,"Report",(function(){return m})),n.d(e,"FileList",(function(){return _}));var s=n(10),i=n(5),r=n(6),a=n(8),o=n(7),c=n(3),u=n(14),p=n(15),l=n(21),j=n(17),h=n(1),f=n.n(h),v=n(0),d=function(t){Object(a.a)(c,t);var e=Object(o.a)(c);function c(t){var n;return Object(i.a)(this,c),(n=e.call(this,t)).compileNavItems=function(){var t="master"===n.context.settings.node,e="admin"===n.context.settings.class,s=t&&e;n.context.loadNavigation(Object(v.jsxs)(j.NavBar,{children:[s&&Object(v.jsx)(j.NavButton,{title:"Nodes",onClick:function(){return n.changeImport("node","List")}},"sys_nav_node"),s&&Object(v.jsx)(j.NavButton,{title:"Servers",onClick:function(){return n.changeImport("server","List")}},"sys_nav_srv"),t&&Object(v.jsx)(j.NavButton,{title:"ERD",onClick:function(){return window.open("erd.pdf","_blank")}},"sys_nav_erd"),s&&Object(v.jsx)(j.NavButton,{title:"Users",onClick:function(){return n.changeImport("user","List")}},"sys_nav_user"),t&&Object(v.jsx)(j.NavButton,{title:"Controls",onClick:function(){return n.changeContent(Object(v.jsx)(x,{},"system_controls"))}},"sys_nav_ctrl"),Object(v.jsxs)(j.NavDropDown,{title:"Reports",children:[Object(v.jsx)(j.NavDropButton,{title:"System",onClick:function(){return n.changeContent(Object(v.jsx)(m,{},"system_report"))}},"sys_nav_sys"),e&&Object(v.jsx)(j.NavDropButton,{title:"Activities",onClick:function(){return n.changeImport("activity","Report")}},"sys_nav_act"),t&&Object(v.jsx)(j.NavDropButton,{title:"Reservations",onClick:function(){return n.changeImport("reservation","Report")}},"sys_nav_resv"),t&&Object(v.jsx)(j.NavDropButton,{title:"Devices",onClick:function(){return n.changeImport("device","Report")}},"sys_nav_dev"),t&&Object(v.jsx)(j.NavDropButton,{title:"Interfaces",onClick:function(){return n.changeImport("interface","Report")}},"sys_nav_if"),t&&Object(v.jsx)(j.NavDropButton,{title:"Inventory",onClick:function(){return n.changeImport("inventory","Report")}},"sys_nav_inv")]},"sys_nav_reports"),Object(v.jsx)(j.NavButton,{title:"Logs",onClick:function(){return n.changeImport("node","LogShow",{node:n.context.settings.node})}},"sys_nav_logs"),e&&Object(v.jsx)(j.NavButton,{title:"REST",onClick:function(){return n.changeContent(Object(v.jsx)(b,{},"rest_list"))}},"sys_nav_rest"),Object(v.jsx)(j.NavReload,{onClick:function(){return n.changeContent(null)}},"sys_nav_reload"),n.state.navinfo.map((function(t,e){return Object(v.jsx)(j.NavInfo,{title:t},"sys_nav_ni_"+e)}))]},"system_navbar"))},n.changeContent=function(t){return n.setState({content:t})},n.state={navinfo:[],navitems:[],logs:[]},n}return Object(r.a)(c,[{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/system/inventory",{user_id:this.context.settings.id}).then((function(e){Object.assign(t.state,e),t.compileNavItems()}))}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(t,e,i){var r=this;n(26)("./"+t+".jsx").then((function(n){var a=n[e];r.setState({content:Object(v.jsx)(a,Object(s.a)({},i),t+"_"+e)})}))}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.state.content})}}]),c}(c.Component);d.contextType=p.RimsContext;var m=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).listItem=function(t){return[t.info,t.value]},s.state={},s}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/system/report").then((function(e){return t.setState({data:Object.keys(e).sort((function(t,e){return t.localeCompare(e)})).map((function(t){return{info:t,value:e[t]}}))})}))}},{key:"render",value:function(){return Object(v.jsx)(p.ContentReport,{header:"System Report",thead:["Key","Value"],trows:this.state.data,listItem:this.listItem},"sys_cr")}}]),n}(c.Component),b=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).listItem=function(t){return[t.api,Object(v.jsx)(l.HrefButton,{text:t.function,onClick:function(){r.changeContent(Object(v.jsx)(O,Object(s.a)({},t),"rest_info"))}},"rest_"+t.api)]},r.state={},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/system/rest_explore").then((function(e){var n=[];e.data.forEach((function(t){return t.functions.forEach((function(e){return n.push({api:t.api,function:e})}))})),t.setState({data:n})}))}},{key:"render",value:function(){var t=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.ContentList,{header:"REST API",thead:["API","Function"],trows:this.state.data,listItem:this.listItem},"cl"),Object(v.jsx)(p.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(c.Component),O=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).state={},s}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(t){var e=this;t!==this.props&&Object(u.d)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(t){return e.setState(t)}))}},{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.module&&this.state.information?Object(v.jsxs)(p.Article,{header:this.props.api,children:[this.state.module.join("\n"),Object(v.jsx)(p.Title,{text:this.props.function}),this.state.information.join("\n")]},"ri_art"):Object(v.jsx)(p.Spinner,{})}}]),n}(c.Component),y=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/"+this.props.api,this.props.args).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?Object(v.jsx)(p.CodeArticle,{header:this.props.text,children:JSON.stringify(this.state,null,2)},"re_code"):Object(v.jsx)(p.Spinner,{})}}]),n}(c.Component),x=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).listItem=function(t){return[Object(v.jsx)(l.HrefButton,{text:t.text,onClick:function(){return r.changeContent(Object(v.jsx)(y,Object(s.a)({},t),"rest_"+t.api))}},"ctrl_"+t.api)]},r.state={data:[{api:"ipam/check",text:"IPAM status check"},{api:"interface/check",text:"Interface status check"},{api:"device/system_info_discover",text:"Discover device system information (sysmac etc)"},{api:"device/model_sync",text:"Sync device model mapping"},{api:"device/vm_mapping",text:"VM UUID mapping"},{api:"master/oui_fetch",text:"Sync OUI database"},{api:"reservation/expiration_status",text:"Check reservation status"},{api:"fdb/check",text:"Update FDB"}]},r}return Object(r.a)(n,[{key:"render",value:function(){var t=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.ContentList,{header:"",thead:["API"],trows:this.state.data,listItem:this.listItem},"cl"),Object(v.jsx)(p.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(c.Component),_=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).loadFiles=function(){var t={};t=r.props.hasOwnProperty("directory")?{mode:"directory",args:{directory:r.props.directory},files:void 0}:r.props.hasOwnProperty("fullpath")?{mode:"fullpath",args:{fullpath:r.props.fullpath},files:void 0}:{mode:"images",args:{},files:void 0},Object(u.d)("api/system/file_list",t.args).then((function(e){"OK"===e.status?r.setState(Object(s.a)({mode:t.mode},e)):(window.alert("Error retrieving files:"+e.info),r.setState({files:[]}))}))},r.listItem=function(t){return"images"===r.state.mode?".png"===t.substr(t.length-4)?[t,Object(v.jsx)("img",{src:r.state.path+"/"+t,alt:r.state.path+"/"+t})]:[]:[Object(v.jsxs)(v.Fragment,{children:[r.state.path+"/",Object(v.jsx)("a",{className:f.a.href,href:r.state.path+"/"+t,target:"_blank",rel:"noopener noreferrer",children:t})]})]},r.state={},r}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.loadFiles()}},{key:"componentDidMount",value:function(){this.loadFiles()}},{key:"render",value:function(){return this.state.files?Object(v.jsx)(p.ContentReport,{header:this.state.mode,thead:[],trows:this.state.files,listItem:this.listItem}):Object(v.jsx)(p.Spinner,{})}}]),n}(c.Component)}}]);
//# sourceMappingURL=23.a10d54f1.chunk.js.map