(this.webpackJsonprims=this.webpackJsonprims||[]).push([[13],{42:function(e,t,n){"use strict";n.r(t),n.d(t,"Search",(function(){return p})),n.d(t,"Device",(function(){return m})),n.d(t,"List",(function(){return v}));var a=n(18),r=n(4),i=n(5),c=n(6),s=n(7),o=n(0),u=n.n(o),l=n(12),h=n(13),f=n(15),d=n(19),p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).changeContent=function(e){return i.props.changeSelf(e)},i.onChange=function(e){return i.setState(Object(a.a)({},e.target.name,e.target.value))},i.state={field:"mac",search:""},i}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return u.a.createElement(h.LineArticle,{key:"fs_art",header:"FDB Search"},u.a.createElement(f.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},u.a.createElement("option",{value:"mac"},"MAC"),u.a.createElement("option",{value:"device_id"},"Device ID")),u.a.createElement(f.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),u.a.createElement(d.SearchButton,{key:"fs_btn_search",onClick:function(){return e.changeContent(u.a.createElement(v,Object.assign({key:"fdb_list"},e.state,{changeSelf:e.props.changeSelf})))},title:"Search FDB"}))}}]),n}(o.Component),m=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).changeContent=function(e){return i.props.changeSelf(e)},i.changeInterface=function(e){return n.e(1).then(n.bind(null,39)).then((function(t){return i.changeContent(u.a.createElement(t.Info,{key:"interface_info",device_id:i.props.id,interface_id:e,changeSelf:i.changeContent}))}))},i.listItem=function(e,t){return[e.vlan,e.snmp_index,u.a.createElement(d.HrefButton,{key:"fd_intf_"+e.interface_id,text:e.name,onClick:function(){return i.changeInterface(e.interface_id)}}),e.mac,e.oui]},i.state={wait:null,searchfield:""},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(l.d)("api/fdb/list",{field:"device_id",search:this.props.id,extra:["oui"]}).then((function(t){return e.setState(t)}))}},{key:"syncFDB",value:function(){var e=this;this.setState({wait:u.a.createElement(h.Spinner,null)}),Object(l.d)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(t){return e.setState({wait:null})}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.searchfield.toUpperCase(),n=0===t.length?this.state.data:this.state.data.filter((function(e){return e.mac.includes(t)}));return u.a.createElement(h.ContentReport,{key:"fd_cr",header:"FDB",thead:["VLAN","SNMP","Interface","MAC","OUI"],trows:n,listItem:this.listItem},u.a.createElement(d.ReloadButton,{key:"fd_btn_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(d.SyncButton,{key:"fd_btn_sync",onClick:function(){return e.syncFDB()},title:"Resync FDB"}),u.a.createElement(f.SearchInput,{key:"fd_search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search MAC"}),this.state.wait)}return u.a.createElement(h.Spinner,null)}}]),a}(o.Component),v=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).changeSearch=function(e,t){return i.setState({content:u.a.createElement(k,{key:"fi_"+t,mac:e})})},i.changeVisualize=function(e){return"changeSelf"in i.props&&n.e(3).then(n.bind(null,41)).then((function(t){return i.setState({content:u.a.createElement(t.Edit,{key:"viz_id_"+e,type:"device",changeSelf:i.props.changeSelf,id:e})})}))},i.listItem=function(e,t){return[e.device_id,e.hostname,e.vlan,e.snmp_index,e.name,u.a.createElement(d.HrefButton,{key:"intf_"+t,text:e.mac,onClick:function(){return i.setState({searchfield:e.mac})}}),u.a.createElement(u.a.Fragment,null,u.a.createElement(d.InfoButton,{key:"info",onClick:function(){return i.changeSearch(e.mac,t)},title:"Find interface(s)"}),u.a.createElement(d.NetworkButton,{key:"map",onClick:function(){return i.changeVisualize(e.device_id)}}))]},i.state={searchfield:"",content:null},i}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var e=this;Object(l.d)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.searchfield.toUpperCase(),n=0===t.length?this.state.data:this.state.data.filter((function(e){return e.mac.includes(t)}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(h.ContentList,{key:"cl",header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC",""],trows:n,listItem:this.listItem},u.a.createElement(d.ReloadButton,{key:"reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.SearchInput,{key:"search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search MAC",text:this.state.searchfield})),u.a.createElement(h.ContentData,{key:"cd"},this.state.content))}return u.a.createElement(h.Spinner,null)}}]),a}(o.Component),k=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(l.d)("api/fdb/search",{mac:this.props.mac}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.device?u.a.createElement(h.ContentReport,{key:"fd_cr",header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Interface","Description","OUI"],trows:this.state.interfaces,listItem:function(e){return[e.interface_id,e.name,e.description,e.oui]}}):this.state.oui?u.a.createElement(h.LineArticle,{key:"fd_oui_la",header:"Search result"},"OUI: ",this.state.oui):this.state.status?u.a.createElement(h.LineArticle,{key:"fd_oui_la",header:"Search result"},"Search result: ",this.state.info):u.a.createElement(h.Spinner,null)}}]),n}(o.Component)}}]);
//# sourceMappingURL=13.d46c0a69.chunk.js.map