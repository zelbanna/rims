"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[208],{208:(t,e,n)=>{n.r(e),n.d(e,{Info:()=>c,List:()=>l});var i=n(791),s=n(587),o=n(885),a=n(682),d=n(698),h=n(184);class l extends i.Component{constructor(t){super(t),this.deleteList=t=>window.confirm("Really delete location?")&&(0,s.Fh)("api/location/delete",{id:t}).then((e=>{e.deleted&&(this.setState({data:this.state.data.filter((e=>e.id!==t))}),this.changeContent(null))})),this.listItem=t=>[t.id,t.name,(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.ConfigureButton,{onClick:()=>this.changeContent((0,h.jsx)(c,{id:t.id},"location")),title:"Edit location"},"conf"),(0,h.jsx)(a.DeleteButton,{onClick:()=>this.deleteList(t.id),title:"Delete location"},"del")]})],this.state={}}componentDidMount(){(0,s.Fh)("api/location/list").then((t=>this.setState(t)))}render(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(o.ContentList,{header:"Locations",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem,children:[(0,h.jsx)(a.ReloadButton,{onClick:()=>this.componentDidMount()},"reload"),(0,h.jsx)(a.AddButton,{onClick:()=>this.changeContent((0,h.jsx)(c,{id:"new"},"location")),title:"Add location"},"add")]},"cl"),(0,h.jsx)(o.ContentData,{mountUpdate:t=>this.changeContent=t},"cda")]})}}class c extends i.Component{constructor(t){super(t),this.onChange=t=>this.setState({data:{...this.state.data,[t.target.name]:t.target.value}}),this.updateInfo=()=>(0,s.Fh)("api/location/info",{op:"update",...this.state.data}).then((t=>this.setState(t))),this.state={data:null,found:!0}}componentDidUpdate(t,e){t!==this.props&&this.componentDidMount()}componentDidMount(){(0,s.Fh)("api/location/info",{id:this.props.id}).then((t=>this.setState(t)))}render(){return this.state.found?this.state.data?(0,h.jsxs)(o.InfoArticle,{header:"Location",children:[(0,h.jsx)(o.InfoColumns,{children:(0,h.jsx)(d.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange},"name")},"ic"),(0,h.jsx)(a.SaveButton,{onClick:()=>this.updateInfo(),title:"Save"},"save")]},"ia_loc"):(0,h.jsx)(o.Spinner,{}):(0,h.jsxs)(o.InfoArticle,{children:["Location id: ",this.props.id," removed"]},"ia_loc")}}}}]);
//# sourceMappingURL=208.5af35500.chunk.js.map