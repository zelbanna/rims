(this.webpackJsonprims=this.webpackJsonprims||[]).push([[15],{48:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return f})),n.d(t,"Info",(function(){return C})),n.d(t,"Report",(function(){return E}));var a=n(18),r=n(14),i=n(4),o=n(5),c=n(6),l=n(7),u=n(0),s=n.n(u),d=n(12),h=n(13),v=n(15),m=n(20),p=n(16),f=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).compileNavItems=function(){return e.context.loadNavigation(s.a.createElement(p.NavBar,{key:"inventory_navbar"},s.a.createElement(p.NavDropDown,{key:"inv_nav_inv",title:"Inventory"},s.a.createElement(p.NavDropButton,{key:"inv_nav_srch",title:"Search",onClick:function(){return e.changeContent(s.a.createElement(k,{key:"search_list",changeSelf:e.changeContent}))}}),s.a.createElement(p.NavDropButton,{key:"inv_nav_vend",title:"Vendor",onClick:function(){return e.changeContent(s.a.createElement(g,{key:"vendor_list",changeSelf:e.changeContent}))}}),s.a.createElement(p.NavDropButton,{key:"inv_nav_list",title:"List",onClick:function(){return e.changeContent(s.a.createElement(y,{key:"list",changeSelf:e.changeContent}))}})),s.a.createElement(p.NavButton,{key:"inv_nav_loc",title:"Locations",onClick:function(){return e.changeLocation()}})))},e.changeLocation=function(){return n.e(4).then(n.bind(null,40)).then((function(t){return e.setState(s.a.createElement(t.List,{key:"location_list"}))}))},e.changeContent=function(t){return e.setState(t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.compileNavItems()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.compileNavItems()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state)}}]),a}(u.Component);f.contextType=h.RimsContext;var y=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).listItem=function(e){return[e.id,e.serial,e.model,s.a.createElement(s.a.Fragment,null,s.a.createElement(m.InfoButton,{key:"info",onClick:function(){return a.changeContent(s.a.createElement(C,{key:"inventory_"+e.id,id:e.id}))},title:"View inventory item"}),s.a.createElement(m.DeleteButton,{key:"del",onClick:function(){return a.deleteList(e.id)},title:"Delete inventory item"}))]},a.deleteList=function(e){return window.confirm("Really delete item")&&Object(d.d)("api/inventory/delete",{id:e}).then((function(t){t.deleted&&(a.setState({data:a.state.data.filter((function(t){return t.id!==e}))}),a.changeContent(null))}))},a.state={searchfield:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/inventory/list",this.props.args).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=0===this.state.searchfield.length?this.state.data:this.state.data.filter((function(t){return t.model.includes(e.state.searchfield)||t.serial.includes(e.state.searchfield)}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.ContentList,{key:"cl",header:"Inventory",thead:["ID","Serial","Model",""],trows:t,listItem:this.listItem,result:this.state.result},s.a.createElement(m.ReloadButton,{key:"reload",onClick:function(){return e.componentDidMount()}}),s.a.createElement(m.AddButton,{key:"add",onClick:function(){return e.changeContent(s.a.createElement(C,{key:"inventory_new_"+Object(d.e)(),id:"new"}))},title:"Add inventory item"}),s.a.createElement(v.SearchInput,{key:"search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search inventory (case sensitive)"})),s.a.createElement(h.ContentData,{key:"cda",mountUpdate:function(t){return e.changeContent=t}}))}return s.a.createElement(h.Spinner,null)}}]),n}(u.Component),k=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).changeContent=function(e){return o.props.changeSelf(e)},o.onChange=function(e){return o.setState({data:Object(r.a)({},o.state.data,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},o.state={data:{field:"serial",search:""}},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement(h.LineArticle,{key:"inv_srch_art",header:"Inventory search"},s.a.createElement(v.SelectInput,{key:"field",id:"field",value:this.state.data.field,onChange:this.onChange},s.a.createElement("option",{value:"serial"},"Serial"),s.a.createElement("option",{value:"vendor"},"Vendor")),s.a.createElement(v.TextInput,{key:"search",id:"search",value:this.state.data.search,placeholder:"search",onChange:this.onChange}),s.a.createElement(m.SearchButton,{key:"inv_btn_search",onClick:function(){return e.changeContent(s.a.createElement(y,{key:"inventory_list",args:e.state.data}))},title:"Search inventory"}))}}]),n}(u.Component),C=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(r.a)({},o.state.data,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},o.changeContent=function(e){return o.setState({content:e})},o.updateInfo=function(){return Object(d.d)("api/inventory/info",Object(r.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/inventory/info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data;return s.a.createElement(h.InfoArticle,{key:"inv_article",header:"Inventory Item"},s.a.createElement(h.InfoColumns,{key:"inv_content"},s.a.createElement(v.TextInput,{key:"vendor",id:"vendor",value:t.vendor,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"serial",id:"serial",label:"S/N",value:t.serial,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"product",id:"product",value:t.product,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"model",id:"model",value:t.model,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"description",id:"description",value:t.description,onChange:this.onChange}),s.a.createElement(v.SelectInput,{key:"location_id",id:"location_id",label:"Location",value:t.location_id,onChange:this.onChange},this.state.locations.map((function(e,t){return s.a.createElement("option",{key:"ii_"+t,value:e.id},e.name)}))),s.a.createElement(v.DateInput,{key:"receive_date",id:"receive_date",label:"Received",value:t.receive_date,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"purchase_order",id:"purchase_order",label:"Purchase Order",value:t.purchase_order,onChange:this.onChange}),s.a.createElement(v.CheckboxInput,{key:"license",id:"license",value:t.license,onChange:this.onChange}),t.license&&s.a.createElement(v.TextInput,{key:"license_key",id:"license_key",label:"Key",value:t.license_key,onChange:this.onChange}),s.a.createElement(v.CheckboxInput,{key:"support_contract",id:"support_contract",value:t.support_contract,onChange:this.onChange}),t.support_contract&&s.a.createElement(v.DateInput,{key:"support_end_date",id:"support_end_date",label:"Contract End",value:t.support_end_date,onChange:this.onChange}),s.a.createElement(v.TextInput,{key:"comments",id:"comments",value:t.comments,onChange:this.onChange})),s.a.createElement(m.ReloadButton,{key:"inv_btn_reload",onClick:function(){return e.componentDidMount()}}),t.serial&&s.a.createElement(m.SaveButton,{key:"inv_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}))}return s.a.createElement(h.Spinner,null)}}]),n}(u.Component),g=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).listItem=function(e){return[s.a.createElement(m.HrefButton,{key:"search_"+e.vendor,text:e.vendor,onClick:function(){return a.changeContent(s.a.createElement(y,{key:"inventory_list",args:{field:"vendor",search:e.vendor}}))}}),e.count]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/inventory/vendor_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(h.ContentList,{key:"cl",header:"Vendors",thead:["Name","Count"],trows:this.state.data,listItem:this.listItem}),s.a.createElement(h.ContentData,{key:"cda",mountUpdate:function(t){return e.changeContent=t}}))}}]),n}(u.Component),E=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).listItem=function(e){return[e.id,e.serial,e.vendor,e.model,e.product,e.description]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/inventory/list",{extra:["vendor","product","description"],sort:"vendor"}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return s.a.createElement(h.ContentReport,{key:"inv_cr",header:"Inventory",thead:["ID","Serial","Vendor","Model","Product","Description"],trows:this.state.data,listItem:this.listItem})}}]),n}(u.Component)}}]);
//# sourceMappingURL=15.a7b00bfc.chunk.js.map