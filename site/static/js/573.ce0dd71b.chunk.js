"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[573],{573:function(t,n,e){e.r(n),e.d(n,{FileList:function(){return j},Main:function(){return d},Report:function(){return m}});var s=e(413),i=e(671),r=e(144),o=e(340),a=e(882),c=e(791),u=e(252),p=e(885),l=e(682),h=e(355),f=e(582),v=e(184),d=function(t){(0,o.Z)(c,t);var n=(0,a.Z)(c);function c(t){var e;return(0,i.Z)(this,c),(e=n.call(this,t)).compileNavItems=function(){var t="master"===e.context.settings.node,n="admin"===e.context.settings.class,s=t&&n;e.context.loadNavigation((0,v.jsxs)(h.NavBar,{children:[s&&(0,v.jsx)(h.NavButton,{title:"Nodes",onClick:function(){return e.changeImport("node","List")}},"sys_nav_node"),s&&(0,v.jsx)(h.NavButton,{title:"Servers",onClick:function(){return e.changeImport("server","List")}},"sys_nav_srv"),t&&(0,v.jsx)(h.NavButton,{title:"ERD",onClick:function(){return window.open("erd.pdf","_blank")}},"sys_nav_erd"),s&&(0,v.jsx)(h.NavButton,{title:"Users",onClick:function(){return e.changeImport("user","List")}},"sys_nav_user"),t&&(0,v.jsx)(h.NavButton,{title:"Controls",onClick:function(){return e.changeContent((0,v.jsx)(g,{},"system_controls"))}},"sys_nav_ctrl"),(0,v.jsxs)(h.NavDropDown,{title:"Reports",children:[(0,v.jsx)(h.NavDropButton,{title:"System",onClick:function(){return e.changeContent((0,v.jsx)(m,{},"system_report"))}},"sys_nav_sys"),n&&(0,v.jsx)(h.NavDropButton,{title:"Activities",onClick:function(){return e.changeImport("activity","Report")}},"sys_nav_act"),t&&(0,v.jsx)(h.NavDropButton,{title:"Reservations",onClick:function(){return e.changeImport("reservation","Report")}},"sys_nav_resv"),t&&(0,v.jsx)(h.NavDropButton,{title:"Devices",onClick:function(){return e.changeImport("device","Report")}},"sys_nav_dev"),t&&(0,v.jsx)(h.NavDropButton,{title:"Interfaces",onClick:function(){return e.changeImport("interface","Report")}},"sys_nav_if"),t&&(0,v.jsx)(h.NavDropButton,{title:"Inventory",onClick:function(){return e.changeImport("inventory","Report")}},"sys_nav_inv")]},"sys_nav_reports"),(0,v.jsx)(h.NavButton,{title:"Logs",onClick:function(){return e.changeImport("node","LogShow",{node:e.context.settings.node})}},"sys_nav_logs"),n&&(0,v.jsx)(h.NavButton,{title:"REST",onClick:function(){return e.changeContent((0,v.jsx)(y,{},"rest_list"))}},"sys_nav_rest"),(0,v.jsx)(h.NavReload,{onClick:function(){return e.changeContent(null)}},"sys_nav_reload"),e.state.navinfo.map((function(t,n){return(0,v.jsx)(h.NavInfo,{title:t},"sys_nav_ni_"+n)}))]},"system_navbar"))},e.changeContent=function(t){return e.setState({content:t})},e.state={navinfo:[],navitems:[],logs:[]},e}return(0,r.Z)(c,[{key:"componentDidMount",value:function(){var t=this;(0,u.Fh)("api/system/inventory",{user_id:this.context.settings.id}).then((function(n){Object.assign(t.state,n),t.compileNavItems()}))}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(t,n,i){var r=this;e(421)("./"+t+".jsx").then((function(e){var o=e[n];r.setState({content:(0,v.jsx)(o,(0,s.Z)({},i),t+"_"+n)})}))}},{key:"render",value:function(){return(0,v.jsx)(v.Fragment,{children:this.state.content})}}]),c}(c.Component);d.contextType=p.RimsContext;var m=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var s;return(0,i.Z)(this,e),(s=n.call(this,t)).listItem=function(t){return[t.info,t.value]},s.state={},s}return(0,r.Z)(e,[{key:"componentDidMount",value:function(){var t=this;(0,u.Fh)("api/system/report").then((function(n){return t.setState({data:Object.keys(n).sort((function(t,n){return t.localeCompare(n)})).map((function(t){return{info:t,value:n[t]}}))})}))}},{key:"render",value:function(){return(0,v.jsx)(p.ContentReport,{header:"System Report",thead:["Key","Value"],trows:this.state.data,listItem:this.listItem},"sys_cr")}}]),e}(c.Component),y=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var r;return(0,i.Z)(this,e),(r=n.call(this,t)).listItem=function(t){return[t.api,(0,v.jsx)(l.HrefButton,{text:t.function,onClick:function(){r.changeContent((0,v.jsx)(x,(0,s.Z)({},t),"rest_info"))}},"rest_"+t.api)]},r.state={},r}return(0,r.Z)(e,[{key:"componentDidMount",value:function(){var t=this;(0,u.Fh)("api/system/rest_explore").then((function(n){var e=[];n.data.forEach((function(t){return t.functions.forEach((function(n){return e.push({api:t.api,function:n})}))})),t.setState({data:e})}))}},{key:"render",value:function(){var t=this;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.ContentList,{header:"REST API",thead:["API","Function"],trows:this.state.data,listItem:this.listItem},"cl"),(0,v.jsx)(p.ContentData,{mountUpdate:function(n){return t.changeContent=n}},"cda")]})}}]),e}(c.Component),x=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var s;return(0,i.Z)(this,e),(s=n.call(this,t)).state={},s}return(0,r.Z)(e,[{key:"componentDidUpdate",value:function(t){var n=this;t!==this.props&&(0,u.Fh)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(t){return n.setState(t)}))}},{key:"componentDidMount",value:function(){var t=this;(0,u.Fh)("api/system/rest_information",{api:this.props.api,function:this.props.function}).then((function(n){return t.setState(n)}))}},{key:"render",value:function(){return this.state.module&&this.state.information?(0,v.jsxs)(p.Article,{header:this.props.api,children:[this.state.module.join("\n"),(0,v.jsx)(p.Title,{text:this.props.function}),this.state.information.join("\n")]},"ri_art"):(0,v.jsx)(p.Spinner,{})}}]),e}(c.Component),_=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(){return(0,i.Z)(this,e),n.apply(this,arguments)}return(0,r.Z)(e,[{key:"componentDidMount",value:function(){var t=this;(0,u.Fh)("api/"+this.props.api,this.props.args).then((function(n){return t.setState(n)}))}},{key:"render",value:function(){return this.state?(0,v.jsx)(p.CodeArticle,{header:this.props.text,children:JSON.stringify(this.state,null,2)},"re_code"):(0,v.jsx)(p.Spinner,{})}}]),e}(c.Component),g=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var r;return(0,i.Z)(this,e),(r=n.call(this,t)).listItem=function(t){return[(0,v.jsx)(l.HrefButton,{text:t.text,onClick:function(){return r.changeContent((0,v.jsx)(_,(0,s.Z)({},t),"rest_"+t.api))}},"ctrl_"+t.api)]},r.state={data:[{api:"ipam/check",text:"IPAM status check"},{api:"interface/check",text:"Interface status check"},{api:"device/system_info_discover",text:"Discover device system information (sysmac etc)"},{api:"device/model_sync",text:"Sync device model mapping"},{api:"device/vm_mapping",text:"VM UUID mapping"},{api:"master/oui_fetch",text:"Sync OUI database"},{api:"reservation/expiration_status",text:"Check reservation status"},{api:"fdb/check",text:"Update FDB"}]},r}return(0,r.Z)(e,[{key:"render",value:function(){var t=this;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.ContentList,{header:"",thead:["API"],trows:this.state.data,listItem:this.listItem},"cl"),(0,v.jsx)(p.ContentData,{mountUpdate:function(n){return t.changeContent=n}},"cda")]})}}]),e}(c.Component),j=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var r;return(0,i.Z)(this,e),(r=n.call(this,t)).loadFiles=function(){var t={};t=r.props.hasOwnProperty("directory")?{mode:"directory",args:{directory:r.props.directory},files:void 0}:r.props.hasOwnProperty("fullpath")?{mode:"fullpath",args:{fullpath:r.props.fullpath},files:void 0}:{mode:"images",args:{},files:void 0},(0,u.Fh)("api/system/file_list",t.args).then((function(n){"OK"===n.status?r.setState((0,s.Z)({mode:t.mode},n)):(window.alert("Error retrieving files:"+n.info),r.setState({files:[]}))}))},r.listItem=function(t){return"images"===r.state.mode?".png"===t.substr(t.length-4)?[t,(0,v.jsx)("img",{src:r.state.path+"/"+t,alt:r.state.path+"/"+t})]:[]:[(0,v.jsxs)(v.Fragment,{children:[r.state.path+"/",(0,v.jsx)("a",{className:f.Z.href,href:r.state.path+"/"+t,target:"_blank",rel:"noopener noreferrer",children:t})]})]},r.state={},r}return(0,r.Z)(e,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.loadFiles()}},{key:"componentDidMount",value:function(){this.loadFiles()}},{key:"render",value:function(){return this.state.files?(0,v.jsx)(p.ContentReport,{header:this.state.mode,thead:[],trows:this.state.files,listItem:this.listItem}):(0,v.jsx)(p.Spinner,{})}}]),e}(c.Component)}}]);
//# sourceMappingURL=573.ce0dd71b.chunk.js.map