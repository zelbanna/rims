(this.webpackJsonprims=this.webpackJsonprims||[]).push([[24],{55:function(t,e,n){"use strict";n.r(e),n.d(e,"List",(function(){return f})),n.d(e,"Info",(function(){return b})),n.d(e,"User",(function(){return O}));var a=n(19),s=n(10),i=n(5),r=n(6),c=n(8),o=n(7),u=n(3),d=n(14),l=n(15),h=n(21),j=n(16),p=n(0),f=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[t.id,t.alias,t.name,Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.ConfigureButton,{onClick:function(){return a.changeContent(Object(p.jsx)(b,{id:t.id},"user_info"))},title:"Edit user"},"config"),Object(p.jsx)(h.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete user"},"del")]})]},a.deleteList=function(t){return window.confirm("Really delete user?")&&Object(d.d)("api/master/user_delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/master/user_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(l.ContentList,{header:"Users",thead:["ID","Alias","Name",""],trows:this.state.data,listItem:this.listItem,children:[Object(p.jsx)(h.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(p.jsx)(h.AddButton,{onClick:function(){return t.changeContent(Object(p.jsx)(b,{id:"new"},"user_info"))},title:"Add user"},"add")]},"cl"),Object(p.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}}]),n}(u.Component),b=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).onChange=function(t){return r.setState({data:Object(s.a)(Object(s.a)({},r.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},r.updateInfo=function(){r.setState({update:!1,password_check:""}),r.context.settings.id===r.state.data.id&&r.context.changeTheme(r.state.data.theme),Object(d.d)("api/master/user_info",Object(s.a)({op:"update"},r.state.data),{"X-Log":"false"}).then((function(t){return r.setState(t)}))},r.state={data:null,found:!0},r}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(t){var e=this;t!==this.props&&Object(d.d)("api/master/user_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/portal/theme_list").then((function(e){return t.setState({themes:e.data})})),Object(d.d)("api/master/user_info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.found){if(this.state.data&&this.state.themes){var e=this.state.update?"OK - updated":"";return Object(p.jsxs)(l.InfoArticle,{header:"User",children:[Object(p.jsxs)(l.InfoColumns,{children:[this.context.settings.id===this.props.id?Object(p.jsx)(j.TextLine,{id:"alias",text:this.state.data.alias},"alias"):Object(p.jsx)(j.TextInput,{id:"alias",value:this.state.data.alias,onChange:this.onChange},"alias"),Object(p.jsx)(j.PasswordInput,{id:"password",placeholder:"******",onChange:this.onChange},"password"),"admin"===this.context.settings.class&&Object(p.jsx)(j.SelectInput,{id:"class",value:this.state.data.class,onChange:this.onChange,children:this.state.classes.map((function(t){return Object(p.jsx)("option",{value:t,children:t},t)}))},"class"),Object(p.jsx)(j.TextInput,{id:"email",label:"E-Mail",value:this.state.data.email,onChange:this.onChange},"email"),Object(p.jsx)(j.TextInput,{id:"name",label:"Full name",value:this.state.data.name,onChange:this.onChange},"name"),Object(p.jsx)(j.SelectInput,{id:"theme",value:this.state.data.theme,onChange:this.onChange,children:this.state.themes.map((function(t){return Object(p.jsx)("option",{value:t,children:t},t)}))},"theme")]},"ui_content"),Object(p.jsx)(h.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"ui_btn_save"),Object(p.jsx)(l.Result,{result:e},"ui_operation")]},"ui_art")}return Object(p.jsx)(l.Spinner,{})}return Object(p.jsxs)(l.InfoArticle,{children:["User with id: ",this.props.id," removed"]},"ui_art")}}]),n}(u.Component);b.contextType=l.RimsContext;var O=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(p.jsx)(l.Flex,{style:{justifyContent:"space-evenly"},children:Object(p.jsx)(b,{id:this.props.id},"user_info")},"flex")}}]),n}(u.Component)}}]);
//# sourceMappingURL=24.dfb25ded.chunk.js.map