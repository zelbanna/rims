(this.webpackJsonprims=this.webpackJsonprims||[]).push([[0,13],{38:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return k})),n.d(t,"Info",(function(){return E})),n.d(t,"Logs",(function(){return D})),n.d(t,"New",(function(){return B})),n.d(t,"Report",(function(){return M})),n.d(t,"ModelInfo",(function(){return T}));var a=n(18),i=n(14),r=n(3),o=n(4),c=n(5),s=n(6),l=n(0),u=n.n(l),d=n(12),m=n(13),h=n(16),p=n(15),f=n(19),v=n(42),k=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).compileNavItems=function(){n.context.loadNavigation(u.a.createElement(h.NavBar,{key:"device_navbar"},u.a.createElement(h.NavDropDown,{key:"dev_nav_devs",title:"Devices"},u.a.createElement(h.NavDropButton,{key:"dev_nav_list",title:"List",onClick:function(){return n.changeContent(u.a.createElement(y,{key:"dl",rack_id:n.state.rack_id}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_new",title:"New",onClick:function(){return n.changeContent(u.a.createElement(B,{key:"device_new",ip:"0.0.0.0"}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_srch",title:"Search",onClick:function(){return n.changeContent(u.a.createElement(_,{key:"ds",changeSelf:n.changeContent}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_types",title:"Types",onClick:function(){return n.changeContent(u.a.createElement(L,{key:"dtl",changeSelf:n.changeContent}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_model",title:"Models",onClick:function(){return n.changeContent(u.a.createElement(N,{key:"dml"}))}})),u.a.createElement(h.NavDropDown,{key:"dev_nav_tools",title:"Tools"},u.a.createElement(h.NavDropButton,{key:"dev_nav_fdbx",title:"FDB Search",onClick:function(){return n.changeContent(u.a.createElement(v.Search,{key:"fdb_search",changeSelf:n.changeContent}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_fdbs",title:"FDB List",onClick:function(){return n.changeContent(u.a.createElement(v.List,{key:"fdb_list",changeSelf:n.changeContent}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_ouis",title:"OUI Search",onClick:function(){return n.changeContent(u.a.createElement(A,{key:"oui_search"}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_ouil",title:"OUI List",onClick:function(){return n.changeContent(u.a.createElement(R,{key:"oui_list"}))}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_resv",title:"Reservations",onClick:function(){return n.changeImport("reservation","List",{})}})),n.state.pdu.length>0&&u.a.createElement(h.NavDropDown,{key:"dev_nav_pdus",title:"PDUs"},n.state.pdu.map((function(e,t){return u.a.createElement(h.NavDropButton,{key:"dev_nav_pdu_"+t,title:e.hostname,onClick:function(){return n.changeImport("pdu","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.console.length>0&&u.a.createElement(h.NavDropDown,{key:"dev_nav_consoles",title:"Consoles"},n.state.console.map((function(e,t){return u.a.createElement(h.NavDropButton,{key:"dev_nav_console_"+t,title:e.hostname,onClick:function(){return n.changeImport("console","Inventory",{device_id:e.id,type:e.type})}})}))),n.state.rack_id&&u.a.createElement(h.NavButton,{key:"dev_nav_rack",title:n.state.name,onClick:function(){return n.changeImport("rack","Layout",{id:n.state.rack_id})}}),u.a.createElement(h.NavButton,{key:"dev_nav_maps",title:"Maps",onClick:function(){return n.changeImport("visualize","List",{})},style:{float:"right"}}),u.a.createElement(h.NavDropDown,{key:"dev_nav_ipam",title:"IPAM",style:{float:"right"}},u.a.createElement(h.NavDropButton,{key:"dev_nav_nets",title:"Networks",onClick:function(){return n.changeImport("ipam","NetworkList",{})}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_isrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DHCP"})}})),u.a.createElement(h.NavDropDown,{key:"dev_nav_dns",title:"DNS",style:{float:"right"}},u.a.createElement(h.NavDropButton,{key:"dev_nav_doms",title:"Domains",onClick:function(){return n.changeImport("dns","DomainList",{})}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_dsrv",title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"NAMESERVER"})}}),u.a.createElement(h.NavDropButton,{key:"dev_nav_recs",title:"Recursors",onClick:function(){return n.changeImport("server","List",{type:"RECURSOR"})}}))))},n.changeContent=function(e){return n.setState({content:e})},n.state={pdu:[],console:[],name:"N/A",rack_id:void 0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.rack_id?Object(d.d)("api/rack/inventory",{id:this.props.rack_id}).then((function(t){Object.assign(e.state,Object(i.a)({rack_id:e.props.rack_id},t)),e.compileNavItems()})):this.compileNavItems()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(e,t,a){var i=this;n(25)("./"+e+".jsx").then((function(n){var r=n[t];i.setState({content:u.a.createElement(r,Object.assign({key:e+"_"+t},a))})}))}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.state.content)}}]),a}(l.Component);k.contextType=m.RimsContext;var _=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).changeContent=function(e){return i.props.changeSelf(e)},i.onChange=function(e){return i.setState(Object(a.a)({},e.target.name,e.target.value))},i.state={field:"ip",search:""},i}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return u.a.createElement(m.LineArticle,{key:"ds_art",header:"Device Search"},u.a.createElement(p.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},u.a.createElement("optgroup",{label:"Group"},u.a.createElement("option",{value:"hostname"},"Hostname"),u.a.createElement("option",{value:"type"},"Type")),u.a.createElement("optgroup",{label:"Unique"},u.a.createElement("option",{value:"id"},"ID"),u.a.createElement("option",{value:"ip"},"IP"),u.a.createElement("option",{value:"mac"},"MAC"),u.a.createElement("option",{value:"ipam_id"},"IPAM ID"))),u.a.createElement(p.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),u.a.createElement(f.SearchButton,{key:"ds_btn_search",onClick:function(){return e.changeContent(u.a.createElement(y,Object.assign({key:"device_list"},e.state)))},title:"Search devices"}))}}]),n}(l.Component),y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.setState({content:e})},a.sortList=function(e){"hostname"===e?a.state.data.sort((function(e,t){return e.hostname.localeCompare(t.hostname)})):a.state.data.sort((function(e,t){return e.ip&&t.ip?Number(e.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join(""))-Number(t.ip.split(".").map((function(e){return"000".concat(e).slice(-3)})).join("")):e.ip?1:e.hostname.localeCompare(t.hostname)})),a.setState({sort:e})},a.listItem=function(e){return[e.ip,u.a.createElement(f.HrefButton,{key:"dl_btn_info_"+e.id,text:e.hostname,onClick:function(){return a.changeContent(u.a.createElement(E,{key:"di_"+e.id,id:e.id,changeSelf:a.changeContent}))},title:e.id}),u.a.createElement(u.a.Fragment,null,u.a.createElement(m.StateLeds,{key:"state",state:e.ip_state?e.ip_state:e.if_state}),u.a.createElement(f.InfoButton,{key:"info",onClick:function(){return a.changeContent(u.a.createElement(E,{key:"di_"+e.id,id:e.id,changeSelf:a.changeContent}))},title:e.id}),u.a.createElement(f.DeleteButton,{key:"del",onClick:function(){return a.deleteList(e.id)},title:"Delete device"}))]},a.deleteList=function(e){return window.confirm("Really delete device "+e+"?")&&Object(d.d)("api/device/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.state={data:null,content:null,sort:e.hasOwnProperty("sort")?e.sort:"hostname",rack_id:a.props.rack_id,searchfield:"",field:a.props.field,search:a.props.search},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/list",{sort:this.state.sort,rack_id:this.state.rack_id,field:this.state.field,search:this.state.search}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data,n=this.state.searchfield.toLowerCase(),a=0===n.length?t:t.filter((function(e){return e.hostname.toLowerCase().includes(n)||e.ip&&e.ip.includes(n)})),i=[u.a.createElement(f.HeaderButton,{key:"dl_btn_ip",text:"IP",highlight:"ip"===this.state.sort,onClick:function(){return e.sortList("ip")}}),u.a.createElement(f.HeaderButton,{key:"dl_btn_hostname",text:"Hostname",highlight:"hostname"===this.state.sort,onClick:function(){return e.sortList("hostname")}}),""];return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.MemoContentList,{key:"mcl",header:"Device List",thead:i,listItem:this.listItem,trows:a},u.a.createElement(f.ReloadButton,{key:"reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.ItemsButton,{key:"items",onClick:function(){Object.assign(e.state,{rack_id:void 0,field:void 0,search:void 0}),e.componentDidMount()},title:"List all items"}),u.a.createElement(f.AddButton,{key:"add",onClick:function(){return e.changeContent(u.a.createElement(B,{key:"dn_new",ip:"0.0.0.0"}))},title:"Add device"}),u.a.createElement(f.SearchButton,{key:"devices",onClick:function(){return e.changeContent(u.a.createElement(x,{key:"device_discover"}))},title:"Discover new devices"}),u.a.createElement(p.SearchInput,{key:"search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search devices"})),u.a.createElement(m.ContentData,{key:"cd"},this.state.content))}return u.a.createElement(m.Spinner,null)}}]),n}(l.Component),E=function(e){Object(s.a)(l,e);var t=Object(c.a)(l);function l(e){var o;return Object(r.a)(this,l),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.changeContent=function(e){return o.setState({content:e})},o.changeSelf=function(e){return o.props.changeSelf(e)},o.updateInfo=function(){return Object(d.d)("api/device/info",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.reload=function(){o.setState({rack:void 0,vm:void 0}),Object(d.d)("api/device/info",{id:o.props.id}).then((function(e){return o.setState(e)}))},o.lookupInfo=function(){o.setState({content:u.a.createElement(m.Spinner,null),result:""}),Object(d.d)("api/device/info",{id:o.props.id,op:"lookup"}).then((function(e){return o.setState(Object(i.a)({},e,{content:null}))}))},o.changeIpam=function(e){return n.e(2).then(n.bind(null,43)).then((function(t){return o.changeContent(u.a.createElement(t.AddressEvents,{key:"address_eventes",id:e,changeSelf:o.changeContent}))}))},o.changeInterfaces=function(){return n.e(1).then(n.bind(null,39)).then((function(e){return o.changeContent(u.a.createElement(e.List,{key:"interface_list",device_id:o.props.id,changeSelf:o.changeContent}))}))},o.changeVisualize=function(){return n.e(3).then(n.bind(null,41)).then((function(e){return o.changeSelf(u.a.createElement(e.Edit,{key:"viz_id_"+o.props.id,type:"device",changeSelf:o.changeSelf,id:o.props.id}))}))},o.state={data:void 0,found:!0,content:null,navconf:!1},o}return Object(o.a)(l,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/info",{id:this.props.id,extra:["types","classes"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data,n=this.state.extra,a=!("vm"!==t.class||!this.state.vm)&&this.state.vm,i=!(!this.state.rack||"vm"===t.class)&&this.state.rack,r=this.props.changeSelf,o=n.interface_ip,c=n.functions.length>0?n.functions.split(","):[],s=this.state.types.find((function(e){return e.id===parseInt(t.type_id)}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.InfoArticle,{key:"di_ia",header:"Device"},u.a.createElement(m.InfoColumns,{key:"ic_info",style:{float:"left"}},u.a.createElement(p.TextLine,{key:"hostname",id:"hostname",text:t.hostname}),u.a.createElement(p.TextInput,{key:"mac",id:"mac",label:"MAC",value:t.mac,title:"System MAC",onChange:this.onChange}),t.management_id&&u.a.createElement(p.TextLine,{key:"if_mac",id:"if_mac",label:"Mgmt MAC",text:n.interface_mac,title:"Management Interface MAC"}),t.management_id&&u.a.createElement(p.TextLine,{key:"if_ip",id:"if_ip",label:"Mgmt IP",text:n.interface_ip}),t.management_id&&u.a.createElement(p.StateLine,{key:"state",id:"state",state:[n.if_state,n.ip_state]})),u.a.createElement(m.InfoColumns,{key:"ic_extra",style:{float:"left"}},u.a.createElement(p.SelectInput,{key:"class",id:"class",value:t.class,onChange:this.onChange},this.state.classes.map((function(e){return u.a.createElement("option",{key:e,value:e},e)}))),u.a.createElement(p.SelectInput,{key:"type_id",id:"type_id",label:"Type",value:t.type_id,onChange:this.onChange},this.state.types.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.TextInput,{key:"model",id:"model",value:t.model,onChange:this.onChange,extra:t.model}),u.a.createElement(p.TextLine,{key:"version",id:"version",text:t.version}),u.a.createElement(p.TextInput,{key:"serial",id:"serial",label:"S/N",value:t.serial,onChange:this.onChange})),u.a.createElement(m.InfoColumns,{key:"ic_rack",style:{float:"left"}},i&&u.a.createElement(p.TextLine,{key:"pos",id:"rack_pos",label:"Rack/Pos",text:"".concat(i.rack_name," (").concat(i.rack_unit,")")}),i&&u.a.createElement(p.TextLine,{key:"size",id:"rack_size",label:"Size (U)",text:i.rack_size}),i&&u.a.createElement(p.TextLine,{key:"con",id:"rack_con",label:"TS/Port",text:"".concat(i.console_name," (").concat(i.console_port,")")}),i&&this.state.pems.map((function(e){return u.a.createElement(p.TextLine,{key:e.id,id:"pem_"+e.id,label:e.name+" PDU",text:"".concat(e.pdu_name," (").concat(e.pdu_unit,")")})}))),u.a.createElement(m.InfoColumns,{key:"ic_vm",style:{float:"left"}},a&&u.a.createElement(p.TextLine,{key:"name",id:"vm_name",label:"VM Name",text:a.name}),a&&u.a.createElement(p.TextLine,{key:"host",id:"vm_host",label:"VM Host",text:a.host}),a&&u.a.createElement(p.TextLine,{key:"uuid",id:"vm_uuid",label:"VM UUID",text:a.device_uuid,style:{maxWidth:170},extra:a.device_uuid}),a&&u.a.createElement(p.TextLine,{key:"uuhost",id:"vm_uuhost",label:"Host UUID",text:a.server_uuid,style:{maxWidth:170},extra:a.server_uuid})),u.a.createElement(m.InfoColumns,{key:"ic_text",style:{clear:"both"}},u.a.createElement(p.TextInput,{key:"comment",id:"comment",value:t.comment,onChange:this.onChange}),u.a.createElement(p.UrlInput,{key:"url",id:"url",label:"URL",value:t.url,onChange:this.onChange})),u.a.createElement(f.ReloadButton,{key:"reload",onClick:function(){return e.reload()}}),u.a.createElement(f.SaveButton,{key:"save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(f.ConfigureButton,{key:"edit",onClick:function(){return e.setState({navconf:!e.state.navconf})},title:"Toggle config mode"}),u.a.createElement(f.StartButton,{key:"cont",onClick:function(){return e.changeContent(u.a.createElement(j,{key:"device_control",id:e.props.id}))},title:"Device control"}),u.a.createElement(f.CheckButton,{key:"conf",onClick:function(){return e.changeContent(u.a.createElement(w,{key:"device_configure",id:e.props.id}))},title:"Configuration template"}),r&&u.a.createElement(f.NetworkButton,{key:"netw",onClick:function(){return e.changeVisualize()},title:"Connectivity map"}),o&&u.a.createElement(f.SearchButton,{key:"search",onClick:function(){return e.lookupInfo()},title:"Information lookup"}),o&&u.a.createElement(f.LogButton,{key:"logs",onClick:function(){return e.changeContent(u.a.createElement(D,{key:"device_logs",id:e.props.id}))},title:"Logs"}),c.includes("manage")&&u.a.createElement(f.GoButton,{key:"manage",onClick:function(){return e.context.changeMain({module:e.state.extra.type_base,function:"Manage",args:{device_id:e.props.id,type:e.state.extra.type_name}})},title:"Manage "+t.hostname}),o&&u.a.createElement(f.TermButton,{key:"ssh",onClick:function(){return window.open("ssh://".concat(n.username,"@").concat(n.interface_ip),"_self")},title:"SSH connection"}),o&&u.a.createElement(f.HealthButton,{key:"health",onClick:function(){return e.changeIpam(e.state.extra.ipam_id)},title:"IP health report"}),i&&i.console_url&&u.a.createElement(f.TermButton,{key:"console",onClick:function(){return window.open(i.console_url,"_self")},title:"Serial Connection"}),t.url&&u.a.createElement(f.UiButton,{key:"ui",onClick:function(){return window.open(t.url,"_blank")},title:"Web UI"}),u.a.createElement(m.Result,{key:"result",result:JSON.stringify(this.state.update)})),u.a.createElement(h.NavBar,{key:"device_navigation",id:"di_navigation"},this.state.navconf&&u.a.createElement(h.NavButton,{key:"management",title:"Management",onClick:function(){return e.changeContent(u.a.createElement(g,{key:"device_configure",id:e.props.id}))}}),!this.state.navconf&&u.a.createElement(h.NavButton,{key:"interfaces",title:"Interfaces",onClick:function(){return e.changeInterfaces()}}),!this.state.navconf&&"network"===s.base&&o&&u.a.createElement(h.NavButton,{key:"fdb",title:"FDB",onClick:function(){return e.changeContent(u.a.createElement(v.Device,{key:"fdb_device",id:e.props.id,ip:n.interface_ip,type:s.name,changeSelf:e.changeContent}))}}),this.state.navconf&&["infrastructure","out-of-band"].includes(t.class)&&u.a.createElement(h.NavButton,{key:"rack",title:"Rack",onClick:function(){return e.changeContent(u.a.createElement(C,{key:"device_rack_info",device_id:e.props.id}))}}),this.state.navconf&&["device","infrastructure","out-of-band"].includes(t.class)&&u.a.createElement(h.NavButton,{key:"pems",title:"PEMs",onClick:function(){return e.changeContent(u.a.createElement(b,{key:"device_pem_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),this.state.navconf&&u.a.createElement(h.NavButton,{key:"stats",title:"Statistics",onClick:function(){return e.changeContent(u.a.createElement(O,{key:"device_statistics_list",device_id:e.props.id,changeSelf:e.changeContent}))}}),!this.state.navconf&&c.filter((function(e){return"manage"!==e})).map((function(t,n){return u.a.createElement(h.NavButton,{key:"nav_"+n,title:t.replace("_"," "),onClick:function(){return e.changeContent(u.a.createElement(F,{key:"dev_func_"+t,id:e.props.id,op:t,type:e.state.extra.type_name}))}})}))),this.state.content)}return u.a.createElement(m.Spinner,null)}}]),l}(l.Component);E.contextType=m.RimsContext;var g=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.changeContent=function(e){return o.setState({content:e})},o.updateInfo=function(){return Object(d.d)("api/device/extended",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={data:void 0,found:!0,content:null},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/extended",{id:this.props.id,extra:["domains"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data&&this.state.domains?u.a.createElement(m.InfoArticle,{key:"d_conf_art",header:"Management Configuration"},u.a.createElement(m.InfoColumns,{key:"d_conf_ic"},u.a.createElement(p.TextInput,{key:"d_conf_hostname",id:"hostname",value:this.state.data.hostname,onChange:this.onChange}),u.a.createElement(p.SelectInput,{key:"d_conf_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.SelectInput,{key:"d_conf_management_id",id:"management_id",label:"Mgmt Interface",value:this.state.data.management_id,onChange:this.onChange},this.state.interfaces.map((function(e,t){return u.a.createElement("option",{key:t,value:e.interface_id},"".concat(e.name," (").concat(e.ip,")"))}))),u.a.createElement(p.TextLine,{key:"id",id:"id",label:"Local ID",text:this.props.id,title:"Database ID"}),u.a.createElement(p.TextLine,{key:"snmp",id:"snmp",label:"SNMP",text:this.state.data.snmp}),u.a.createElement(p.TextLine,{key:"d_conf_oid",id:"oid",label:"Priv OID",text:this.state.extra.oid}),u.a.createElement(p.TextLine,{key:"d_conf_oui",id:"oui",label:"System OUI",text:this.state.extra.oui})),u.a.createElement(f.SaveButton,{key:"d_conf_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(m.Result,{key:"d_conf_result",result:this.state.status})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),C=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.updateInfo=function(){return Object(d.d)("api/device/rack",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/rack",{device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.data.rack_id&&"NULL"!==this.state.data.rack_id;return u.a.createElement(m.InfoArticle,{key:"d_rack_art",header:"Rack"},u.a.createElement(m.InfoColumns,{key:"d_rack_ic"},u.a.createElement(p.SelectInput,{key:"d_rack_id",id:"rack_id",label:"Rack ID",value:this.state.data.rack_id,onChange:this.onChange},this.state.racks.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),t&&u.a.createElement(p.TextInput,{key:"d_rack_size",id:"rack_size",label:"Size",value:this.state.data.rack_size,onChange:this.onChange,title:"Size of device in U"}),t&&u.a.createElement(p.TextInput,{key:"d_rack_unit",id:"rack_unit",label:"Unit",value:this.state.data.rack_unit,onChange:this.onChange,title:"First unit of placement"}),t&&u.a.createElement(p.SelectInput,{key:"d_rack_con_id",id:"console_id",label:"Console",value:this.state.data.console_id,onChange:this.onChange},this.state.consoles.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.hostname)}))),t&&u.a.createElement(p.TextInput,{key:"d_rack_con_port",id:"console_port",label:"Console Port",value:this.state.data.console_port,onChange:this.onChange})),u.a.createElement(f.SaveButton,{key:"d_rack_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}))}return u.a.createElement(m.Spinner,null)}}]),n}(l.Component),b=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.props.changeSelf(e)},a.deleteList=function(e){return window.confirm("Really delete PEM?")&&Object(d.d)("api/pem/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.listItem=function(e){return[e.id,e.name,e.pdu_id,e.pdu_name,e.pdu_slot,e.pdu_unit,u.a.createElement(u.a.Fragment,null,u.a.createElement(f.InfoButton,{key:"info",onClick:function(){return a.changeContent(u.a.createElement(S,{key:"pem_info_"+e.id,id:e.id,device_id:a.props.device_id,changeSelf:a.changeContent}))},title:"Edit PEM information"}),u.a.createElement(f.DeleteButton,{key:"del",onClick:function(){return a.deleteList(e.id)},title:"Delete PEM"}))]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/pem/list",{device_id:this.props.device_id,lookup:!0}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(m.ContentReport,{key:"pems",header:"PEMs",thead:["ID","Name","PDU ID","PDU Name","PDU Slot","PDU Unit",""],trows:this.state.data,listItem:this.listItem},u.a.createElement(f.ReloadButton,{key:"pems_btn_reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.AddButton,{key:"pems_btn_add",onClick:function(){return e.changeContent(u.a.createElement(S,{key:"pem_new",id:"new",device_id:e.props.device_id,changeSelf:e.changeContent}))},title:"Add PEM"})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),S=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.updateInfo=function(){return Object(d.d)("api/pem/info",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/pem/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)})),Object(d.d)("api/pdu/list",{device_id:this.props.device_id,empty:!0}).then((function(t){return e.setState({pdus:t.data})}))}},{key:"render",value:function(){var e=this;if(this.state.data&&this.state.pdus){var t=this.state.pdus.find((function(t){return parseInt(t.device_id)===parseInt(e.state.data.pdu_id)})),n=[];if(t)for(var a=0;a<t.slots;a++)n.push({id:a,name:t["".concat(a,"_slot_name")]});return u.a.createElement(m.InfoArticle,{key:"d_pem_art",header:"PEM"},u.a.createElement(m.InfoColumns,{key:"d_pem_ic"},u.a.createElement(p.TextInput,{key:"d_pem_name",id:"name",value:this.state.data.name,onChange:this.onChange}),u.a.createElement(p.SelectInput,{key:"d_pem_pdu_id",id:"pdu_id",label:"PDU",value:this.state.data.pdu_id,onChange:this.onChange},this.state.pdus.map((function(e,t){return u.a.createElement("option",{key:t,value:e.device_id},e.name)}))),u.a.createElement(p.SelectInput,{key:"d_pem_pdu_slot",id:"pdu_slot",label:"Slot",value:this.state.data.pdu_slot,onChange:this.onChange},n.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.TextInput,{key:"d_pem_pdu_unit",id:"pdu_unit",label:"Unit",value:this.state.data.pdu_unit,onChange:this.onChange})),u.a.createElement(f.BackButton,{key:"d_pem_btn_back",onClick:function(){return e.props.changeSelf(u.a.createElement(b,{key:"device_pem_list",device_id:e.props.device_id,changeSelf:e.props.changeSelf}))}}),u.a.createElement(f.SaveButton,{key:"d_pem_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(m.Result,{key:"d_pem_result",result:this.state.update?this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update):""}))}return u.a.createElement(m.Spinner,null)}}]),n}(l.Component),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).loadList=function(e){return Object(d.d)("api/statistics/list",{device_id:a.props.device_id}).then((function(t){return a.setState(e?Object(i.a)({},t,{result:"",inserts:""}):t)}))},a.changeContent=function(e){return a.props.changeSelf(e)},a.deleteList=function(e){return window.confirm("Really delete statistics point?")&&Object(d.d)("api/statistics/delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.lookupStats=function(){return Object(d.d)("api/statistics/lookup",{device_id:a.props.device_id}).then((function(e){a.setState(e),a.loadList()}))},a.listItem=function(e){return[e.id,e.measurement,e.tags,e.name,e.oid,u.a.createElement(u.a.Fragment,null,u.a.createElement(f.InfoButton,{key:"info",onClick:function(){return a.changeContent(u.a.createElement(I,{key:"statistics_info_"+e.id,id:e.id,device_id:a.props.device_id}))},title:"Edit data point"}),u.a.createElement(f.DeleteButton,{key:"del",onClick:function(){return a.deleteList(e.id)},title:"Delete data point"}))]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(m.ContentReport,{key:"cr_stats",header:"Device statistics",thead:["ID","Measurement","Tags","Name","OID",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},u.a.createElement(f.ReloadButton,{key:"reload",onClick:function(){return e.loadList(!0)}}),u.a.createElement(f.SearchButton,{key:"lookup",onClick:function(){return e.lookupStats()},title:"Lookup device type stats"}),u.a.createElement(f.AddButton,{key:"add",onClick:function(){return e.changeContent(u.a.createElement(I,{key:"stats_new_",id:"new",device_id:e.props.device_id}))},title:"Add statistics"})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),I=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.updateInfo=function(){return Object(d.d)("api/statistics/info",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/statistics/info",{id:this.props.id,device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(m.InfoArticle,{key:"d_stat_art",header:"Data point"},u.a.createElement(m.InfoColumns,{key:"d_stat_ic"},u.a.createElement(p.TextInput,{key:"d_stat_measurement",id:"measurement",value:this.state.data.measurement,onChange:this.onChange,title:"Group, or measurement, that the data point belongs to"}),u.a.createElement(p.TextInput,{key:"d_stat_tags",id:"tags",value:this.state.data.tags,onChange:this.onChange,title:"Tags are comma separated values that extend TSDB grouping"}),u.a.createElement(p.TextInput,{key:"d_stat_name",id:"name",value:this.state.data.name,onChange:this.onChange,title:"Data point name"}),u.a.createElement(p.TextInput,{key:"d_stat_oid",id:"oid",value:this.state.data.oid,onChange:this.onChange})),u.a.createElement(f.SaveButton,{key:"d_stat_btn_save",onClick:function(){return e.updateInfo()},title:"Save"}),u.a.createElement(m.Result,{key:"d_stat_result",result:this.state.update&&this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update)})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).operationDev=function(e,t){window.confirm(t)&&(a.setState({wait:u.a.createElement(m.Spinner,null)}),Object(d.d)("api/device/control",{id:a.props.id,device_op:e}).then((function(e){return a.setState(Object(i.a)({},e,{wait:null}))})))},a.operationPem=function(e,t,n){window.confirm(n)&&(a.setState({wait:u.a.createElement(m.Spinner,null)}),Object(d.d)("api/device/control",{id:a.props.id,pem_op:t,pem_id:e}).then((function(e){return a.setState(Object(i.a)({},e,{wait:null}))})))},a.lookupState=function(e){return console.log("State lookup TODO")},a.state={pems:[]},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/control",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return u.a.createElement(m.InfoArticle,{key:"ia_dc",header:"Device Control"},u.a.createElement(m.InfoColumns,{key:"ic"},u.a.createElement("label",{htmlFor:"reboot"},"Reboot:"),u.a.createElement(f.ReloadButton,{id:"reboot",key:"reboot",onClick:function(){return e.operationDev("reboot","Really reboot?")},title:"Restart device"}),u.a.createElement("label",{htmlFor:"shutdown"},"Shutdown:"),u.a.createElement(f.ShutdownButton,{id:"shutdown",key:"shutdown",onClick:function(){return e.operationDev("shutdown","Really shutdown?")},title:"Shutdown"}),this.state.pems.map((function(t){return"off"===t.state?u.a.createElement(l.Fragment,{key:t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.StartButton,{key:"dc_btn_start_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"on","Power on PEM?")},title:"Power ON"})):"on"===t.state?u.a.createElement(l.Fragment,{key:t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.ShutdownButton,{key:"dc_btn_stop_"+t.id,id:t.id,onClick:function(){return e.operationPem(t.id,"off","Power off PEM?")},title:"Power OFF"})):u.a.createElement(l.Fragment,{key:t.id},u.a.createElement("label",{htmlFor:t.id},t.name,":"),u.a.createElement(f.SearchButton,{key:"dc_btn_lookup_"+t.id,id:t.id,onClick:function(){return e.lookupState(t.id)},title:"Lookup State"}))}))),u.a.createElement(m.Result,{key:"result",result:JSON.stringify(this.state.result)}),this.state.wait)}}]),n}(l.Component),D=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).clearLog=function(){return Object(d.d)("api/device/log_clear",{id:e.props.id}).then((function(t){return t.deleted&&e.setState({data:[]})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/log_get",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state?u.a.createElement(m.ContentReport,{key:"dev_log_cr",header:"Devices",thead:["Time","Message"],trows:this.state.data,listItem:function(e){return[e.time,e.message]}},u.a.createElement(f.DeleteButton,{key:"devlog_btn_delete",onClick:function(){return e.clearLog()},title:"Clear device logs"})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),w=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/configuration_template",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement(m.CodeArticle,{key:"dtemp_art"},"OK"===this.state.status?this.state.data.join("\n"):this.state.info):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.addDevice=function(){o.state.data.hostname&&Object(d.d)("api/device/new",o.state.data).then((function(e){return o.setState({result:JSON.stringify(e)})}))},o.searchIP=function(){o.state.data.ipam_network_id&&Object(d.d)("api/ipam/address_find",{network_id:o.state.data.ipam_network_id}).then((function(e){return o.setState({data:Object(i.a)({},o.state.data,{ip:e.ip})})}))},o.state={data:{ip:o.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:o.props.ipam_network_id,hostname:""},found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})})),Object(d.d)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(d.d)("api/device/class_list").then((function(t){return e.setState({classes:t.data})}))}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({data:{ip:this.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:this.props.ipam_network_id,hostname:""}})}},{key:"render",value:function(){var e=this;return this.state.domains&&this.state.classes&&this.state.networks?u.a.createElement(m.InfoArticle,{key:"dn_art",header:"Device Add"},u.a.createElement(m.InfoColumns,{key:"dn_content"},u.a.createElement(p.TextInput,{key:"dn_hostname",id:"hostname",value:this.state.data.hostname,placeholder:"Device hostname",onChange:this.onChange}),u.a.createElement(p.SelectInput,{key:"dn_class",id:"class",label:"Device Class",value:this.state.data.class,onChange:this.onChange},this.state.classes.map((function(e){return u.a.createElement("option",{key:e,value:e},e)}))),u.a.createElement(p.SelectInput,{key:"dn_a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.SelectInput,{key:"dn_if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.data.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.SelectInput,{key:"dn_ipam_network_id",id:"ipam_network_id",label:"Interface Network",value:this.state.data.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),u.a.createElement(p.TextInput,{key:"dn_ip",id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange}),u.a.createElement(p.TextInput,{key:"dn_mac",id:"mac",label:"MAC",value:this.state.data.mac,onChange:this.onChange})),u.a.createElement(f.StartButton,{key:"dn_btn_start",onClick:function(){return e.addDevice()},title:"Add device"}),u.a.createElement(f.SearchButton,{key:"dn_btn_search",onClick:function(){return e.searchIP()},title:"Find available IP"}),u.a.createElement(m.Result,{key:"dn_result",result:this.state.result})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),x=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).onChange=function(e){return i.setState(Object(a.a)({},e.target.name,e.target.value))},i.changeContent=function(e){return i.setState({content:e})},i.state={ipam_network_id:void 0,a_domain_id:void 0,content:null},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/ipam/network_list").then((function(t){return e.setState({networks:t.data})})),Object(d.d)("api/dns/domain_list",{filter:"forward"}).then((function(t){return e.setState({domains:t.data})}))}},{key:"runDiscovery",value:function(){var e=this;this.setState({content:u.a.createElement(m.Spinner,null)}),Object(d.d)("api/device/discover",{network_id:this.state.ipam_network_id,a_domain_id:this.state.a_domain_id,if_domain_id:this.state.if_domain_id}).then((function(t){return e.setState({content:u.a.createElement(m.CodeArticle,{key:"dd_result"},JSON.stringify(t,null,2))})}))}},{key:"render",value:function(){var e=this;return this.state.networks&&this.state.domains?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.InfoArticle,{key:"ia_dd",header:"Device Discovery"},u.a.createElement(m.InfoColumns,{key:"ic"},u.a.createElement(p.SelectInput,{key:"ipam_network_id",id:"ipam_network_id",label:"Network",value:this.state.ipam_network_id,onChange:this.onChange},this.state.networks.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),u.a.createElement(p.SelectInput,{key:"a_domain_id",id:"a_domain_id",label:"Host Domain",value:this.state.a_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement(p.SelectInput,{key:"if_domain_id",id:"if_domain_id",label:"Interface Domain",value:this.state.if_domain_id,onChange:this.onChange},this.state.domains.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)})))),u.a.createElement(f.StartButton,{key:"start",onClick:function(){return e.runDiscovery()},title:"Start discovery"})),u.a.createElement(h.NavBar,{key:"dd_navigation",id:"dd_navigation"}),this.state.content):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),M=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).listItem=function(e){return[e.id,e.hostname,e.class,e.ip,e.mac,e.oui,e.type_name,e.oid,e.serial,u.a.createElement(m.StateLeds,{key:"dr_"+e.id,state:e.state})]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/list",{extra:["system","mac","type","oui","class"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state?u.a.createElement(m.ContentReport,{key:"dev_cr",header:"Devices",thead:["ID","Hostname","Class","IP","MAC","OUI","Type","OID","Serial","State"],trows:this.state.data,listItem:this.listItem}):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),L=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).changeContent=function(e){return a.setState({content:e})},a.changeSelf=function(e){return a.props.changeSelf(e)},a.listItem=function(e){return[e.base,u.a.createElement(f.HrefButton,{key:"tl_btn_"+e.name,text:e.name,onClick:function(){return a.changeSelf(u.a.createElement(y,{key:"device_list",field:"type",search:e.name}))}}),e.icon]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/type_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.ContentList,{key:"cl",header:"Device Types",thead:["Class","Name","Icon"],trows:this.state.data,listItem:this.listItem}),u.a.createElement(m.ContentData,{key:"cd"},this.state.content)):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),N=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).syncModels=function(){return Object(d.d)("api/device/model_list",{op:"sync"}).then((function(e){return a.setState(e)}))},a.listItem=function(e){return[e.id,e.name,e.type,u.a.createElement(u.a.Fragment,null,u.a.createElement(f.ConfigureButton,{key:"info",onClick:function(){return a.changeContent(u.a.createElement(T,{key:"model_info_"+e.id,id:e.id}))},title:"Edit model information"}),u.a.createElement(f.DeleteButton,{key:"del",onClick:function(){return a.deleteList(e.id)},title:"Delete model"}))]},a.changeContent=function(e){return a.setState({content:e})},a.deleteList=function(e){return window.confirm("Really delete model?")&&Object(d.d)("api/device/model_delete",{id:e}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.id!==e})),content:null})}))},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/model_list").then((function(t){return e.setState(Object(i.a)({},t,{result:"OK"}))}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.ContentList,{key:"cl",header:"Device Models",thead:["ID","Model","Type",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},u.a.createElement(f.ReloadButton,{key:"reload",onClick:function(){return e.componentDidMount()}}),u.a.createElement(f.SyncButton,{key:"sync",onClick:function(){return e.syncModels()},title:"Resync models"})),u.a.createElement(m.ContentData,{key:"cd"},this.state.content)):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),T=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.updateInfo=function(){return Object(d.d)("api/device/model_info",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/model_info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?u.a.createElement(m.InfoArticle,{key:"dm_art",header:"Device Model"},u.a.createElement(m.InfoColumns,{key:"dm_content"},u.a.createElement(p.TextLine,{key:"dm_name",id:"name",text:this.state.data.name}),u.a.createElement(p.TextLine,{key:"dm_type",id:"type",text:this.state.extra.type}),u.a.createElement(p.TextInput,{key:"dm_defaults_file",id:"defaults_file",label:"Default File",value:this.state.data.defaults_file,onChange:this.onChange}),u.a.createElement(p.TextInput,{key:"dm_image_file",id:"image_file",label:"Image  File",value:this.state.data.image_file,onChange:this.onChange})),u.a.createElement(p.TextAreaInput,{key:"dm_parameters",id:"parameters",onChange:this.onChange,value:this.state.data.parameters}),u.a.createElement(f.SaveButton,{key:"dm_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),A=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.ouiSearch=function(){Object(d.d)("api/master/oui_info",{oui:o.state.data.oui}).then((function(e){return o.setState({content:u.a.createElement(m.InfoArticle,{key:"os_art"},u.a.createElement(m.InfoColumns,{key:"os_cont"},u.a.createElement("label",{htmlFor:"oui"},"OUI:"),u.a.createElement("span",{id:"oui"},e.data.oui),u.a.createElement("label",{htmlFor:"company"},"Company:"),u.a.createElement("span",{id:"company"},e.data.company)))})}))},o.state={data:{oui:""},content:null},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return u.a.createElement(m.Flex,{key:"flex"},u.a.createElement(m.LineArticle,{key:"os_art"},"Type MAC address to find ",u.a.createElement(p.TextInput,{key:"oui",id:"oui",onChange:this.onChange,value:this.state.data.oui,placeholder:"00:00:00"}),u.a.createElement(f.SearchButton,{key:"os_btn_search",onClick:function(){return e.ouiSearch()},title:"Search for OUI"})),this.state.content)}}]),n}(l.Component),R=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/master/oui_list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.data?u.a.createElement(m.ContentReport,{key:"oui_list_cr",header:"OUI",thead:["oui","company"],trows:this.state.data,listItem:function(e){return["".concat(e.oui.substring(0,2),":").concat(e.oui.substring(2,4),":").concat(e.oui.substring(4,6)),e.company]}}):u.a.createElement(m.Spinner,null)}}]),n}(l.Component),F=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(d.d)("api/device/function",{op:this.props.op,id:this.props.id,type:this.props.type}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){if(this.state){if("OK"===this.state.status){if(this.state.data.length>0){var e=Object.keys(this.state.data[0]);return u.a.createElement(m.ContentReport,{key:"df_cr",thead:e,trows:this.state.data,listItem:function(t){return e.map((function(e){return t[e]}))}})}return u.a.createElement(m.InfoArticle,{key:"df_art"},"No Data")}return u.a.createElement(m.CodeArticle,{key:"df_art"},"Error in devdata: ",this.state.info)}return u.a.createElement(m.Spinner,null)}}]),n}(l.Component)},42:function(e,t,n){"use strict";n.r(t),n.d(t,"Search",(function(){return p})),n.d(t,"Device",(function(){return f})),n.d(t,"List",(function(){return v}));var a=n(18),i=n(3),r=n(4),o=n(5),c=n(6),s=n(0),l=n.n(s),u=n(12),d=n(13),m=n(15),h=n(19),p=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).changeContent=function(e){return r.props.changeSelf(e)},r.onChange=function(e){return r.setState(Object(a.a)({},e.target.name,e.target.value))},r.state={field:"mac",search:""},r}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(d.LineArticle,{key:"fs_art",header:"FDB Search"},l.a.createElement(m.SelectInput,{key:"field",id:"field",onChange:this.onChange,value:this.state.field},l.a.createElement("option",{value:"mac"},"MAC"),l.a.createElement("option",{value:"device_id"},"Device ID")),l.a.createElement(m.TextInput,{key:"search",id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"}),l.a.createElement(h.SearchButton,{key:"fs_btn_search",onClick:function(){return e.changeContent(l.a.createElement(v,Object.assign({key:"fdb_list"},e.state,{changeSelf:e.props.changeSelf})))},title:"Search FDB"}))}}]),n}(s.Component),f=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).changeContent=function(e){return r.props.changeSelf(e)},r.changeInterface=function(e){return n.e(1).then(n.bind(null,39)).then((function(t){return r.changeContent(l.a.createElement(t.Info,{key:"interface_info",device_id:r.props.id,interface_id:e,changeSelf:r.changeContent}))}))},r.listItem=function(e,t){return[e.vlan,e.snmp_index,l.a.createElement(h.HrefButton,{key:"fd_intf_"+e.interface_id,text:e.name,onClick:function(){return r.changeInterface(e.interface_id)}}),e.mac,e.oui]},r.state={wait:null,searchfield:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(u.d)("api/fdb/list",{field:"device_id",search:this.props.id,extra:["oui"]}).then((function(t){return e.setState(t)}))}},{key:"syncFDB",value:function(){var e=this;this.setState({wait:l.a.createElement(d.Spinner,null)}),Object(u.d)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(t){return e.setState({wait:null})}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.searchfield.toUpperCase(),n=0===t.length?this.state.data:this.state.data.filter((function(e){return e.mac.includes(t)}));return l.a.createElement(d.ContentReport,{key:"fd_cr",header:"FDB",thead:["VLAN","SNMP","Interface","MAC","OUI"],trows:n,listItem:this.listItem},l.a.createElement(h.ReloadButton,{key:"fd_btn_reload",onClick:function(){return e.componentDidMount()}}),l.a.createElement(h.SyncButton,{key:"fd_btn_sync",onClick:function(){return e.syncFDB()},title:"Resync FDB"}),l.a.createElement(m.SearchInput,{key:"fd_search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search MAC"}),this.state.wait)}return l.a.createElement(d.Spinner,null)}}]),a}(s.Component),v=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).changeSearch=function(e,t){return r.setState({content:l.a.createElement(k,{key:"fi_"+t,mac:e})})},r.changeVisualize=function(e){return"changeSelf"in r.props&&n.e(3).then(n.bind(null,41)).then((function(t){return r.setState({content:l.a.createElement(t.Edit,{key:"viz_id_"+e,type:"device",changeSelf:r.props.changeSelf,id:e})})}))},r.listItem=function(e,t){return[e.device_id,e.hostname,e.vlan,e.snmp_index,e.name,l.a.createElement(h.HrefButton,{key:"intf_"+t,text:e.mac,onClick:function(){return r.setState({searchfield:e.mac})}}),l.a.createElement(l.a.Fragment,null,l.a.createElement(h.InfoButton,{key:"info",onClick:function(){return r.changeSearch(e.mac,t)},title:"Find interface(s)"}),l.a.createElement(h.NetworkButton,{key:"map",onClick:function(){return r.changeVisualize(e.device_id)}}))]},r.state={searchfield:"",content:null},r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var e=this;Object(u.d)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;if(this.state.data){var t=this.state.searchfield.toUpperCase(),n=0===t.length?this.state.data:this.state.data.filter((function(e){return e.mac.includes(t)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.ContentList,{key:"cl",header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC",""],trows:n,listItem:this.listItem},l.a.createElement(h.ReloadButton,{key:"reload",onClick:function(){return e.componentDidMount()}}),l.a.createElement(m.SearchInput,{key:"search",searchFire:function(t){return e.setState({searchfield:t})},placeholder:"Search MAC",text:this.state.searchfield})),l.a.createElement(d.ContentData,{key:"cd"},this.state.content))}return l.a.createElement(d.Spinner,null)}}]),a}(s.Component),k=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(u.d)("api/fdb/search",{mac:this.props.mac}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return this.state.device?l.a.createElement(d.ContentReport,{key:"fd_cr",header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Interface","Description","OUI"],trows:this.state.interfaces,listItem:function(e){return[e.interface_id,e.name,e.description,e.oui]}}):this.state.oui?l.a.createElement(d.LineArticle,{key:"fd_oui_la",header:"Search result"},"OUI: ",this.state.oui):this.state.status?l.a.createElement(d.LineArticle,{key:"fd_oui_la",header:"Search result"},"Search result: ",this.state.info):l.a.createElement(d.Spinner,null)}}]),n}(s.Component)}}]);
//# sourceMappingURL=0.957368e3.chunk.js.map