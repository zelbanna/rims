{"version":3,"file":"static/js/682.fa6caf08.chunk.js","mappings":"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","sources":["fdb.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { post_call } from './infra/Functions.js';\nimport { Spinner, LineArticle, ContentReport, ContentList, ContentData } from './infra/UI.jsx';\nimport { TextInput, SearchField, SelectInput } from './infra/Inputs.jsx';\nimport { HrefButton, InfoButton, NetworkButton, ReloadButton, SearchButton, SyncButton } from './infra/Buttons.jsx';\n\n// ************** Search **************\n//\nexport class Search extends Component {\n  constructor(props){\n  super(props)\n  this.state = {field:'mac',search:''}\n }\n\n changeContent = (elem) => this.props.changeSelf(elem);\n\n onChange = (e) => this.setState({[e.target.name]:e.target.value})\n\n render() {\n  return <LineArticle key='fs_art' header='FDB Search'>\n   <SelectInput key='field' id='field' onChange={this.onChange} value={this.state.field}>\n    <option value='mac'>MAC</option>\n    <option value='device_id'>Device ID</option>\n   </SelectInput>\n   <TextInput key='search' id='search' onChange={this.onChange} value={this.state.search} placeholder='search' />\n   <SearchButton key='fs_btn_search' onClick={() => this.changeContent(<List key='fdb_list' {...this.state} changeSelf={this.props.changeSelf} />)} title='Search FDB' />\n  </LineArticle>\n }\n}\n\n// *************** Device *****************\n//\nexport class Device extends Component {\n constructor(props){\n  super(props)\n  this.state = {wait:null, searchfield:''}\n }\n\n changeContent = (elem) => this.props.changeSelf(elem);\n\n componentDidMount(){\n  post_call('api/fdb/list',{field:\"device_id\",search:this.props.id, extra:['oui']}).then(result => this.setState(result))\n }\n\n syncFDB(){\n  this.setState({wait:<Spinner />})\n  post_call('api/fdb/sync',{id:this.props.id, ip:this.props.ip, type:this.props.type}).then(result => result.status === 'OK' && post_call('api/fdb/list',{field:\"device_id\",search:this.props.id, extra:['oui']}).then(result => this.setState({...result, wait:null})));\n }\n\n changeInterface = (interface_id) => import('./interface.jsx').then(lib => this.changeContent(<lib.Info key='interface_info' device_id={this.props.id} interface_id={interface_id} changeSelf={this.changeContent} />))\n\n listItem = (row,idx) => [row.vlan,row.snmp_index,<HrefButton key={'fd_intf_'+row.interface_id} text={row.name} onClick={() => this.changeInterface(row.interface_id)} />,row.mac,row.oui]\n\n render(){\n  if (this.state.data) {\n   const search = this.state.searchfield.toUpperCase();\n   const data = (search.length === 0) ? this.state.data : this.state.data.filter(row => row.mac.includes(search))\n   return <ContentReport key='fd_cr' header='FDB' thead={['VLAN','SNMP','Interface','MAC','OUI']} trows={data} listItem={this.listItem}>\n    <ReloadButton key='fd_btn_reload' onClick={() => this.componentDidMount()} />\n    <SyncButton key='fd_btn_sync' onClick={() => this.syncFDB() } title='Resync FDB' />\n    <SearchField key='fd_search' searchFire={(s) => this.setState({searchfield:s})} placeholder='Search MAC' />\n    {this.state.wait}\n   </ContentReport>\n  } else\n   return <Spinner />\n }\n}\n\n// *************** List *****************\n//\nexport class List extends Component {\n constructor(props){\n  super(props)\n  this.state = {searchfield:''}\n }\n\n componentDidUpdate(prevProps){\n  if(prevProps !== this.props){\n   this.componentDidMount()\n  }\n }\n\n componentDidMount(){\n  post_call('api/fdb/list',{search:this.props.search, field:this.props.field, extra:['device_id','hostname']}).then(result => this.setState(result))\n }\n\n changeSearch = (mac,idx) => this.changeContent(<Info key='fdb_info' mac={mac} />)\n\n changeVisualize = (device_id) => ('changeSelf' in this.props && import('./visualize.jsx').then(lib => this.changeContent(<lib.Edit key={'viz_id_' + device_id} type='device' id={device_id} />)));\n\n listItem = (row,idx) => [row.device_id,row.hostname,row.vlan,row.snmp_index,row.name,<HrefButton key={'intf_'+idx} text={row.mac} onClick={() => this.setState({searchfield:row.mac})} />,<>\n   <InfoButton key='info' onClick={() => this.changeSearch(row.mac,idx)} title='Find interface(s)' />\n   <NetworkButton key='map' onClick={() => this.changeVisualize(row.device_id)} />\n  </>]\n\n render(){\n  if (this.state.data){\n   const search = this.state.searchfield.toUpperCase();\n   const data = (search.length === 0) ? this.state.data : this.state.data.filter(row => row.mac.includes(search))\n   return <>\n    <ContentList key='cl' header='FDB' thead={['ID','Hostname','VLAN','SNMP','Interface','MAC','']} trows={data} listItem={this.listItem}>\n     <ReloadButton key='reload' onClick={() => this.componentDidMount()} />\n     <SearchField key='search' searchFire={(s) => this.setState({searchfield:s})} placeholder='Search MAC' text={this.state.searchfield} />\n    </ContentList>\n    <ContentData key='cda' mountUpdate={(fun) => this.changeContent = fun} />\n   </>\n  } else\n   return <Spinner />\n }\n}\n\n// *************** Info *****************\n//\nclass Info extends Component {\n constructor(props){\n  super(props);\n  this.state = {}\n }\n\n componentDidUpdate(prevProps){\n  if (prevProps !== this.props){\n   this.componentDidMount()\n  }\n }\n\n componentDidMount(){\n  post_call('api/fdb/search',{mac:this.props.mac}).then(result => this.setState(result))\n }\n\n render(){\n  if (this.state.device)\n   return <ContentReport key='fd_cr' header={`${this.state.device.hostname} (${this.state.device.id})`} thead={['ID','Interface','Description','OUI']} trows={this.state.interfaces} listItem={(row) => [row.interface_id,row.name,row.description,row.oui]} />\n  else if (this.state.oui)\n   return <LineArticle key='fd_oui_la' header='Search result'>OUI: {this.state.oui}</LineArticle>\n  else if (this.state.status)\n   return <LineArticle key='fd_oui_la' header='Search result'>Search result: {this.state.info}</LineArticle>\n  else\n   return <Spinner />\n }\n}\n"],"names":["Search","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","changeContent","elem","changeSelf","onChange","e","setState","_defineProperty","target","name","value","state","field","search","_createClass","key","_this2","_jsxs","LineArticle","header","children","SelectInput","id","this","_jsx","TextInput","placeholder","SearchButton","onClick","List","_objectSpread","title","Component","Device","_Component2","_super2","_this3","changeInterface","interface_id","then","lib","Info","device_id","listItem","row","idx","vlan","snmp_index","HrefButton","text","mac","oui","wait","searchfield","_this4","post_call","extra","result","_this5","Spinner","ip","type","status","_this6","data","toUpperCase","length","filter","includes","ContentReport","thead","trows","ReloadButton","componentDidMount","SyncButton","syncFDB","SearchField","searchFire","s","_Component3","_super3","_this7","changeSearch","changeVisualize","Edit","hostname","_Fragment","InfoButton","NetworkButton","prevProps","_this8","_this9","ContentList","ContentData","mountUpdate","fun","_Component4","_super4","_this10","_this11","device","concat","interfaces","description","info"],"sourceRoot":""}