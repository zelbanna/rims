(this.webpackJsonprims=this.webpackJsonprims||[]).push([[0,14],{35:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return _})),n.d(e,"Info",(function(){return C})),n.d(e,"Logs",(function(){return L})),n.d(e,"New",(function(){return T})),n.d(e,"Report",(function(){return R})),n.d(e,"ModelInfo",(function(){return U}));var a=n(19),i=n(10),c=n(5),s=n(6),o=n(8),r=n(7),d=n(3),u=n.n(d),l=n(14),h=n(15),j=n(17),p=n(16),f=n(21),b=n(39),O=n(1),v=n.n(O),m=n(0),_=function(t){Object(o.a)(a,t);var e=Object(r.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).compileNavItems=function(){n.context.loadNavigation(Object(m.jsxs)(j.NavBar,{children:[Object(m.jsxs)(j.NavDropDown,{title:"Devices",children:[Object(m.jsx)(j.NavDropButton,{title:"List",onClick:function(){return n.changeContent(Object(m.jsx)(g,{rack_id:n.state.rack_id},"dl"))}},"dev_nav_list"),Object(m.jsx)(j.NavDropButton,{title:"Search",onClick:function(){return n.changeContent(Object(m.jsx)(x,{changeSelf:n.changeContent},"ds"))}},"dev_nav_srch"),Object(m.jsx)(j.NavDropButton,{title:"New",onClick:function(){return n.changeContent(Object(m.jsx)(T,{ip:"0.0.0.0"},"dn"))}},"dev_nav_new"),Object(m.jsx)(j.NavDropButton,{title:"Types",onClick:function(){return n.changeContent(Object(m.jsx)(F,{changeSelf:n.changeContent},"dtl"))}},"dev_nav_types"),Object(m.jsx)(j.NavDropButton,{title:"Models",onClick:function(){return n.changeContent(Object(m.jsx)(P,{},"dml"))}},"dev_nav_model"),Object(m.jsx)(j.NavDropButton,{title:"Logs",onClick:function(){return n.changeContent(Object(m.jsx)(L,{count:"80"},"dlogs"))}},"dev_nav_logs")]},"dev_nav_devs"),Object(m.jsxs)(j.NavDropDown,{title:"Tools",children:[Object(m.jsx)(j.NavDropButton,{title:"FDB Search",onClick:function(){return n.changeContent(Object(m.jsx)(b.Search,{changeSelf:n.changeContent},"fdb_search"))}},"dev_nav_fdbx"),Object(m.jsx)(j.NavDropButton,{title:"FDB List",onClick:function(){return n.changeContent(Object(m.jsx)(b.List,{changeSelf:n.changeContent},"fdb_list"))}},"dev_nav_fdbs"),Object(m.jsx)(j.NavDropButton,{title:"OUI Search",onClick:function(){return n.changeContent(Object(m.jsx)(E,{},"oui_search"))}},"dev_nav_ouis"),Object(m.jsx)(j.NavDropButton,{title:"OUI List",onClick:function(){return n.changeContent(Object(m.jsx)(H,{},"oui_list"))}},"dev_nav_ouil"),Object(m.jsx)(j.NavDropButton,{title:"Reservations",onClick:function(){return n.changeImport("reservation","List",{})}},"dev_nav_resv")]},"dev_nav_tools"),n.state.pdu.length>0&&Object(m.jsx)(j.NavDropDown,{title:"PDUs",children:n.state.pdu.map((function(t,e){return Object(m.jsx)(j.NavDropButton,{title:t.hostname,onClick:function(){return n.changeImport("pdu","Inventory",{device_id:t.id,type:t.type})}},"dev_nav_pdu_"+e)}))},"dev_nav_pdus"),n.state.console.length>0&&Object(m.jsx)(j.NavDropDown,{title:"Consoles",children:n.state.console.map((function(t,e){return Object(m.jsx)(j.NavDropButton,{title:t.hostname,onClick:function(){return n.changeImport("console","Inventory",{device_id:t.id,type:t.type})}},"dev_nav_console_"+e)}))},"dev_nav_consoles"),n.state.rack_id&&Object(m.jsx)(j.NavButton,{title:n.state.name,onClick:function(){return n.changeImport("rack","Layout",{id:n.state.rack_id})}},"dev_nav_rack"),Object(m.jsx)(j.NavButton,{title:"Maps",onClick:function(){return n.changeImport("visualize","List",{})},style:{float:"right"}},"dev_nav_maps"),Object(m.jsxs)(j.NavDropDown,{title:"IPAM",style:{float:"right"},children:[Object(m.jsx)(j.NavDropButton,{title:"Networks",onClick:function(){return n.changeImport("ipam","NetworkList",{})}},"dev_nav_nets"),Object(m.jsx)(j.NavDropButton,{title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DHCP"})}},"dev_nav_isrv")]},"dev_nav_ipam"),Object(m.jsxs)(j.NavDropDown,{title:"DNS",style:{float:"right"},children:[Object(m.jsx)(j.NavDropButton,{title:"Domains",onClick:function(){return n.changeImport("dns","DomainList",{})}},"dev_nav_doms"),Object(m.jsx)(j.NavDropButton,{title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"NAMESERVER"})}},"dev_nav_dsrv"),Object(m.jsx)(j.NavDropButton,{title:"Recursors",onClick:function(){return n.changeImport("server","List",{type:"RECURSOR"})}},"dev_nav_recs")]},"dev_nav_dns")]},"device_navbar"))},n.changeContent=function(t){return n.setState({content:t})},n.state={pdu:[],console:[],name:"N/A",rack_id:void 0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.rack_id?Object(l.d)("api/rack/inventory",{id:this.props.rack_id}).then((function(e){Object.assign(t.state,Object(i.a)({rack_id:t.props.rack_id},e)),t.compileNavItems()})):this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(t,e,a){var c=this;n(25)("./"+t+".jsx").then((function(n){var s=n[e];c.setState({content:Object(m.jsx)(s,Object(i.a)({},a),t+"_"+e)})}))}},{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:this.state.content})}}]),a}(d.Component);_.contextType=h.RimsContext;var x=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onChange=function(t){return i.setState(Object(a.a)({},t.target.name,t.target.value))},i.state={field:"ip",search:""},i}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(h.LineArticle,{header:"Device Search",children:[Object(m.jsxs)(p.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[Object(m.jsxs)("optgroup",{label:"Group",children:[Object(m.jsx)("option",{value:"hostname",children:"Hostname"}),Object(m.jsx)("option",{value:"type",children:"Type"})]}),Object(m.jsxs)("optgroup",{label:"Unique",children:[Object(m.jsx)("option",{value:"id",children:"ID"}),Object(m.jsx)("option",{value:"ip",children:"IP"}),Object(m.jsx)("option",{value:"mac",children:"MAC"}),Object(m.jsx)("option",{value:"interface_id",children:"Interface ID"})]})]},"field"),Object(m.jsx)(p.SearchInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),Object(m.jsx)(f.SearchButton,{onClick:function(){return t.props.changeSelf(Object(m.jsx)(g,Object(i.a)({},t.state),"device_list"))},title:"Search devices"},"ds_btn_search")]},"ds_art")}}]),n}(d.Component),g=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onChange=function(t){return i.setState(Object(a.a)({},t.target.name,t.target.value))},i.sortList=function(t){"hostname"===t?i.state.data.sort((function(t,e){return t.hostname.localeCompare(e.hostname)})):i.state.data.sort((function(t,e){return t.ip&&e.ip?Number(t.ip.split(".").map((function(t){return"000".concat(t).slice(-3)})).join(""))-Number(e.ip.split(".").map((function(t){return"000".concat(t).slice(-3)})).join("")):t.ip?1:t.hostname.localeCompare(e.hostname)})),i.setState({sort:t})},i.listItem=function(t){return[t.ip,Object(m.jsx)(f.HrefButton,{text:t.hostname,onClick:function(){return i.changeContent(Object(m.jsx)(C,{id:t.id,changeSelf:i.changeContent},"di_"+t.id))},title:t.id},"info_"+t.id),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.StateLeds,{state:t.ip_state?t.ip_state:t.if_state},"state"),Object(m.jsx)(f.InfoButton,{onClick:function(){return i.changeContent(Object(m.jsx)(C,{id:t.id,changeSelf:i.changeContent},"di_"+t.id))},title:t.id},"info"),Object(m.jsx)(f.DeleteButton,{onClick:function(){return i.deleteList(t.id)},title:"Delete device"},"del")]})]},i.deleteList=function(t){return window.confirm("Really delete device "+t+"?")&&Object(l.d)("api/device/delete",{id:t}).then((function(e){e.deleted&&(i.setState({data:i.state.data.filter((function(e){return e.id!==t}))}),i.changeContent(null))}))},i.state={data:null,sort:t.hasOwnProperty("sort")?t.sort:"hostname",rack_id:i.props.rack_id,searchfield:"",field:i.props.field?i.props.field:"id",search:i.props.search?i.props.search:""},i}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/list",{sort:this.state.sort,rack_id:this.state.rack_id,field:this.state.field,search:this.state.search}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data,n=this.state.searchfield.toLowerCase(),a=0===n.length?e:e.filter((function(t){return t.hostname.toLowerCase().includes(n)||t.ip&&t.ip.includes(n)})),i=[Object(m.jsx)(f.HeaderButton,{text:"IP",highlight:"ip"===this.state.sort,onClick:function(){return t.sortList("ip")}},"sort_ip"),Object(m.jsx)(f.HeaderButton,{text:"Hostname",highlight:"hostname"===this.state.sort,onClick:function(){return t.sortList("hostname")}},"sort_hostname"),""];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.ContentList,{header:"Device List",thead:i,listItem:this.listItem,trows:a,children:[Object(m.jsx)(f.ItemsButton,{onClick:function(){Object.assign(t.state,{rack_id:void 0,field:"ip",search:""}),t.componentDidMount()},title:"List all items"},"items"),Object(m.jsx)(f.AddButton,{onClick:function(){return t.changeContent(Object(m.jsx)(T,{ip:"0.0.0.0"},"dn_new"))},title:"Add device"},"add"),Object(m.jsx)(f.DevicesButton,{onClick:function(){return t.changeContent(Object(m.jsx)(A,{},"device_discover"))},title:"Discover new devices"},"devices"),Object(m.jsx)("br",{}),Object(m.jsxs)(p.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[Object(m.jsxs)("optgroup",{label:"Group",children:[Object(m.jsx)("option",{value:"hostname",children:"Hostname"}),Object(m.jsx)("option",{value:"type",children:"Type"})]}),Object(m.jsxs)("optgroup",{label:"Unique",children:[Object(m.jsx)("option",{value:"id",children:"ID"}),Object(m.jsx)("option",{value:"ip",children:"IP"}),Object(m.jsx)("option",{value:"mac",children:"MAC"}),Object(m.jsx)("option",{value:"interface_id",children:"Interface ID"})]})]},"field"),Object(m.jsx)(p.SearchInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),Object(m.jsx)(f.SearchButton,{onClick:function(){return t.componentDidMount()},title:"Search specific device"},"reload"),Object(m.jsx)(p.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Filter devices"},"filter")]},"mcl"),Object(m.jsx)(h.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),C=function(t){Object(o.a)(d,t);var e=Object(r.a)(d);function d(t){var s;return Object(c.a)(this,d),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.changeContent=function(t){return s.setState({content:t})},s.changeSelf=function(t){return s.props.changeSelf(t)},s.updateInfo=function(){return Object(l.d)("api/device/info",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.reload=function(){s.setState({rack:void 0,vm:void 0}),Object(l.d)("api/device/info",{id:s.props.id}).then((function(t){return s.setState(t)}))},s.lookupInfo=function(){s.setState({content:Object(m.jsx)(h.Spinner,{}),result:""}),Object(l.d)("api/device/info",{id:s.props.id,op:"lookup"}).then((function(t){return s.setState(Object(i.a)(Object(i.a)({},t),{},{content:null}))}))},s.changeIpam=function(t){return n.e(3).then(n.bind(null,40)).then((function(e){return s.changeContent(Object(m.jsx)(e.AddressEvents,{id:t,changeSelf:s.changeContent},"address_events"))}))},s.changeInterfaces=function(){return n.e(1).then(n.bind(null,36)).then((function(t){return s.changeContent(Object(m.jsx)(t.List,{device_id:s.props.id,changeSelf:s.changeContent},"interface_list"))}))},s.changeVisualize=function(){return n.e(4).then(n.bind(null,38)).then((function(t){return s.changeSelf(Object(m.jsx)(t.Edit,{type:"device",changeSelf:s.changeSelf,id:s.props.id},"viz_id_"+s.props.id))}))},s.state={data:void 0,found:!0,content:null,navconf:!1},s}return Object(s.a)(d,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/info",{id:this.props.id,extra:["types","classes"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data,n=this.state.extra,a=!("vm"!==e.class||!this.state.vm)&&this.state.vm,i=!(!this.state.rack||"vm"===e.class)&&this.state.rack,c=this.props.changeSelf,s=n.ip,o=n.functions.length>0?n.functions.split(","):[],r=this.state.types.find((function(t){return t.id===parseInt(e.type_id)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.InfoArticle,{header:"Device",children:[Object(m.jsxs)(h.InfoColumns,{style:{float:"left"},children:[Object(m.jsx)(p.TextLine,{id:"hostname",text:e.hostname},"hostname"),Object(m.jsx)(p.TextInput,{id:"mac",label:"MAC",value:e.mac,title:"System MAC",onChange:this.onChange},"mac"),s&&Object(m.jsx)(p.TextLine,{id:"ip",label:"Mgmt IP",text:n.ip},"ip"),s&&Object(m.jsx)(p.StateLine,{id:"state",state:n.state},"state"),Object(m.jsx)(p.TextLine,{id:"system_id",label:"System ID",text:this.props.id},"system_id")]},"ic_info"),Object(m.jsxs)(h.InfoColumns,{style:{float:"left"},children:[Object(m.jsx)(p.SelectInput,{id:"class",value:e.class,onChange:this.onChange,children:this.state.classes.map((function(t){return Object(m.jsx)("option",{value:t,children:t},t)}))},"class"),Object(m.jsx)(p.SelectInput,{id:"type_id",label:"Type",value:e.type_id,onChange:this.onChange,children:this.state.types.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"type_id"),Object(m.jsx)(p.TextInput,{id:"model",value:e.model,onChange:this.onChange,extra:e.model},"model"),Object(m.jsx)(p.TextLine,{id:"version",text:e.version},"version"),Object(m.jsx)(p.TextInput,{id:"serial",label:"S/N",value:e.serial,onChange:this.onChange},"serial")]},"ic_extra"),Object(m.jsxs)(h.InfoColumns,{style:{float:"left"},children:[i&&Object(m.jsx)(p.TextLine,{id:"rack_pos",label:"Rack/Pos",text:"".concat(i.rack_name," (").concat(i.rack_unit,")")},"pos"),i&&Object(m.jsx)(p.TextLine,{id:"rack_size",label:"Size (U)",text:i.rack_size},"size"),i&&Object(m.jsx)(p.TextLine,{id:"rack_con",label:"TS/Port",text:"".concat(i.console_name," (").concat(i.console_port,")")},"con"),i&&this.state.pems.map((function(t){return Object(m.jsx)(p.TextLine,{id:"pem_"+t.id,label:t.name+" PDU",text:"".concat(t.pdu_name," (").concat(t.pdu_unit,")")},t.id)}))]},"ic_rack"),Object(m.jsxs)(h.InfoColumns,{style:{float:"left"},children:[a&&Object(m.jsx)(p.TextLine,{id:"vm_name",label:"VM Name",text:a.name},"name"),a&&Object(m.jsx)(p.TextLine,{id:"vm_host",label:"VM Host",text:a.host},"host"),a&&Object(m.jsx)(p.TextLine,{id:"vm_uuid",label:"VM UUID",text:a.device_uuid,style:{maxWidth:170},extra:a.device_uuid},"uuid"),a&&Object(m.jsx)(p.TextLine,{id:"vm_uuhost",label:"Host UUID",text:a.server_uuid,style:{maxWidth:170},extra:a.server_uuid},"uuhost")]},"ic_vm"),Object(m.jsxs)(h.InfoColumns,{style:{clear:"both"},children:[Object(m.jsx)(p.TextInput,{id:"comment",value:e.comment,onChange:this.onChange},"comment"),Object(m.jsx)(p.UrlInput,{id:"url",label:"URL",value:e.url,onChange:this.onChange},"url")]},"ic_text"),Object(m.jsx)(f.ReloadButton,{onClick:function(){return t.reload()}},"reload"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"save"),Object(m.jsx)(f.ConfigureButton,{onClick:function(){return t.setState({navconf:!t.state.navconf})},title:"Toggle config mode"},"edit"),Object(m.jsx)(f.StartButton,{onClick:function(){return t.changeContent(Object(m.jsx)(M,{id:t.props.id},"device_control"))},title:"Device control"},"cont"),Object(m.jsx)(f.CheckButton,{onClick:function(){return t.changeContent(Object(m.jsx)(N,{id:t.props.id},"device_configure"))},title:"Configuration template"},"conf"),c&&Object(m.jsx)(f.NetworkButton,{onClick:function(){return t.changeVisualize()},title:"Connectivity map"},"netw"),s&&Object(m.jsx)(f.SearchButton,{onClick:function(){return t.lookupInfo()},title:"Information lookup"},"search"),s&&Object(m.jsx)(f.LogButton,{onClick:function(){return t.changeContent(Object(m.jsx)(L,{id:t.props.id},"device_logs"))},title:"Logs"},"logs"),o.includes("manage")&&Object(m.jsx)(f.GoButton,{onClick:function(){return t.context.changeMain({module:t.state.extra.type_base,function:"Manage",args:{device_id:t.props.id,type:t.state.extra.type_name}})},title:"Manage "+e.hostname},"manage"),s&&Object(m.jsx)(f.TermButton,{onClick:function(){return window.open("ssh://".concat(n.username,"@").concat(n.ip),"_self")},title:"SSH connection"},"ssh"),s&&Object(m.jsx)(f.HealthButton,{onClick:function(){return t.changeIpam(t.state.extra.ipam_id)},title:"IP health report"},"health"),i&&i.console_url&&Object(m.jsx)(f.TermButton,{onClick:function(){return window.open(i.console_url,"_self")},title:"Serial Connection"},"console"),e.url&&Object(m.jsx)(f.UiButton,{onClick:function(){return window.open(e.url,"_blank")},title:"Web UI"},"ui"),Object(m.jsx)(h.Result,{result:JSON.stringify(this.state.update)},"result")]},"di_ia"),Object(m.jsxs)(j.NavBar,{id:"di_navigation",children:[this.state.navconf&&Object(m.jsx)(j.NavButton,{title:"Management",onClick:function(){return t.changeContent(Object(m.jsx)(S,{id:t.props.id},"device_configure"))}},"management"),this.state.navconf&&["infrastructure","out-of-band"].includes(e.class)&&Object(m.jsx)(j.NavButton,{title:"Rack",onClick:function(){return t.changeContent(Object(m.jsx)(k,{device_id:t.props.id},"device_rack_info"))}},"rack"),this.state.navconf&&["device","infrastructure","out-of-band"].includes(e.class)&&Object(m.jsx)(j.NavButton,{title:"PEMs",onClick:function(){return t.changeContent(Object(m.jsx)(I,{device_id:t.props.id,changeSelf:t.changeContent},"device_pem_list"))}},"pems"),!this.state.navconf&&Object(m.jsx)(j.NavButton,{title:"Interfaces",onClick:function(){return t.changeInterfaces()}},"interfaces"),!this.state.navconf&&["infrastructure","out-of-band","vm"].includes(e.class)&&Object(m.jsx)(j.NavButton,{title:"Statistics",onClick:function(){return t.changeContent(Object(m.jsx)(D,{device_id:t.props.id,changeSelf:t.changeContent},"statistics_list"))}},"stats"),!this.state.navconf&&"network"===r.base&&s&&Object(m.jsx)(j.NavButton,{title:"FDB",onClick:function(){return t.changeContent(Object(m.jsx)(b.Device,{id:t.props.id,ip:n.ip,type:r.name,changeSelf:t.changeContent},"fdb_device"))}},"fdb"),!this.state.navconf&&o.filter((function(t){return"manage"!==t})).map((function(e,n){return Object(m.jsx)(j.NavButton,{title:e.replace("_"," "),onClick:function(){return t.changeContent(Object(m.jsx)(z,{id:t.props.id,op:e,type:t.state.extra.type_name},"dev_func_"+e))}},"nav_"+n)}))]},"device_navigation"),this.state.content]})}return Object(m.jsx)(h.Spinner,{})}}]),d}(d.Component);C.contextType=h.RimsContext;var S=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.changeContent=function(t){return s.setState({content:t})},s.updateInfo=function(){return Object(l.d)("api/device/extended",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.state={data:void 0,found:!0,content:null},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/extended",{id:this.props.id,extra:["domains"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data&&this.state.domains?Object(m.jsxs)(h.InfoArticle,{header:"Management Configuration",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.TextInput,{id:"hostname",value:this.state.data.hostname,onChange:this.onChange},"d_conf_hostname"),Object(m.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"d_conf_a_domain_id"),Object(m.jsx)(p.SelectInput,{id:"ipam_id",label:"Mgmt IP",value:this.state.data.ipam_id,onChange:this.onChange,children:this.state.interfaces.map((function(t,e){return Object(m.jsx)("option",{value:t.ipam_id,children:"".concat(t.ip," (").concat(t.name,")")},e)}))},"d_conf_ipam_id"),Object(m.jsx)(p.TextLine,{id:"id",label:"Local ID",text:this.props.id,title:"Database ID"},"id"),Object(m.jsx)(p.TextLine,{id:"snmp",label:"SNMP",text:this.state.data.snmp},"snmp"),Object(m.jsx)(p.TextLine,{id:"oid",label:"Priv OID",text:this.state.extra.oid},"d_conf_oid"),Object(m.jsx)(p.TextLine,{id:"oui",label:"System OUI",text:this.state.extra.oui},"d_conf_oui")]},"d_conf_ic"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_conf_btn_save"),Object(m.jsx)(h.Result,{result:this.state.status},"d_conf_result")]},"d_conf_art"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),k=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.updateInfo=function(){return Object(l.d)("api/device/rack",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.state={},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/rack",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data.rack_id&&"NULL"!==this.state.data.rack_id;return Object(m.jsxs)(h.InfoArticle,{header:"Rack",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.SelectInput,{id:"rack_id",label:"Rack ID",value:this.state.data.rack_id,onChange:this.onChange,children:this.state.racks.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"d_rack_id"),e&&Object(m.jsx)(p.TextInput,{id:"rack_size",label:"Size",value:this.state.data.rack_size,onChange:this.onChange,title:"Size of device in U"},"d_rack_size"),e&&Object(m.jsx)(p.TextInput,{id:"rack_unit",label:"Unit",value:this.state.data.rack_unit,onChange:this.onChange,title:"First unit of placement"},"d_rack_unit"),e&&Object(m.jsx)(p.SelectInput,{id:"console_id",label:"Console",value:this.state.data.console_id,onChange:this.onChange,children:this.state.consoles.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.hostname},e)}))},"d_rack_con_id"),e&&Object(m.jsx)(p.TextInput,{id:"console_port",label:"Console Port",value:this.state.data.console_port,onChange:this.onChange},"d_rack_con_port")]},"d_rack_ic"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_rack_btn_save")]},"d_rack_art")}return Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),I=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).changeContent=function(t){return a.props.changeSelf(t)},a.deleteList=function(t){return window.confirm("Really delete PEM?")&&Object(l.d)("api/pem/delete",{id:t}).then((function(e){return e.deleted&&a.setState({data:a.state.data.filter((function(e){return e.id!==t})),content:null})}))},a.listItem=function(t){return[t.id,t.name,t.pdu_id,t.pdu_name,t.pdu_slot,t.pdu_unit,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.InfoButton,{onClick:function(){return a.changeContent(Object(m.jsx)(y,{id:t.id,device_id:a.props.device_id,changeSelf:a.changeContent},"pem_info_"+t.id))},title:"Edit PEM information"},"info"),Object(m.jsx)(f.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete PEM"},"del")]})]},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/pem/list",{device_id:this.props.device_id,lookup:!0}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(h.ContentReport,{header:"PEMs",thead:["ID","Name","PDU ID","PDU Name","PDU Slot","PDU Unit",""],trows:this.state.data,listItem:this.listItem,children:[Object(m.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"pems_btn_reload"),Object(m.jsx)(f.AddButton,{onClick:function(){return t.changeContent(Object(m.jsx)(y,{id:"new",device_id:t.props.device_id,changeSelf:t.changeContent},"pem_new"))},title:"Add PEM"},"pems_btn_add")]},"pems"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),y=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.updateInfo=function(){return Object(l.d)("api/pem/info",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.state={},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/pem/info",{id:this.props.id,device_id:this.props.device_id}).then((function(e){return t.setState(e)})),Object(l.d)("api/pdu/list",{device_id:this.props.device_id,empty:!0}).then((function(e){return t.setState({pdus:e.data})}))}},{key:"render",value:function(){var t=this;if(this.state.data&&this.state.pdus){var e=this.state.pdus.find((function(e){return parseInt(e.device_id)===parseInt(t.state.data.pdu_id)})),n=[];if(e)for(var a=0;a<e.slots;a++)n.push({id:a,name:e["".concat(a,"_slot_name")]});return Object(m.jsxs)(h.InfoArticle,{header:"PEM",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange},"d_pem_name"),Object(m.jsx)(p.SelectInput,{id:"pdu_id",label:"PDU",value:this.state.data.pdu_id,onChange:this.onChange,children:this.state.pdus.map((function(t,e){return Object(m.jsx)("option",{value:t.device_id,children:t.name},e)}))},"d_pem_pdu_id"),Object(m.jsx)(p.SelectInput,{id:"pdu_slot",label:"Slot",value:this.state.data.pdu_slot,onChange:this.onChange,children:n.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"d_pem_pdu_slot"),Object(m.jsx)(p.TextInput,{id:"pdu_unit",label:"Unit",value:this.state.data.pdu_unit,onChange:this.onChange},"d_pem_pdu_unit")]},"d_pem_ic"),Object(m.jsx)(f.BackButton,{onClick:function(){return t.props.changeSelf(Object(m.jsx)(I,{device_id:t.props.device_id,changeSelf:t.props.changeSelf},"device_pem_list"))}},"d_pem_btn_back"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_pem_btn_save"),Object(m.jsx)(h.Result,{result:this.state.update?this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update):""},"d_pem_result")]},"d_pem_art")}return Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),D=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).loadList=function(t){return Object(l.d)("api/statistics/list",{device_id:a.props.device_id}).then((function(e){return a.setState(t?Object(i.a)(Object(i.a)({},e),{},{result:"",inserts:""}):e)}))},a.changeContent=function(t){return a.props.changeSelf(t)},a.deleteList=function(t){return window.confirm("Really delete statistics point?")&&Object(l.d)("api/statistics/delete",{id:t}).then((function(e){return e.deleted&&a.setState({data:a.state.data.filter((function(e){return e.id!==t})),content:null})}))},a.lookupStats=function(){return Object(l.d)("api/statistics/lookup",{device_id:a.props.device_id}).then((function(t){a.setState(t),a.loadList()}))},a.listItem=function(t){return[t.id,t.measurement,t.tags,t.name,t.oid,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.InfoButton,{onClick:function(){return a.changeContent(Object(m.jsx)(B,{id:t.id,device_id:a.props.device_id},"statistics_info_"+t.id))},title:"Edit data point"},"info"),t.measurement&&t.name&&Object(m.jsx)(f.HealthButton,{onClick:function(){return a.changeContent(Object(m.jsx)(w,{device_id:a.props.device_id,measurement:t.measurement,name:t.name},t.id))},title:"Stats for data point"},"stats"),Object(m.jsx)(f.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete data point"},"del")]})]},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(h.ContentReport,{header:"Device statistics",thead:["ID","Measurement","Tags","Name","OID",""],trows:this.state.data,listItem:this.listItem,result:this.state.result,children:[Object(m.jsx)(f.ReloadButton,{onClick:function(){return t.loadList(!0)}},"reload"),Object(m.jsx)(f.SearchButton,{onClick:function(){return t.lookupStats()},title:"Lookup device type stats"},"lookup"),Object(m.jsx)(f.AddButton,{onClick:function(){return t.changeContent(Object(m.jsx)(B,{id:"new",device_id:t.props.device_id},"stats_new_"))},title:"Add statistics"},"add")]},"cr_stats"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),w=function(t){Object(o.a)(i,t);var e=Object(r.a)(i);function i(t){var n;return Object(c.a)(this,i),(n=e.call(this,t)).updateItems=function(t){return Object(l.d)("api/statistics/query_device",{device_id:n.props.device_id,measurement:n.props.measurement,name:n.props.name,range:t}).then((function(t){if("OK"===t.status){var e={};t.header.forEach((function(t,n){return e[t]=n}));var a=new n.vis.DataSet(t.data.map((function(t){return{x:t[e._time],y:t[e._value],group:"data"}})));n.graph.setItems(a),n.graph.fit()}}))},n.rangeChange=function(t){n.setState(Object(a.a)({},t.target.name,t.target.value)),n.updateItems(t.target.value)},n.gotoNow=function(){var t=new Date;n.graph.moveTo(t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes())},n.state={range:1},n.canvas=u.a.createRef(),n.graph=null,n.vis=null,n}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var t=this;n.e(2).then(n.bind(null,55)).then((function(e){t.vis=e;var n=new t.vis.DataSet([{id:"data",content:t.props.name}]);t.graph=new t.vis.Graph2d(t.canvas.current,[],n,{locale:"en",width:"100%",height:"100%",zoomMin:6e4,zoomMax:12096e5,clickToUse:!0,drawPoints:!1,interpolation:!1,legend:!0,dataAxis:{alignZeros:!1,icons:!0,left:{title:{text:"value"}}}}),t.updateItems(t.state.range)}))}},{key:"render",value:function(){var t=this;return Object(m.jsxs)(h.Article,{header:"Statistics",children:[Object(m.jsx)(f.ReloadButton,{onClick:function(){return t.updateItems(t.state.range)},title:"Reload"},"reload"),Object(m.jsx)(f.RevertButton,{onClick:function(){return t.gotoNow()},title:"Go to now"},"reset"),Object(m.jsx)("br",{}),Object(m.jsx)(p.TextLine,{id:"name",label:"Device Data Point",text:this.props.name},"name"),Object(m.jsx)("br",{}),Object(m.jsxs)(p.SelectInput,{id:"range",label:"Time range",value:this.state.range,onChange:this.rangeChange,children:[Object(m.jsx)("option",{value:"1",children:"1h"}),Object(m.jsx)("option",{value:"4",children:"4h"}),Object(m.jsx)("option",{value:"8",children:"8h"}),Object(m.jsx)("option",{value:"24",children:"24h"})]},"range"),Object(m.jsx)("div",{className:v.a.graphs,ref:this.canvas})]},"ds_art")}}]),i}(d.Component),B=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.updateInfo=function(){return Object(l.d)("api/statistics/info",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.state={},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/statistics/info",{id:this.props.id,device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(h.InfoArticle,{header:"Data point",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.TextInput,{id:"measurement",value:this.state.data.measurement,onChange:this.onChange,title:"Group, or measurement, that the data point belongs to"},"d_stat_measurement"),Object(m.jsx)(p.TextInput,{id:"tags",value:this.state.data.tags,onChange:this.onChange,title:"Tags are comma separated values that extend TSDB grouping"},"d_stat_tags"),Object(m.jsx)(p.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange,title:"Data point name"},"d_stat_name"),Object(m.jsx)(p.TextInput,{id:"oid",value:this.state.data.oid,onChange:this.onChange},"d_stat_oid")]},"d_stat_ic"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_stat_btn_save"),Object(m.jsx)(h.Result,{result:this.state.update&&this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update)},"d_stat_result")]},"d_stat_art"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),M=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).operationDev=function(t,e){window.confirm(e)&&(a.setState({wait:Object(m.jsx)(h.Spinner,{})}),Object(l.d)("api/device/control",{id:a.props.id,device_op:t}).then((function(t){return a.setState(Object(i.a)(Object(i.a)({},t),{},{wait:null}))})))},a.operationPem=function(t,e,n){window.confirm(n)&&(a.setState({wait:Object(m.jsx)(h.Spinner,{})}),Object(l.d)("api/device/control",{id:a.props.id,pem_op:e,pem_id:t}).then((function(t){return a.setState(Object(i.a)(Object(i.a)({},t),{},{wait:null}))})))},a.lookupState=function(t){return console.log("State lookup TODO")},a.state={pems:[]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/control",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return Object(m.jsxs)(h.InfoArticle,{header:"Device Control",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)("label",{htmlFor:"reboot",children:"Reboot:"}),Object(m.jsx)(f.ReloadButton,{id:"reboot",onClick:function(){return t.operationDev("reboot","Really reboot?")},title:"Restart device"},"reboot"),Object(m.jsx)("label",{htmlFor:"shutdown",children:"Shutdown:"}),Object(m.jsx)(f.ShutdownButton,{id:"shutdown",onClick:function(){return t.operationDev("shutdown","Really shutdown?")},title:"Shutdown"},"shutdown"),this.state.pems.map((function(e){return"off"===e.state?Object(m.jsxs)(d.Fragment,{children:[Object(m.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),Object(m.jsx)(f.StartButton,{id:e.id,onClick:function(){return t.operationPem(e.id,"on","Power on PEM?")},title:"Power ON"},"dc_btn_start_"+e.id)]},e.id):"on"===e.state?Object(m.jsxs)(d.Fragment,{children:[Object(m.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),Object(m.jsx)(f.ShutdownButton,{id:e.id,onClick:function(){return t.operationPem(e.id,"off","Power off PEM?")},title:"Power OFF"},"dc_btn_stop_"+e.id)]},e.id):Object(m.jsxs)(d.Fragment,{children:[Object(m.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),Object(m.jsx)(f.SearchButton,{id:e.id,onClick:function(){return t.lookupState(e.id)},title:"Lookup State"},"dc_btn_lookup_"+e.id)]},e.id)}))]},"ic"),Object(m.jsx)(h.Result,{result:JSON.stringify(this.state.result)},"result"),this.state.wait]},"ia_dc")}}]),n}(d.Component),L=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).clearLog=function(){return Object(l.d)("api/device/log_clear",{id:t.props.id}).then((function(e){return e.deleted&&t.setState({data:[]})}))},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/log_get",{id:this.props.id,count:this.props.count}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state?Object(m.jsx)(h.ContentReport,{header:"Logs",thead:["Time","Message"],trows:this.state.data,listItem:function(t){return[t.time,t.message]},children:Object(m.jsx)(f.DeleteButton,{onClick:function(){return t.clearLog()},title:"Clear device logs"},"devlog_btn_delete")},"dev_log_cr"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),N=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/configuration_template",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?Object(m.jsx)(h.CodeArticle,{children:"OK"===this.state.status?this.state.data.join("\n"):this.state.info},"dtemp_art"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),T=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.addDevice=function(){s.state.data.hostname&&Object(l.d)("api/device/new",s.state.data).then((function(t){return s.setState({result:JSON.stringify(t)})}))},s.searchIP=function(){s.state.data.ipam_network_id&&Object(l.d)("api/ipam/address_find",{network_id:s.state.data.ipam_network_id}).then((function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},{ip:t.ip})})}))},s.state={data:{ip:s.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:s.props.ipam_network_id,hostname:""},found:!0},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/dns/domain_list",{filter:"forward"}).then((function(e){return t.setState({domains:e.data})})),Object(l.d)("api/ipam/network_list").then((function(e){return t.setState({networks:e.data})})),Object(l.d)("api/device/class_list").then((function(e){return t.setState({classes:e.data})}))}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.setState({data:{ip:this.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:this.props.ipam_network_id,hostname:""}})}},{key:"render",value:function(){var t=this;return this.state.domains&&this.state.classes&&this.state.networks?Object(m.jsxs)(h.InfoArticle,{header:"Device Add",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.TextInput,{id:"hostname",value:this.state.data.hostname,placeholder:"Device hostname",onChange:this.onChange},"dn_hostname"),Object(m.jsx)(p.SelectInput,{id:"class",label:"Device Class",value:this.state.data.class,onChange:this.onChange,children:this.state.classes.map((function(t){return Object(m.jsx)("option",{value:t,children:t},t)}))},"dn_class"),Object(m.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"dn_a_domain_id"),Object(m.jsx)(p.SelectInput,{id:"if_domain_id",label:"Interface Domain",value:this.state.data.if_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"dn_if_domain_id"),Object(m.jsx)(p.SelectInput,{id:"ipam_network_id",label:"Interface Network",value:this.state.data.ipam_network_id,onChange:this.onChange,children:this.state.networks.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:"".concat(t.netasc," (").concat(t.description,")")},e)}))},"dn_ipam_network_id"),Object(m.jsx)(p.TextInput,{id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange},"dn_ip"),Object(m.jsx)(p.TextInput,{id:"mac",label:"MAC",value:this.state.data.mac,onChange:this.onChange},"dn_mac")]},"dn_content"),Object(m.jsx)(f.StartButton,{onClick:function(){return t.addDevice()},title:"Add device"},"dn_btn_start"),Object(m.jsx)(f.SearchButton,{onClick:function(){return t.searchIP()},title:"Find available IP"},"dn_btn_search"),Object(m.jsx)(h.Result,{result:this.state.result},"dn_result")]},"dn_art"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),A=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).onChange=function(t){return i.setState(Object(a.a)({},t.target.name,t.target.value))},i.changeContent=function(t){return i.setState({content:t})},i.state={ipam_network_id:void 0,a_domain_id:void 0,content:null},i}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/ipam/network_list").then((function(e){return t.setState({networks:e.data})})),Object(l.d)("api/dns/domain_list",{filter:"forward"}).then((function(e){return t.setState({domains:e.data})}))}},{key:"runDiscovery",value:function(){var t=this;this.setState({content:Object(m.jsx)(h.Spinner,{})}),Object(l.d)("api/device/discover",{network_id:this.state.ipam_network_id,a_domain_id:this.state.a_domain_id,if_domain_id:this.state.if_domain_id}).then((function(e){return t.setState({content:Object(m.jsx)(h.CodeArticle,{children:JSON.stringify(e,null,2)},"dd_result")})}))}},{key:"render",value:function(){var t=this;return this.state.networks&&this.state.domains?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.InfoArticle,{header:"Device Discovery",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.SelectInput,{id:"ipam_network_id",label:"Network",value:this.state.ipam_network_id,onChange:this.onChange,children:this.state.networks.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:"".concat(t.netasc," (").concat(t.description,")")},e)}))},"ipam_network_id"),Object(m.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"a_domain_id"),Object(m.jsx)(p.SelectInput,{id:"if_domain_id",label:"Interface Domain",value:this.state.if_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return Object(m.jsx)("option",{value:t.id,children:t.name},e)}))},"if_domain_id")]},"ic"),Object(m.jsx)(f.StartButton,{onClick:function(){return t.runDiscovery()},title:"Start discovery"},"start")]},"ia_dd"),Object(m.jsx)(j.NavBar,{id:"dd_navigation"},"dd_navigation"),this.state.content]}):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),R=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))).listItem=function(t){return[t.id,t.hostname,t.class,t.ip,t.mac,t.oui,t.type_name,t.oid,t.serial,Object(m.jsx)(h.StateLeds,{state:t.state},"dr_"+t.id)]},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/list",{extra:["system","mac","type","oui","class"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?Object(m.jsx)(h.ContentReport,{header:"Devices",thead:["ID","Hostname","Class","IP","MAC","OUI","Type","OID","Serial","State"],trows:this.state.data,listItem:this.listItem},"dev_cr"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),F=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).changeSelf=function(t){return a.props.changeSelf(t)},a.listItem=function(t){return[t.base,Object(m.jsx)(f.HrefButton,{text:t.name,onClick:function(){return a.changeSelf(Object(m.jsx)(g,{field:"type",search:t.name},"device_list"))}},"tl_btn_"+t.name),t.icon]},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/type_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.ContentList,{header:"Device Types",thead:["Class","Name","Icon"],trows:this.state.data,listItem:this.listItem},"cl"),Object(m.jsx)(h.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]}):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),P=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).syncModels=function(){return Object(l.d)("api/device/model_list",{op:"sync"}).then((function(t){return a.setState(t)}))},a.listItem=function(t){return[t.id,t.name,t.type,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.ConfigureButton,{onClick:function(){return a.changeContent(Object(m.jsx)(U,{id:t.id},"model_info_"+t.id))},title:"Edit model information"},"info"),Object(m.jsx)(f.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete model"},"del")]})]},a.deleteList=function(t){return window.confirm("Really delete model?")&&Object(l.d)("api/device/model_delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/model_list").then((function(e){return t.setState(Object(i.a)(Object(i.a)({},e),{},{result:"OK"}))}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(h.ContentList,{header:"Device Models",thead:["ID","Model","Type",""],trows:this.state.data,listItem:this.listItem,result:this.state.result,children:[Object(m.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(m.jsx)(f.SyncButton,{onClick:function(){return t.syncModels()},title:"Resync models"},"sync")]},"cl"),Object(m.jsx)(h.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]}):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),U=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.updateInfo=function(){return Object(l.d)("api/device/model_info",Object(i.a)({op:"update"},s.state.data)).then((function(t){return s.setState(t)}))},s.state={data:null,found:!0},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/model_info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?Object(m.jsxs)(h.InfoArticle,{header:"Device Model",children:[Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)(p.TextLine,{id:"name",text:this.state.data.name},"dm_name"),Object(m.jsx)(p.TextLine,{id:"type",text:this.state.extra.type},"dm_type"),Object(m.jsx)(p.TextInput,{id:"defaults_file",label:"Default File",value:this.state.data.defaults_file,onChange:this.onChange},"dm_defaults_file"),Object(m.jsx)(p.TextInput,{id:"image_file",label:"Image  File",value:this.state.data.image_file,onChange:this.onChange},"dm_image_file")]},"dm_content"),Object(m.jsx)(p.TextAreaInput,{id:"parameters",onChange:this.onChange,value:this.state.data.parameters},"dm_parameters"),Object(m.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"dm_btn_save")]},"dm_art"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),E=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){return s.setState({data:Object(i.a)(Object(i.a)({},s.state.data),{},Object(a.a)({},t.target.name,t.target.value))})},s.ouiSearch=function(){Object(l.d)("api/master/oui_info",{oui:s.state.data.oui}).then((function(t){return s.setState({content:Object(m.jsx)(h.InfoArticle,{children:Object(m.jsxs)(h.InfoColumns,{children:[Object(m.jsx)("label",{htmlFor:"oui",children:"OUI:"}),Object(m.jsx)("span",{id:"oui",children:t.data.oui}),Object(m.jsx)("label",{htmlFor:"company",children:"Company:"}),Object(m.jsx)("span",{id:"company",children:t.data.company})]},"os_cont")},"os_art")})}))},s.state={data:{oui:""},content:null},s}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(h.Flex,{children:[Object(m.jsxs)(h.LineArticle,{children:["Type MAC address to find ",Object(m.jsx)(p.TextInput,{id:"oui",onChange:this.onChange,value:this.state.data.oui,placeholder:"00:00:00"},"oui"),Object(m.jsx)(f.SearchButton,{onClick:function(){return t.ouiSearch()},title:"Search for OUI"},"os_btn_search")]},"os_art"),this.state.content]},"flex")}}]),n}(d.Component),H=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/master/oui_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.data?Object(m.jsx)(h.ContentReport,{header:"OUI",thead:["oui","company"],trows:this.state.data,listItem:function(t){return["".concat(t.oui.substring(0,2),":").concat(t.oui.substring(2,4),":").concat(t.oui.substring(4,6)),t.company]}},"oui_list_cr"):Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component),z=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(l.d)("api/device/function",{op:this.props.op,id:this.props.id,type:this.props.type}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){if(this.state){if("OK"===this.state.status){if(this.state.data.length>0){var t=Object.keys(this.state.data[0]);return Object(m.jsx)(h.ContentReport,{thead:t,trows:this.state.data,listItem:function(e){return t.map((function(t){return e[t]}))}},"df_cr")}return Object(m.jsx)(h.InfoArticle,{children:"No Data"},"df_art")}return Object(m.jsxs)(h.CodeArticle,{children:["Error in devdata: ",this.state.info]},"df_art")}return Object(m.jsx)(h.Spinner,{})}}]),n}(d.Component)},39:function(t,e,n){"use strict";n.r(e),n.d(e,"Search",(function(){return f})),n.d(e,"Device",(function(){return b})),n.d(e,"List",(function(){return O}));var a=n(10),i=n(19),c=n(5),s=n(6),o=n(8),r=n(7),d=n(3),u=n(14),l=n(15),h=n(16),j=n(21),p=n(0),f=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).changeContent=function(t){return a.props.changeSelf(t)},a.onChange=function(t){return a.setState(Object(i.a)({},t.target.name,t.target.value))},a.state={field:"mac",search:""},a}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(p.jsxs)(l.LineArticle,{header:"FDB Search",children:[Object(p.jsxs)(h.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[Object(p.jsx)("option",{value:"mac",children:"MAC"}),Object(p.jsx)("option",{value:"device_id",children:"Device ID"})]},"field"),Object(p.jsx)(h.TextInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),Object(p.jsx)(j.SearchButton,{onClick:function(){return t.changeContent(Object(p.jsx)(O,Object(a.a)(Object(a.a)({},t.state),{},{changeSelf:t.props.changeSelf}),"fdb_list"))},title:"Search FDB"},"fs_btn_search")]},"fs_art")}}]),n}(d.Component),b=function(t){Object(o.a)(i,t);var e=Object(r.a)(i);function i(t){var a;return Object(c.a)(this,i),(a=e.call(this,t)).changeContent=function(t){return a.props.changeSelf(t)},a.changeInterface=function(t){return n.e(1).then(n.bind(null,36)).then((function(e){return a.changeContent(Object(p.jsx)(e.Info,{device_id:a.props.id,interface_id:t,changeSelf:a.changeContent},"interface_info"))}))},a.listItem=function(t,e){return[t.vlan,t.snmp_index,Object(p.jsx)(j.HrefButton,{text:t.name,onClick:function(){return a.changeInterface(t.interface_id)}},"fd_intf_"+t.interface_id),t.mac,t.oui]},a.state={wait:null,searchfield:""},a}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/fdb/list",{field:"device_id",search:this.props.id,extra:["oui"]}).then((function(e){return t.setState(e)}))}},{key:"syncFDB",value:function(){var t=this;this.setState({wait:Object(p.jsx)(l.Spinner,{})}),Object(u.d)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(e){return"OK"===e.status&&Object(u.d)("api/fdb/list",{field:"device_id",search:t.props.id,extra:["oui"]}).then((function(e){return t.setState(Object(a.a)(Object(a.a)({},e),{},{wait:null}))}))}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return Object(p.jsxs)(l.ContentReport,{header:"FDB",thead:["VLAN","SNMP","Interface","MAC","OUI"],trows:n,listItem:this.listItem,children:[Object(p.jsx)(j.ReloadButton,{onClick:function(){return t.componentDidMount()}},"fd_btn_reload"),Object(p.jsx)(j.SyncButton,{onClick:function(){return t.syncFDB()},title:"Resync FDB"},"fd_btn_sync"),Object(p.jsx)(h.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC"},"fd_search"),this.state.wait]},"fd_cr")}return Object(p.jsx)(l.Spinner,{})}}]),i}(d.Component),O=function(t){Object(o.a)(a,t);var e=Object(r.a)(a);function a(t){var i;return Object(c.a)(this,a),(i=e.call(this,t)).changeSearch=function(t,e){return i.changeContent(Object(p.jsx)(v,{mac:t},"fdb_info"))},i.changeVisualize=function(t){return"changeSelf"in i.props&&n.e(4).then(n.bind(null,38)).then((function(e){return i.changeContent(Object(p.jsx)(e.Edit,{type:"device",id:t},"viz_id_"+t))}))},i.listItem=function(t,e){return[t.device_id,t.hostname,t.vlan,t.snmp_index,t.name,Object(p.jsx)(j.HrefButton,{text:t.mac,onClick:function(){return i.setState({searchfield:t.mac})}},"intf_"+e),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j.InfoButton,{onClick:function(){return i.changeSearch(t.mac,e)},title:"Find interface(s)"},"info"),Object(p.jsx)(j.NetworkButton,{onClick:function(){return i.changeVisualize(t.device_id)}},"map")]})]},i.state={searchfield:""},i}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(l.ContentList,{header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC",""],trows:n,listItem:this.listItem,children:[Object(p.jsx)(j.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),Object(p.jsx)(h.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC",text:this.state.searchfield},"search")]},"cl"),Object(p.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return Object(p.jsx)(l.Spinner,{})}}]),a}(d.Component),v=function(t){Object(o.a)(n,t);var e=Object(r.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={},a}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;Object(u.d)("api/fdb/search",{mac:this.props.mac}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.device?Object(p.jsx)(l.ContentReport,{header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Interface","Description","OUI"],trows:this.state.interfaces,listItem:function(t){return[t.interface_id,t.name,t.description,t.oui]}},"fd_cr"):this.state.oui?Object(p.jsxs)(l.LineArticle,{header:"Search result",children:["OUI: ",this.state.oui]},"fd_oui_la"):this.state.status?Object(p.jsxs)(l.LineArticle,{header:"Search result",children:["Search result: ",this.state.info]},"fd_oui_la"):Object(p.jsx)(l.Spinner,{})}}]),n}(d.Component)}}]);
//# sourceMappingURL=0.b51eec3b.chunk.js.map