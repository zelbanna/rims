(this.webpackJsonprims=this.webpackJsonprims||[]).push([[1],{42:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return _})),n.d(t,"Info",(function(){return h}));var a=n(18),i=n(14),c=n(3),r=n(4),o=n(5),l=n(6),s=n(0),d=n.n(s),u=n(12),p=n(13),f=n(15),m=n(19),_=function(e){Object(l.a)(List,e);var t=Object(o.a)(List);function List(e){var n;return Object(c.a)(this,List),(n=t.call(this,e)).changeContent=function(e){return n.props.changeSelf(e)},n.deleteList=function(e,t){return window.confirm("Really delete interface "+t)&&Object(u.d)("api/interface/delete",{interfaces:[e]}).then((function(t){return t.deleted>0&&n.setState({data:n.state.data.filter((function(t){return t.interface_id!==e})),result:JSON.stringify(t.interfaces)})}))},n.cleanUp=function(){return window.confirm("Clean up empty interfaces?")&&Object(u.d)("api/interface/delete",{device_id:n.props.device_id}).then((function(e){return n.componentDidMount()}))},n.resetStatus=function(){return Object(u.d)("api/interface/clear",{device_id:n.props.device_id}).then((function(e){return n.componentDidMount()}))},n.discoverInterfaces=function(){return window.confirm("Rediscover interfaces?")&&Object(u.d)("api/interface/snmp",{device_id:n.props.device_id}).then((function(e){return n.componentDidMount()}))},n.listItem=function(e){return[e.snmp_index,e.name,e.mac,e.ip?e.ip:"-",e.description,e.class,e.connection_id?d.a.createElement(m.HrefButton,{key:"conn_btn_"+e.interface_id,text:e.connection_id,onClick:function onClick(){return n.changeContent(d.a.createElement(k,{key:"connection_info_"+e.connection_id,id:e.connection_id,device_id:n.props.device_id,changeSelf:n.changeContent}))},title:"Connection information"}):"-",d.a.createElement(s.Fragment,null,d.a.createElement(p.StateLeds,{key:"il_if_state_"+e.interface_id,state:[e.if_state,e.ip_state]}),d.a.createElement(m.InfoButton,{key:"il_btn_info_"+e.interface_id,onClick:function onClick(){return n.changeContent(d.a.createElement(h,{key:"interface_info_"+e.interface_id,interface_id:e.interface_id,changeSelf:n.props.changeSelf}))},title:"Interface information"}),d.a.createElement(m.DeleteButton,{key:"il_btn_del_"+e.interface_id,onClick:function onClick(){return n.deleteList(e.interface_id,e.name)},title:"Delete interface"}),!e.connection_id&&["wired","optical"].includes(e.class)&&d.a.createElement(m.LinkButton,{key:"il_btn_sync_"+e.interface_id,onClick:function onClick(){return n.changeContent(d.a.createElement(h,{key:"interface_info_"+e.interface_id,op:"device",interface_id:e.interface_id,name:e.name,changeSelf:n.props.changeSelf}))},title:"Connect interface"}))]},n.state={},n}return Object(r.a)(List,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/interface/list",{device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return this.state.data?d.a.createElement(p.ContentReport,{key:"il_cl",header:"Interfaces",thead:["ID","Name","MAC","IP Address","Description","Type","Link",""],trows:this.state.data,listItem:this.listItem,result:this.state.result},d.a.createElement(m.ReloadButton,{key:"il_btn_reload",onClick:function onClick(){return e.componentDidMount()}}),d.a.createElement(m.AddButton,{key:"il_btn_add",onClick:function onClick(){return e.changeContent(d.a.createElement(h,{key:"interface_info_"+Object(u.e)(),device_id:e.props.device_id,interface_id:"new",changeSelf:e.props.changeSelf}))},title:"Add interface"}),d.a.createElement(m.TextButton,{key:"il_btn_rset",onClick:function onClick(){return e.resetStatus()},title:"Reset interface state manually",text:"Reset"}),d.a.createElement(m.TextButton,{key:"il_btn_disc",onClick:function onClick(){return e.discoverInterfaces()},title:"Discover device interfaces",text:"Discover"}),d.a.createElement(m.TextButton,{key:"il_btn_lldp",onClick:function onClick(){return e.changeContent(d.a.createElement(C,{key:"interface_lldp",device_id:e.props.device_id,changeSelf:e.props.changeSelf}))},title:"Map interface connections",text:"LLDP"}),d.a.createElement(m.TextButton,{key:"il_btn_clean",onClick:function onClick(){return e.cleanUp()},title:"Clean up empty interfaces",text:"Cleanup"}),this.state.loader):d.a.createElement(p.Spinner,null)}}]),List}(s.Component),h=function(e){Object(l.a)(Info,e);var t=Object(o.a)(Info);function Info(e){var r;return Object(c.a)(this,Info),(r=t.call(this,e)).changeContent=function(e){return r.props.changeSelf(e)},r.onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.updateInfo=function(){return Object(u.d)("api/interface/info",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.changeIpam=function(e){return n.e(3).then(n.bind(null,45)).then((function(t){return r.changeContent(d.a.createElement(t.AddressInfo,{key:"address_info_"+e,id:e}))}))},r.deleteIpam=function(e){return window.confirm("Delete IP mapping?")&&Object(u.d)("api/ipam/address_delete",{id:r.state.data[e]}).then((function(t){return"OK"===t.status&&r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e,null))})}))},r.clearIpam=function(e){return Object(u.d)("api/interface/info",Object(a.a)({op:"update",interface_id:r.state.data.interface_id},e,null)).then((function(e){return r.setState(e)}))},r.swapIpam=function(){return Object(u.d)("api/interface/info",{op:"swap",interface_id:r.state.data.interface_id}).then((function(e){return r.setState(e)}))},r.deviceChange=function(e){r.setState({connect:Object(i.a)({},r.state.connect,Object(a.a)({},e.target.name,e.target.value))}),"id"===e.target.name&&e.target.value.length>0&&Object(u.d)("api/device/hostname",{id:e.target.value}).then((function(e){return e&&r.setState({connect:Object(i.a)({},r.state.connect,{found:"OK"===e.status,name:"OK"===e.status?e.data:"<N/A>"})})}))},r.stateInterface=function(){return r.state.connect.found&&Object(u.d)("api/interface/list",{device_id:r.state.connect.id,sort:"name",filter:["connected"]}).then((function(e){return r.setState({interfaces:e.data,op:"interface"})}))},r.interfaceChange=function(e){return r.setState({connect:Object(i.a)({},r.state.connect,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},r.connectInterface=function(){return r.state.connect.interface_id&&Object(u.d)("api/interface/connect",{a_id:r.state.data.interface_id,b_id:r.state.connect.interface_id,map:r.state.connect.map}).then((function(e){return r.setState({connect:{},op:null})}))},r.disconnectInterface=function(){return r.state.peer&&Object(u.d)("api/interface/connect",{a_id:r.state.data.interface_id,b_id:r.state.peer.interface_id,disconnect:!0}).then((function(e){return r.setState({peer:null})}))},r.stateIpam=function(e){r.state.domains&&r.state.networks?r.setState({op:"ipam",entry:e,ipam:{ip:"<N/A>"}}):r.setState({op:"wait",entry:e,ipam:{ip:"<N/A>"}}),r.state.domains||Object(u.d)("api/dns/domain_list",{filter:"forward"}).then((function(e){return r.setState({domains:e.data})})),r.state.networks||Object(u.d)("api/ipam/network_list").then((function(e){return r.setState({networks:e.data,op:"ipam"})}))},r.ipamChange=function(e){return r.setState({ipam:Object(i.a)({},r.state.ipam,Object(a.a)({},e.target.name,e.target.value))})},r.searchIP=function(){r.state.ipam.network_id&&Object(u.d)("api/ipam/address_find",{network_id:r.state.ipam.network_id}).then((function(e){return r.setState({ipam:Object(i.a)({},r.state.ipam,{ip:e.ip})})}))},r.createIpam=function(){Object(u.d)("api/interface/info",{interface_id:r.props.interface_id,op:"update",ipam_record:r.state.ipam,entry:r.state.entry}).then((function(e){return r.setState(Object(i.a)({},e,{op:null}))}))},r.state={op:r.props.op,connect:{name:"<N/A>",map:!1}},r}return Object(r.a)(Info,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/interface/info",{interface_id:this.props.interface_id,mac:this.props.mac,name:this.props.name,device_id:this.props.device_id,class:this.props.class,extra:["classes","ip"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;if(this.state.data){if(this.state.op)return"device"===this.state.op?d.a.createElement(p.LineArticle,{key:"ii_cnct_art"},"Connect ",this.state.data.name," to ",d.a.createElement(f.TextInput,{key:"ii_cnct_dev",id:"id",label:"Device ID",onChange:this.deviceChange})," with name '",this.state.connect.name,"'",d.a.createElement(m.BackButton,{key:"ii_cnct_btn_back",onClick:function onClick(){return e.setState({op:null})},title:"Back"}),d.a.createElement(m.ForwardButton,{key:"ii_cnct_btn_fwd",onClick:function onClick(){return e.stateInterface()},title:"Connect interface on "+this.state.connect.name})):"interface"===this.state.op?d.a.createElement(p.LineArticle,{key:"ii_cnct_art"},"Connect ",this.state.data.name," to ",this.state.connect.name," on",d.a.createElement(f.SelectInput,{key:"ii_cnct_int",id:"interface_id",label:"Interface",value:this.state.connect.interface_id,onChange:this.interfaceChange},this.state.interfaces.map((function(e){return d.a.createElement("option",{key:e.interface_id,value:e.interface_id},"".concat(e.interface_id," (").concat(e.name," - ").concat(e.description,")"))}))),d.a.createElement(f.CheckboxInput,{key:"ii_cnct_map",id:"map",value:this.state.connect.map,onChange:this.interfaceChange}),d.a.createElement(m.BackButton,{key:"ii_cnct_btn_back",onClick:function onClick(){return e.setState({op:"device"})},title:"Back"}),d.a.createElement(m.ForwardButton,{key:"ii_cnct_btn_fwd",onClick:function onClick(){return e.connectInterface()},title:"Complete connection"})):"ipam"===this.state.op?d.a.createElement(p.InfoArticle,{key:"ii_ipam_article",header:"Create IPAM record"},d.a.createElement(p.InfoColumns,{key:"ii_ipam_create"},d.a.createElement(f.SelectInput,{key:"ii_ipam_net",id:"network_id",label:"Network",value:this.state.ipam.network_id,onChange:this.ipamChange},this.state.networks.map((function(e){return d.a.createElement("option",{key:e.id,value:e.id},"".concat(e.netasc," (").concat(e.description,")"))}))),d.a.createElement(f.TextInput,{key:"ii_ipam_ip",id:"ip",value:this.state.ipam.ip,label:"IP",onChange:this.ipamChange}),d.a.createElement(f.SelectInput,{key:"ii_ipam_dom",id:"a_domain_id",label:"Domain",value:this.state.ipam.a_domain_id,onChange:this.ipamChange},this.state.domains.map((function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.name)})))),d.a.createElement(m.BackButton,{key:"ii_ipam_btn_back",onClick:function onClick(){return e.setState({op:null})},title:"Back"}),d.a.createElement(m.SearchButton,{key:"ii_ipam_btn_find",onClick:function onClick(){return e.searchIP()},title:"Search IP within network"}),d.a.createElement(m.ForwardButton,{key:"ii_ipam_btn_fwd",onClick:function onClick(){return e.createIpam()},title:"Create IPAM entry"})):"wait"===this.state.op?d.a.createElement(p.Spinner,null):d.a.createElement("div",null,"Intermediate interface operation state");var t=this.state.data.ipam_id,n=this.state.data.ipam_alt_id,a=this.state.peer,i="";return void 0!==this.state.update&&(i="Updated: "+JSON.stringify(this.state.update)),d.a.createElement(p.InfoArticle,{key:"ii_article",header:"Interface"},d.a.createElement(p.InfoColumns,{key:"ii_columns",columns:3},d.a.createElement(f.TextInput,{key:"ii_name",id:"name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement("div",null),d.a.createElement(f.SelectInput,{key:"ii_class",id:"class",value:this.state.data.class,onChange:this.onChange},this.state.classes.map((function(e){return d.a.createElement("option",{key:e,value:e},e)}))),d.a.createElement("div",null),d.a.createElement(f.TextInput,{key:"ii_description",id:"description",value:this.state.data.description,onChange:this.onChange}),d.a.createElement("div",null),d.a.createElement(f.TextInput,{key:"ii_snmp_index",id:"snmp_index",label:"SNMP index",value:this.state.data.snmp_index,onChange:this.onChange}),d.a.createElement("div",null),d.a.createElement(f.TextInput,{key:"ii_mac",id:"mac",value:this.state.data.mac,onChange:this.onChange}),d.a.createElement("div",null),d.a.createElement(f.TextInput,{key:"ii_ipam1_id",id:"ipam_id",label:"IPAM id",value:this.state.data.ipam_id,onChange:this.onChange}),d.a.createElement("div",null,t&&d.a.createElement(m.GoButton,{key:"ii_btn_ipam1",onClick:function onClick(){return e.changeIpam(t)},title:"Edit IPAM entry"}),t&&d.a.createElement(m.RemoveButton,{key:"ii_btn_remove1",onClick:function onClick(){return e.clearIpam("ipam_id")},title:"Clear IPAM entry"}),t&&d.a.createElement(m.DeleteButton,{key:"ii_btn_delete1",onClick:function onClick(){return e.deleteIpam("ipam_id")},title:"Delete IPAM entry"}),!t&&"new"!==this.state.data.interface_id&&d.a.createElement(m.AddButton,{key:"ii_btn_add1",onClick:function onClick(){return e.stateIpam("ipam_id")},title:"Create IPAM entry"})),t&&d.a.createElement(s.Fragment,{key:"ii_ipam1_frag"},d.a.createElement(f.TextLine,{key:"ii_ipam1",id:"IPAM ip",text:this.state.ip[t]}),d.a.createElement("div",null)),d.a.createElement(f.TextInput,{key:"ii_ipam2_id",id:"ipam_alt_id",label:"IPAM alt id",value:this.state.data.ipam_alt_id,onChange:this.onChange}),d.a.createElement("div",null,n&&d.a.createElement(m.GoButton,{key:"ii_btn_ipam2",onClick:function onClick(){return e.changeIpam(n)},title:"Edit IPAM entry"}),n&&d.a.createElement(m.RemoveButton,{key:"ii_btn_remove2",onClick:function onClick(){return e.clearIpam("ipam_alt_id")},title:"Clear IPAM entry"}),n&&d.a.createElement(m.DeleteButton,{key:"ii_btn_delete2",onClick:function onClick(){return e.deleteIpam("ipam_alt_id")},title:"Delete IPAM entry"}),!n&&"new"!==this.state.data.interface_id&&d.a.createElement(m.AddButton,{key:"ii_btn_add2",onClick:function onClick(){return e.stateIpam("ipam_alt_id")},title:"Create IPAM entry"})),n&&d.a.createElement(s.Fragment,{key:"ii_ipam2_frag"},d.a.createElement(f.TextLine,{key:"ii_ipam2",id:"IPAM alt ip",text:this.state.ip[n]}),d.a.createElement("div",null)),a&&d.a.createElement(s.Fragment,{key:"ii_frag_peer_int"},d.a.createElement(f.TextLine,{key:"ii_peer_int_id",id:"peer_interface",label:"Peer interface",text:this.state.peer.interface_id}),d.a.createElement(m.UnlinkButton,{key:"ii_peer_unlink",onClick:function onClick(){return e.disconnectInterface()},title:"Disconnect from peer"})),a&&d.a.createElement(s.Fragment,{key:"ii_frag_peer_dev"},d.a.createElement(f.TextLine,{key:"ii_peer_dev_id",id:"peer_device",text:this.state.peer.device_id}),d.a.createElement("div",null))),"changeSelf"in this.props&&d.a.createElement(m.ItemsButton,{key:"ii_btn_list",onClick:function onClick(){return e.props.changeSelf(d.a.createElement(_,{key:"interface_list",device_id:e.state.data.device_id,changeSelf:e.props.changeSelf}))},title:"Interfaces"}),d.a.createElement(m.ReloadButton,{key:"ii_btn_reload",onClick:function onClick(){return e.componentDidMount()}}),d.a.createElement(m.SaveButton,{key:"ii_btn_save",onClick:function onClick(){return e.updateInfo()},title:"Save interface information"}),!a&&"new"!==this.state.data.interface_id&&["wired","optical"].includes(this.state.data.class)&&d.a.createElement(m.LinkButton,{key:"ii_btn_connect",onClick:function onClick(){return e.setState({op:"device"})},title:"Connect peer interface"}),t&&n&&d.a.createElement(m.SyncButton,{key:"ii_btn_swap",onClick:function onClick(){return e.swapIpam()},title:"Swap Primary and Alternative IPAM id"}),d.a.createElement(p.Result,{key:"ii_result",result:i}))}return d.a.createElement(p.Spinner,null)}}]),Info}(s.Component),k=function(e){Object(l.a)(ConnectionInfo,e);var t=Object(o.a)(ConnectionInfo);function ConnectionInfo(e){var n;return Object(c.a)(this,ConnectionInfo),(n=t.call(this,e)).onChange=function(e){return n.setState({data:Object(i.a)({},n.state.data,Object(a.a)({},e.target.name,e.target["checkbox"!==e.target.type?"value":"checked"]))})},n.updateInfo=function(){return Object(u.d)("api/interface/connection_info",Object(i.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={},n}return Object(r.a)(ConnectionInfo,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/interface/connection_info",{connection_id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return this.state.interfaces?d.a.createElement(p.InfoArticle,{key:"ci_article",header:"Connection "+this.props.id},d.a.createElement(p.InfoColumns,{key:"ci_columns"},d.a.createElement(f.CheckboxInput,{key:"map",id:"map",value:this.state.data.map,onChange:this.onChange}),this.state.interfaces.map((function(e,t){return d.a.createElement(f.TextLine,{key:t,id:"interface_"+t,text:"".concat(e.device_name," - ").concat(e.interface_name," (").concat(e.interface_id,")")})}))),d.a.createElement(m.BackButton,{key:"ci_btn_back",onClick:function onClick(){return e.props.changeSelf(d.a.createElement(_,{key:"interface_list",device_id:e.props.device_id,changeSelf:e.props.changeSelf}))},title:"Back"}),d.a.createElement(m.SaveButton,{key:"ci_btn_save",onClick:function onClick(){return e.updateInfo()},title:"Save connection information"})):d.a.createElement(p.Spinner,null)}}]),ConnectionInfo}(s.Component),C=function(e){Object(l.a)(LLDP,e);var t=Object(o.a)(LLDP);function LLDP(e){var n;return Object(c.a)(this,LLDP),(n=t.call(this,e)).listItem=function(e){return[e.chassis_id,e.chassis_type,e.sys_name,e.port_id,e.port_type,e.port_desc,e.snmp_index,e.snmp_name,e.connection_id,e.status]},n.state={},n}return Object(r.a)(LLDP,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/interface/lldp_mapping",{device_id:this.props.device_id}).then((function(t){return e.setState({data:Object.values(t.data)})}))}},{key:"render",value:function render(){var e=this;return this.state.data?d.a.createElement(p.ContentReport,{key:"il_cr",header:"Interface",thead:["Chassis","Type","Name","Port ID","Type","Description","SNMP Index","SNMP Name","Conn","Status"],trows:this.state.data,listItem:this.listItem},d.a.createElement(m.BackButton,{key:"il_btn_back",onClick:function onClick(){return e.props.changeSelf(d.a.createElement(_,{key:"interface_list",device_id:e.props.device_id}))},title:"Back"})):d.a.createElement(p.Spinner,null)}}]),LLDP}(s.Component)}}]);
//# sourceMappingURL=1.a819951d.chunk.js.map