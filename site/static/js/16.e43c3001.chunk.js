(this.webpackJsonprims=this.webpackJsonprims||[]).push([[16],{52:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return h})),n.d(t,"Report",(function(){return p}));var a=n(18),i=n(15),r=n(4),o=n(5),s=n(6),c=n(7),u=n(0),d=n.n(u),l=n(12),v=n(13),m=n(19),f=n(14),h=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).extendItem=function(e,t,n){Object(l.c)("api/reservation/update",{op:"extend",device_id:e,user_id:t,days:n}).then((function(e){return a.componentDidMount()}))},a.changeContent=function(e){return a.setState({content:e})},a.deleteItem=function(e,t){return window.confirm("Remove reservation?")&&Object(l.c)("api/reservation/update",{op:"delete",device_id:e,user_id:t}).then((function(t){return t.deleted&&a.setState({data:a.state.data.filter((function(t){return t.device_id!==e})),content:null})}))},a.listItem=function(e){var t=a.context.settings.id===e.user_id||!e.valid;return[e.alias,e.hostname,e.end,d.a.createElement(u.Fragment,{key:"reservation_buttons"},t&&d.a.createElement(m.InfoButton,{key:"rsv_btn_info_"+e.device_id,onClick:function(){a.changeContent(d.a.createElement(_,{key:"rsv_device_"+e.device_id,device_id:e.device_id,user_id:e.user_id}))},title:"Info"}),t&&d.a.createElement(m.AddButton,{key:"rsv_btn_ext_"+e.device_id,onClick:function(){a.extendItem(e.device_id,e.user_id,14)},title:"Extend reservation"}),t&&d.a.createElement(m.DeleteButton,{key:"rsv_btn_del_"+e.device_id,onClick:function(){a.deleteItem(e.device_id,e.user_id)},title:"Remove reservation"}))]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(l.c)("api/reservation/list").then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return d.a.createElement(u.Fragment,{key:"rsv_fragment"},d.a.createElement(v.ContentList,{key:"rsv_cl",header:"Reservations",thead:["User","Device","Until",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(m.ReloadButton,{key:"rsv_btn_reload",onClick:function(){return e.componentDidMount()}})),d.a.createElement(v.ContentData,{key:"rsv_cd"},this.state.content))}}]),n}(u.Component);h.contextType=v.RimsContext;var _=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).onChange=function(e){return o.setState({data:Object(i.a)({},o.state.data,Object(a.a)({},e.target.name,e.target.value))})},o.updateInfo=function(){return Object(l.c)("api/reservation/info",Object(i.a)({op:"update"},o.state.data)).then((function(e){return o.setState(e)}))},o.state={data:null,found:!0},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(l.c)("api/reservation/info",{device_id:this.props.device_id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){var e=this;return this.state.data?d.a.createElement(v.InfoArticle,{key:"rsv_article",header:"Reservation"},d.a.createElement(v.InfoColumns,{key:"reservation_content"},d.a.createElement(f.TextLine,{key:"alias",id:"alias",text:this.state.data.alias}),d.a.createElement(f.TextLine,{key:"time_start",id:"Start",text:this.state.data.time_start}),d.a.createElement(f.TextLine,{key:"time_end",id:"End",text:this.state.data.time_end}),d.a.createElement(f.RadioInput,{key:"shutdown",id:"shutdown",value:this.state.data.shutdown,options:[{text:"no",value:0},{text:"yes",value:1},{text:"reset",value:2}],onChange:this.onChange}),d.a.createElement(f.TextInput,{key:"info",id:"info",value:this.state.data.info,onChange:this.onChange})),d.a.createElement(m.SaveButton,{key:"rsv_btn_save",onClick:function(){return e.updateInfo()},title:"Save"})):d.a.createElement(v.Spinner,null)}}]),n}(u.Component),p=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).listItem=function(e){return[e.alias,e.hostname,e.start,e.end,e.info]},a.state={},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(l.c)("api/reservation/list",{extended:!0}).then((function(t){return e.setState(t)}))}},{key:"render",value:function(){return d.a.createElement(v.ContentReport,{key:"rsv_cr",header:"Reservations",thead:["User","Device","Start","End","Info"],trows:this.state.data,listItem:this.listItem})}}]),n}(u.Component)}}]);
//# sourceMappingURL=16.e43c3001.chunk.js.map