"use strict";(self.webpackChunkrims_frontend=self.webpackChunkrims_frontend||[]).push([[531,682],{531:function(t,e,n){n.r(e),n.d(e,{Info:function(){return C},Main:function(){return x},ModelInfo:function(){return A},New:function(){return F},Report:function(){return N},ReportSoftware:function(){return L}});var i=n(942),a=n(413),s=n(671),o=n(144),r=n(340),c=n(882),u=n(791),d=n(252),l=n(885),h=n(355),p=n(698),f=n(682),v=n(224),m=n(582),_=n(184),x=function(t){(0,r.Z)(i,t);var e=(0,c.Z)(i);function i(t){var n;return(0,s.Z)(this,i),(n=e.call(this,t)).compileNavItems=function(){n.context.loadNavigation((0,_.jsxs)(h.NavBar,{children:[(0,_.jsxs)(h.NavDropDown,{title:"Devices",children:[(0,_.jsx)(h.NavDropButton,{title:"List",onClick:function(){return n.changeContent((0,_.jsx)(g,{rack_id:n.state.rack_id},"dl"))}},"dev_nav_list"),(0,_.jsx)(h.NavDropButton,{title:"Search",onClick:function(){return n.changeContent((0,_.jsx)(j,{changeSelf:n.changeContent},"ds"))}},"dev_nav_srch"),(0,_.jsx)(h.NavDropButton,{title:"New",onClick:function(){return n.changeContent((0,_.jsx)(F,{ip:"0.0.0.0"},"dn"))}},"dev_nav_new"),(0,_.jsx)(h.NavDropButton,{title:"Types",onClick:function(){return n.changeContent((0,_.jsx)(T,{changeSelf:n.changeContent},"dtl"))}},"dev_nav_types"),(0,_.jsx)(h.NavDropButton,{title:"Models",onClick:function(){return n.changeContent((0,_.jsx)(R,{},"dml"))}},"dev_nav_model")]},"dev_nav_devs"),(0,_.jsxs)(h.NavDropDown,{title:"Tools",children:[(0,_.jsx)(h.NavDropButton,{title:"FDB Search",onClick:function(){return n.changeContent((0,_.jsx)(v.Search,{changeSelf:n.changeContent},"fdb_search"))}},"dev_nav_fdbx"),(0,_.jsx)(h.NavDropButton,{title:"FDB List",onClick:function(){return n.changeContent((0,_.jsx)(v.List,{changeSelf:n.changeContent},"fdb_list"))}},"dev_nav_fdbs"),(0,_.jsx)(h.NavDropButton,{title:"OUI Search",onClick:function(){return n.changeContent((0,_.jsx)(P,{},"oui_search"))}},"dev_nav_ouis"),(0,_.jsx)(h.NavDropButton,{title:"OUI List",onClick:function(){return n.changeContent((0,_.jsx)(U,{},"oui_list"))}},"dev_nav_ouil"),(0,_.jsx)(h.NavDropButton,{title:"Reservations",onClick:function(){return n.changeImport("reservation","List",{})}},"dev_nav_resv")]},"dev_nav_tools"),n.state.pdu.length>0&&(0,_.jsx)(h.NavDropDown,{title:"PDUs",children:n.state.pdu.map((function(t,e){return(0,_.jsx)(h.NavDropButton,{title:t.hostname,onClick:function(){return n.changeImport("pdu","Inventory",{device_id:t.id,type:t.type})}},"dev_nav_pdu_"+e)}))},"dev_nav_pdus"),n.state.console.length>0&&(0,_.jsx)(h.NavDropDown,{title:"Consoles",children:n.state.console.map((function(t,e){return(0,_.jsx)(h.NavDropButton,{title:t.hostname,onClick:function(){return n.changeImport("console","Inventory",{device_id:t.id,type:t.type})}},"dev_nav_console_"+e)}))},"dev_nav_consoles"),n.state.rack_id&&(0,_.jsx)(h.NavButton,{title:n.state.name,onClick:function(){return n.changeImport("rack","Layout",{id:n.state.rack_id})}},"dev_nav_rack"),(0,_.jsx)(h.NavButton,{title:"Maps",onClick:function(){return n.changeImport("visualize","List",{})},style:{float:"right"}},"dev_nav_maps"),(0,_.jsxs)(h.NavDropDown,{title:"IPAM",style:{float:"right"},children:[(0,_.jsx)(h.NavDropButton,{title:"Networks",onClick:function(){return n.changeImport("ipam","NetworkList",{})}},"dev_nav_nets"),(0,_.jsx)(h.NavDropButton,{title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"DHCP"})}},"dev_nav_isrv")]},"dev_nav_ipam"),(0,_.jsxs)(h.NavDropDown,{title:"DNS",style:{float:"right"},children:[(0,_.jsx)(h.NavDropButton,{title:"Domains",onClick:function(){return n.changeImport("dns","DomainList",{})}},"dev_nav_doms"),(0,_.jsx)(h.NavDropButton,{title:"Servers",onClick:function(){return n.changeImport("server","List",{type:"NAMESERVER"})}},"dev_nav_dsrv"),(0,_.jsx)(h.NavDropButton,{title:"Recursors",onClick:function(){return n.changeImport("server","List",{type:"RECURSOR"})}},"dev_nav_recs")]},"dev_nav_dns")]},"device_navbar"))},n.changeContent=function(t){return n.setState({content:t})},n.state={pdu:[],console:[],name:"N/A",rack_id:void 0},n}return(0,o.Z)(i,[{key:"componentDidMount",value:function(){var t=this;this.props.rack_id?(0,d.Fh)("api/rack/inventory",{id:this.props.rack_id}).then((function(e){Object.assign(t.state,(0,a.Z)({rack_id:t.props.rack_id},e)),t.compileNavItems()})):this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"changeImport",value:function(t,e,i){var s=this;n(421)("./"+t+".jsx").then((function(n){var o=n[e];s.setState({content:(0,_.jsx)(o,(0,a.Z)({},i),t+"_"+e)})}))}},{key:"render",value:function(){return(0,_.jsx)(_.Fragment,{children:this.state.content})}}]),i}(u.Component);x.contextType=l.RimsContext;var j=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,s.Z)(this,n),(a=e.call(this,t)).onChange=function(t){return a.setState((0,i.Z)({},t.target.name,t.target.value))},a.state={field:"ip",search:""},a}return(0,o.Z)(n,[{key:"render",value:function(){var t=this;return(0,_.jsxs)(l.LineArticle,{header:"Device Search",children:[(0,_.jsxs)(p.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[(0,_.jsxs)("optgroup",{label:"Group",children:[(0,_.jsx)("option",{value:"hostname",children:"Hostname"}),(0,_.jsx)("option",{value:"type",children:"Type"}),(0,_.jsx)("option",{value:"model",children:"Model"})]}),(0,_.jsxs)("optgroup",{label:"Unique",children:[(0,_.jsx)("option",{value:"id",children:"ID"}),(0,_.jsx)("option",{value:"ip",children:"IP"}),(0,_.jsx)("option",{value:"mac",children:"MAC"}),(0,_.jsx)("option",{value:"interface_id",children:"Interface ID"})]})]},"field"),(0,_.jsx)(p.SearchInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),(0,_.jsx)(f.SearchButton,{onClick:function(){return t.props.changeSelf((0,_.jsx)(g,(0,a.Z)({},t.state),"device_list"))},title:"Search devices"},"ds_btn_search")]},"ds_art")}}]),n}(u.Component),g=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,s.Z)(this,n),(a=e.call(this,t)).onChange=function(t){return a.setState((0,i.Z)({},t.target.name,t.target.value))},a.sortList=function(t){"hostname"===t?a.state.data.sort((function(t,e){return t.hostname.localeCompare(e.hostname)})):a.state.data.sort((function(t,e){return t.ip&&e.ip?Number(t.ip.split(".").map((function(t){return"000".concat(t).slice(-3)})).join(""))-Number(e.ip.split(".").map((function(t){return"000".concat(t).slice(-3)})).join("")):t.ip?1:t.hostname.localeCompare(e.hostname)})),a.setState({sort:t})},a.listItem=function(t){return[t.ip,(0,_.jsx)(f.HrefButton,{text:t.hostname,onClick:function(){return a.changeContent((0,_.jsx)(C,{id:t.id,changeSelf:a.changeContent},"di_"+t.id))},title:t.id},"info_"+t.id),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.StateLeds,{state:t.ip_state?t.ip_state:t.if_state},"state"),(0,_.jsx)(f.InfoButton,{onClick:function(){return a.changeContent((0,_.jsx)(C,{id:t.id,changeSelf:a.changeContent},"di_"+t.id))},title:t.id},"info"),(0,_.jsx)(f.DeleteButton,{onClick:function(){return a.deleteList(t.id)},title:"Delete device"},"del")]})]},a.deleteList=function(t){return window.confirm("Really delete device "+t+"?")&&(0,d.Fh)("api/device/delete",{id:t}).then((function(e){e.deleted&&(a.setState({data:a.state.data.filter((function(e){return e.id!==t}))}),a.changeContent(null))}))},a.state={data:null,sort:t.hasOwnProperty("sort")?t.sort:"hostname",rack_id:a.props.rack_id,searchfield:"",field:a.props.field?a.props.field:"id",search:a.props.search?a.props.search:""},a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/list",{sort:this.state.sort,rack_id:this.state.rack_id,field:this.state.field,search:this.state.search}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data,n=this.state.searchfield.toLowerCase(),i=0===n.length?e:e.filter((function(t){return t.hostname.toLowerCase().includes(n)||t.ip&&t.ip.includes(n)})),a=[(0,_.jsx)(f.HeaderButton,{text:"IP",highlight:"ip"===this.state.sort,onClick:function(){return t.sortList("ip")}},"sort_ip"),(0,_.jsx)(f.HeaderButton,{text:"Hostname",highlight:"hostname"===this.state.sort,onClick:function(){return t.sortList("hostname")}},"sort_hostname"),""];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(l.ContentList,{header:"Device List",thead:a,listItem:this.listItem,trows:i,children:[(0,_.jsx)(f.ItemsButton,{onClick:function(){Object.assign(t.state,{rack_id:void 0,field:"ip",search:""}),t.componentDidMount()},title:"List all items"},"items"),(0,_.jsx)(f.AddButton,{onClick:function(){return t.changeContent((0,_.jsx)(F,{ip:"0.0.0.0"},"dn_new"))},title:"Add device"},"add"),(0,_.jsx)(f.DevicesButton,{onClick:function(){return t.changeContent((0,_.jsx)(M,{},"device_discover"))},title:"Discover new devices"},"devices"),(0,_.jsx)("br",{}),(0,_.jsxs)(p.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[(0,_.jsxs)("optgroup",{label:"Group",children:[(0,_.jsx)("option",{value:"hostname",children:"Hostname"}),(0,_.jsx)("option",{value:"type",children:"Type"}),(0,_.jsx)("option",{value:"model",children:"Model"})]}),(0,_.jsxs)("optgroup",{label:"Unique",children:[(0,_.jsx)("option",{value:"id",children:"ID"}),(0,_.jsx)("option",{value:"ip",children:"IP"}),(0,_.jsx)("option",{value:"mac",children:"MAC"}),(0,_.jsx)("option",{value:"interface_id",children:"Interface ID"})]})]},"field"),(0,_.jsx)(p.SearchInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),(0,_.jsx)(f.SearchButton,{onClick:function(){return t.componentDidMount()},title:"Search specific device"},"reload"),(0,_.jsx)(p.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Filter devices"},"filter")]},"mcl"),(0,_.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),C=function(t){(0,r.Z)(u,t);var e=(0,c.Z)(u);function u(t){var o;return(0,s.Z)(this,u),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.changeContent=function(t){return o.setState({content:t})},o.changeSelf=function(t){return o.props.changeSelf(t)},o.updateInfo=function(){return(0,d.Fh)("api/device/info",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.reload=function(){o.setState({rack:void 0,vm:void 0}),(0,d.Fh)("api/device/info",{id:o.props.id}).then((function(t){return o.setState(t)}))},o.lookupInfo=function(){o.setState({content:(0,_.jsx)(l.Spinner,{}),result:""}),(0,d.Fh)("api/device/info",{id:o.props.id,op:"lookup"}).then((function(t){return o.setState((0,a.Z)((0,a.Z)({},t),{},{content:null}))}))},o.changeInterfaces=function(){return n.e(167).then(n.bind(n,167)).then((function(t){return o.changeContent((0,_.jsx)(t.List,{device_id:o.props.id,changeSelf:o.changeContent},"interface_list"))}))},o.changeVisualize=function(){return n.e(559).then(n.bind(n,559)).then((function(t){return o.changeSelf((0,_.jsx)(t.Edit,{type:"device",changeSelf:o.changeSelf,id:o.props.id},"viz_id_"+o.props.id))}))},o.state={data:void 0,found:!0,content:null,navconf:!1},o}return(0,o.Z)(u,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/info",{id:this.props.id,extra:["types","classes"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data,n=this.state.extra,i=!("vm"!==e.class||!this.state.vm)&&this.state.vm,a=!(!this.state.rack||"vm"===e.class)&&this.state.rack,s=this.props.changeSelf,o=n.ip,r=n.functions.length>0?n.functions.split(","):[],c=this.state.types.find((function(t){return t.id===parseInt(e.type_id)}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(l.InfoArticle,{header:"Device",children:[(0,_.jsxs)(l.InfoColumns,{style:{float:"left"},children:[(0,_.jsx)(p.TextLine,{id:"hostname",text:e.hostname},"hostname"),(0,_.jsx)(p.TextInput,{id:"mac",label:"MAC",value:e.mac,title:"System MAC",onChange:this.onChange},"mac"),o&&(0,_.jsx)(p.TextLine,{id:"ip",label:"Mgmt IP",text:n.ip},"ip"),o&&(0,_.jsx)(p.StateLine,{id:"state",state:n.state},"state"),(0,_.jsx)(p.TextLine,{id:"system_id",label:"System ID",text:this.props.id},"system_id")]},"ic_info"),(0,_.jsxs)(l.InfoColumns,{style:{float:"left"},children:[(0,_.jsx)(p.SelectInput,{id:"class",value:e.class,onChange:this.onChange,children:this.state.classes.map((function(t){return(0,_.jsx)("option",{value:t,children:t},t)}))},"class"),(0,_.jsx)(p.SelectInput,{id:"type_id",label:"Type",value:e.type_id,onChange:this.onChange,children:this.state.types.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"type_id"),(0,_.jsx)(p.TextInput,{id:"model",value:e.model,onChange:this.onChange,extra:e.model},"model"),(0,_.jsx)(p.TextLine,{id:"version",text:e.version},"version"),(0,_.jsx)(p.TextInput,{id:"serial",label:"S/N",value:e.serial,onChange:this.onChange},"serial")]},"ic_extra"),(0,_.jsxs)(l.InfoColumns,{style:{float:"left"},children:[a&&(0,_.jsx)(p.TextLine,{id:"rack_pos",label:"Rack/Pos",text:"".concat(a.rack_name," (").concat(a.rack_unit,")")},"pos"),a&&(0,_.jsx)(p.TextLine,{id:"rack_size",label:"Size (U)",text:a.rack_size},"size"),a&&(0,_.jsx)(p.TextLine,{id:"rack_con",label:"TS/Port",text:"".concat(a.console_name," (").concat(a.console_port,")")},"con"),a&&this.state.pems.map((function(t){return(0,_.jsx)(p.TextLine,{id:"pem_"+t.id,label:t.name+" PDU",text:"".concat(t.pdu_name," (").concat(t.pdu_unit,")")},t.id)}))]},"ic_rack"),(0,_.jsxs)(l.InfoColumns,{style:{float:"left"},children:[i&&(0,_.jsx)(p.TextLine,{id:"vm_name",label:"VM Name",text:i.name},"name"),i&&(0,_.jsx)(p.TextLine,{id:"vm_host",label:"VM Host",text:i.host},"host"),i&&(0,_.jsx)(p.TextLine,{id:"vm_uuid",label:"VM UUID",text:i.bios_uuid,style:{maxWidth:170},extra:i.bios_uuid},"uuid"),i&&(0,_.jsx)(p.TextLine,{id:"vm_uuhost",label:"Host UUID",text:i.server_uuid,style:{maxWidth:170},extra:i.server_uuid},"uuhost")]},"ic_vm"),(0,_.jsxs)(l.InfoColumns,{style:{clear:"both"},children:[(0,_.jsx)(p.TextInput,{id:"comment",value:e.comment,onChange:this.onChange},"comment"),(0,_.jsx)(p.UrlInput,{id:"url",label:"URL",value:e.url,onChange:this.onChange},"url")]},"ic_text"),(0,_.jsx)(f.ReloadButton,{onClick:function(){return t.reload()}},"reload"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"save"),(0,_.jsx)(f.ConfigureButton,{onClick:function(){return t.setState({navconf:!t.state.navconf})},title:"Toggle config mode"},"edit"),(0,_.jsx)(f.StartButton,{onClick:function(){return t.changeContent((0,_.jsx)(w,{id:t.props.id},"device_control"))},title:"Device control"},"cont"),(0,_.jsx)(f.CheckButton,{onClick:function(){return t.changeContent((0,_.jsx)(B,{id:t.props.id},"device_configure"))},title:"Configuration template"},"conf"),s&&(0,_.jsx)(f.NetworkButton,{onClick:function(){return t.changeVisualize()},title:"Connectivity map"},"netw"),o&&(0,_.jsx)(f.SearchButton,{onClick:function(){return t.lookupInfo()},title:"Information lookup"},"search"),r.includes("manage")&&(0,_.jsx)(f.GoButton,{onClick:function(){return t.context.changeMain({module:t.state.extra.type_base,function:"Manage",args:{device_id:t.props.id,type:t.state.extra.type_name}})},title:"Manage "+e.hostname},"manage"),o&&(0,_.jsx)(f.TermButton,{onClick:function(){return window.open("ssh://".concat(n.username,"@").concat(n.ip),"_self")},title:"SSH connection"},"ssh"),a&&a.console_url&&(0,_.jsx)(f.TermButton,{onClick:function(){return window.open(a.console_url,"_self")},title:"Serial Connection"},"console"),e.url&&(0,_.jsx)(f.UiButton,{onClick:function(){return window.open(e.url,"_blank")},title:"Web UI"},"ui"),(0,_.jsx)(l.Result,{result:JSON.stringify(this.state.update)},"result")]},"di_ia"),(0,_.jsxs)(h.NavBar,{id:"di_navigation",children:[this.state.navconf&&(0,_.jsx)(h.NavButton,{title:"Management",onClick:function(){return t.changeContent((0,_.jsx)(S,{id:t.props.id},"device_configure"))}},"management"),this.state.navconf&&["infrastructure","out-of-band"].includes(e.class)&&(0,_.jsx)(h.NavButton,{title:"Rack",onClick:function(){return t.changeContent((0,_.jsx)(k,{device_id:t.props.id},"device_rack_info"))}},"rack"),this.state.navconf&&["device","infrastructure","out-of-band"].includes(e.class)&&(0,_.jsx)(h.NavButton,{title:"PEMs",onClick:function(){return t.changeContent((0,_.jsx)(I,{device_id:t.props.id,changeSelf:t.changeContent},"device_pem_list"))}},"pems"),!this.state.navconf&&(0,_.jsx)(h.NavButton,{title:"Interfaces",onClick:function(){return t.changeInterfaces()}},"interfaces"),!this.state.navconf&&["infrastructure","out-of-band","vm"].includes(e.class)&&(0,_.jsx)(h.NavButton,{title:"Statistics",onClick:function(){return t.changeContent((0,_.jsx)(D,{device_id:t.props.id,changeSelf:t.changeContent},"statistics_list"))}},"stats"),!this.state.navconf&&"network"===c.base&&o&&(0,_.jsx)(h.NavButton,{title:"FDB",onClick:function(){return t.changeContent((0,_.jsx)(v.Device,{id:t.props.id,ip:n.ip,type:c.name,changeSelf:t.changeContent},"fdb_device"))}},"fdb"),!this.state.navconf&&r.filter((function(t){return"manage"!==t})).map((function(e,n){return(0,_.jsx)(h.NavButton,{title:e.replace("_"," "),onClick:function(){return t.changeContent((0,_.jsx)(O,{id:t.props.id,op:e,type:t.state.extra.type_name},"dev_func_"+e))}},"nav_"+n)}))]},"device_navigation"),this.state.content]})}return(0,_.jsx)(l.Spinner,{})}}]),u}(u.Component);C.contextType=l.RimsContext;var S=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.changeContent=function(t){return o.setState({content:t})},o.updateInfo=function(){return(0,d.Fh)("api/device/extended",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:void 0,found:!0,content:null},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/extended",{id:this.props.id,extra:["domains"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data&&this.state.domains?(0,_.jsxs)(l.InfoArticle,{header:"Management Configuration",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.TextInput,{id:"hostname",value:this.state.data.hostname,onChange:this.onChange},"d_conf_hostname"),(0,_.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"d_conf_a_domain_id"),(0,_.jsx)(p.SelectInput,{id:"ipam_id",label:"Mgmt IP",value:this.state.data.ipam_id,onChange:this.onChange,children:this.state.interfaces.map((function(t,e){return(0,_.jsx)("option",{value:t.ipam_id,children:"".concat(t.ip," (").concat(t.name,")")},e)}))},"d_conf_ipam_id"),(0,_.jsx)(p.TextLine,{id:"id",label:"Local ID",text:this.props.id,title:"Database ID"},"id"),(0,_.jsx)(p.TextLine,{id:"snmp",label:"SNMP",text:this.state.data.snmp},"snmp"),(0,_.jsx)(p.TextLine,{id:"oid",label:"Priv OID",text:this.state.extra.oid},"d_conf_oid"),(0,_.jsx)(p.TextLine,{id:"oui",label:"System OUI",text:this.state.extra.oui},"d_conf_oui")]},"d_conf_ic"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_conf_btn_save"),(0,_.jsx)(l.Result,{result:this.state.status},"d_conf_result")]},"d_conf_art"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),k=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.updateInfo=function(){return(0,d.Fh)("api/device/rack",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/rack",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.data.rack_id&&"NULL"!==this.state.data.rack_id;return(0,_.jsxs)(l.InfoArticle,{header:"Rack",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.SelectInput,{id:"rack_id",label:"Rack ID",value:this.state.data.rack_id,onChange:this.onChange,children:this.state.racks.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"d_rack_id"),e&&(0,_.jsx)(p.TextInput,{id:"rack_size",label:"Size",value:this.state.data.rack_size,onChange:this.onChange,title:"Size of device in U"},"d_rack_size"),e&&(0,_.jsx)(p.TextInput,{id:"rack_unit",label:"Unit",value:this.state.data.rack_unit,onChange:this.onChange,title:"First unit of placement"},"d_rack_unit"),e&&(0,_.jsx)(p.SelectInput,{id:"console_id",label:"Console",value:this.state.data.console_id,onChange:this.onChange,children:this.state.consoles.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.hostname},e)}))},"d_rack_con_id"),e&&(0,_.jsx)(p.TextInput,{id:"console_port",label:"Console Port",value:this.state.data.console_port,onChange:this.onChange},"d_rack_con_port")]},"d_rack_ic"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_rack_btn_save")]},"d_rack_art")}return(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),I=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).changeContent=function(t){return i.props.changeSelf(t)},i.deleteList=function(t){return window.confirm("Really delete PEM?")&&(0,d.Fh)("api/pem/delete",{id:t}).then((function(e){return e.deleted&&i.setState({data:i.state.data.filter((function(e){return e.id!==t})),content:null})}))},i.listItem=function(t){return[t.id,t.name,t.pdu_id,t.pdu_name,t.pdu_slot,t.pdu_unit,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.InfoButton,{onClick:function(){return i.changeContent((0,_.jsx)(y,{id:t.id,device_id:i.props.device_id,changeSelf:i.changeContent},"pem_info_"+t.id))},title:"Edit PEM information"},"info"),(0,_.jsx)(f.DeleteButton,{onClick:function(){return i.deleteList(t.id)},title:"Delete PEM"},"del")]})]},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/pem/list",{device_id:this.props.device_id,lookup:!0}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(l.ContentReport,{header:"PEMs",thead:["ID","Name","PDU ID","PDU Name","PDU Slot","PDU Unit",""],trows:this.state.data,listItem:this.listItem,children:[(0,_.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"pems_btn_reload"),(0,_.jsx)(f.AddButton,{onClick:function(){return t.changeContent((0,_.jsx)(y,{id:"new",device_id:t.props.device_id,changeSelf:t.changeContent},"pem_new"))},title:"Add PEM"},"pems_btn_add")]},"pems"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),y=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.updateInfo=function(){return(0,d.Fh)("api/pem/info",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/pem/info",{id:this.props.id,device_id:this.props.device_id}).then((function(e){return t.setState(e)})),(0,d.Fh)("api/pdu/list",{device_id:this.props.device_id,empty:!0}).then((function(e){return t.setState({pdus:e.data})}))}},{key:"render",value:function(){var t=this;if(this.state.data&&this.state.pdus){var e=this.state.pdus.find((function(e){return parseInt(e.device_id)===parseInt(t.state.data.pdu_id)})),n=[];if(e)for(var i=0;i<e.slots;i++)n.push({id:i,name:e["".concat(i,"_slot_name")]});return(0,_.jsxs)(l.InfoArticle,{header:"PEM",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange},"d_pem_name"),(0,_.jsx)(p.SelectInput,{id:"pdu_id",label:"PDU",value:this.state.data.pdu_id,onChange:this.onChange,children:this.state.pdus.map((function(t,e){return(0,_.jsx)("option",{value:t.device_id,children:t.name},e)}))},"d_pem_pdu_id"),(0,_.jsx)(p.SelectInput,{id:"pdu_slot",label:"Slot",value:this.state.data.pdu_slot,onChange:this.onChange,children:n.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"d_pem_pdu_slot"),(0,_.jsx)(p.TextInput,{id:"pdu_unit",label:"Unit",value:this.state.data.pdu_unit,onChange:this.onChange},"d_pem_pdu_unit")]},"d_pem_ic"),(0,_.jsx)(f.BackButton,{onClick:function(){return t.props.changeSelf((0,_.jsx)(I,{device_id:t.props.device_id,changeSelf:t.props.changeSelf},"device_pem_list"))}},"d_pem_btn_back"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_pem_btn_save"),(0,_.jsx)(l.Result,{result:this.state.update?this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update):""},"d_pem_result")]},"d_pem_art")}return(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),D=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).loadList=function(t){return(0,d.Fh)("api/statistics/list",{device_id:i.props.device_id}).then((function(e){return i.setState(t?(0,a.Z)((0,a.Z)({},e),{},{result:"",inserts:""}):e)}))},i.changeContent=function(t){return i.props.changeSelf(t)},i.deleteList=function(t){return window.confirm("Really delete statistics point?")&&(0,d.Fh)("api/statistics/delete",{id:t}).then((function(e){return e.deleted&&i.setState({data:i.state.data.filter((function(e){return e.id!==t})),content:null})}))},i.lookupStats=function(){return(0,d.Fh)("api/statistics/lookup",{device_id:i.props.device_id}).then((function(t){i.setState(t),i.loadList()}))},i.listItem=function(t){return[t.id,t.measurement,t.tags,t.name,t.oid,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.InfoButton,{onClick:function(){return i.changeContent((0,_.jsx)(b,{id:t.id,device_id:i.props.device_id},"statistics_info_"+t.id))},title:"Edit data point"},"info"),t.measurement&&t.name&&(0,_.jsx)(f.HealthButton,{onClick:function(){return i.changeContent((0,_.jsx)(Z,{device_id:i.props.device_id,measurement:t.measurement,name:t.name},t.id))},title:"Stats for data point"},"stats"),(0,_.jsx)(f.DeleteButton,{onClick:function(){return i.deleteList(t.id)},title:"Delete data point"},"del")]})]},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.loadList()}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(l.ContentReport,{header:"Device statistics",thead:["ID","Measurement","Tags","Name","OID",""],trows:this.state.data,listItem:this.listItem,result:this.state.result,children:[(0,_.jsx)(f.ReloadButton,{onClick:function(){return t.loadList(!0)}},"reload"),(0,_.jsx)(f.SearchButton,{onClick:function(){return t.lookupStats()},title:"Lookup device type stats"},"lookup"),(0,_.jsx)(f.AddButton,{onClick:function(){return t.changeContent((0,_.jsx)(b,{id:"new",device_id:t.props.device_id},"stats_new_"))},title:"Add statistics"},"add")]},"cr_stats"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),Z=function(t){(0,r.Z)(a,t);var e=(0,c.Z)(a);function a(t){var n;return(0,s.Z)(this,a),(n=e.call(this,t)).updateItems=function(t){return(0,d.Fh)("api/statistics/query_ddp",{device_id:n.props.device_id,measurement:n.props.measurement,name:n.props.name,range:t}).then((function(t){if("OK"===t.status){var e={};t.header.forEach((function(t,n){return e[t]=n}));var i=new n.vis.DataSet(t.data.map((function(t){return{x:t[e._time],y:t[e._value],group:"data"}})));n.graph.setItems(i),n.graph.fit()}}))},n.rangeChange=function(t){n.setState((0,i.Z)({},t.target.name,t.target.value)),n.updateItems(t.target.value)},n.gotoNow=function(){var t=new Date;n.graph.moveTo(t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes())},n.state={range:1},n.canvas=u.createRef(),n.graph=null,n.vis=null,n}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var t=this;n.e(389).then(n.bind(n,389)).then((function(e){t.vis=e;var n=new t.vis.DataSet([{id:"data",content:t.props.name}]);t.graph=new t.vis.Graph2d(t.canvas.current,[],n,{locale:"en",width:"100%",height:"100%",zoomMin:6e4,zoomMax:12096e5,clickToUse:!0,drawPoints:!1,interpolation:!1,legend:!0,dataAxis:{alignZeros:!1,icons:!0,left:{title:{text:"value"}}}}),t.updateItems(t.state.range)}))}},{key:"render",value:function(){var t=this;return(0,_.jsxs)(l.Article,{header:"Statistics",children:[(0,_.jsx)(f.ReloadButton,{onClick:function(){return t.updateItems(t.state.range)},title:"Reload"},"reload"),(0,_.jsx)(f.RevertButton,{onClick:function(){return t.gotoNow()},title:"Go to now"},"reset"),(0,_.jsx)("br",{}),(0,_.jsx)(p.TextLine,{id:"name",label:"Device Data Point",text:this.props.name},"name"),(0,_.jsx)("br",{}),(0,_.jsxs)(p.SelectInput,{id:"range",label:"Time range",value:this.state.range,onChange:this.rangeChange,children:[(0,_.jsx)("option",{value:"1",children:"1h"}),(0,_.jsx)("option",{value:"4",children:"4h"}),(0,_.jsx)("option",{value:"8",children:"8h"}),(0,_.jsx)("option",{value:"24",children:"24h"})]},"range"),(0,_.jsx)("div",{className:m.Z.graphs,ref:this.canvas})]},"ds_art")}}]),a}(u.Component),b=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.updateInfo=function(){return(0,d.Fh)("api/statistics/info",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/statistics/info",{id:this.props.id,device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(l.InfoArticle,{header:"Data point",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.TextInput,{id:"measurement",value:this.state.data.measurement,onChange:this.onChange,title:"Group, or measurement, that the data point belongs to"},"d_stat_measurement"),(0,_.jsx)(p.TextInput,{id:"tags",value:this.state.data.tags,onChange:this.onChange,title:"Tags are comma separated values that extend TSDB grouping"},"d_stat_tags"),(0,_.jsx)(p.TextInput,{id:"name",value:this.state.data.name,onChange:this.onChange,title:"Data point name"},"d_stat_name"),(0,_.jsx)(p.TextInput,{id:"oid",value:this.state.data.oid,onChange:this.onChange},"d_stat_oid")]},"d_stat_ic"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"d_stat_btn_save"),(0,_.jsx)(l.Result,{result:this.state.update&&this.state.result?JSON.stringify(this.state.result):JSON.stringify(this.state.update)},"d_stat_result")]},"d_stat_art"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),w=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).operationDev=function(t,e){window.confirm(e)&&(i.setState({wait:(0,_.jsx)(l.Spinner,{})}),(0,d.Fh)("api/device/control",{id:i.props.id,device_op:t}).then((function(t){return i.setState((0,a.Z)((0,a.Z)({},t),{},{wait:null}))})))},i.operationPem=function(t,e,n){window.confirm(n)&&(i.setState({wait:(0,_.jsx)(l.Spinner,{})}),(0,d.Fh)("api/device/control",{id:i.props.id,pem_op:e,pem_id:t}).then((function(t){return i.setState((0,a.Z)((0,a.Z)({},t),{},{wait:null}))})))},i.lookupState=function(t){return console.log("State lookup TODO")},i.state={pems:[]},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/control",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return(0,_.jsxs)(l.InfoArticle,{header:"Device Control",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)("label",{htmlFor:"reboot",children:"Reboot:"}),(0,_.jsx)(f.ReloadButton,{id:"reboot",onClick:function(){return t.operationDev("reboot","Really reboot?")},title:"Restart device"},"reboot"),(0,_.jsx)("label",{htmlFor:"shutdown",children:"Shutdown:"}),(0,_.jsx)(f.ShutdownButton,{id:"shutdown",onClick:function(){return t.operationDev("shutdown","Really shutdown?")},title:"Shutdown"},"shutdown"),this.state.pems.map((function(e){return"off"===e.state?(0,_.jsxs)(u.Fragment,{children:[(0,_.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),(0,_.jsx)(f.StartButton,{id:e.id,onClick:function(){return t.operationPem(e.id,"on","Power on PEM?")},title:"Power ON"},"dc_btn_start_"+e.id)]},e.id):"on"===e.state?(0,_.jsxs)(u.Fragment,{children:[(0,_.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),(0,_.jsx)(f.ShutdownButton,{id:e.id,onClick:function(){return t.operationPem(e.id,"off","Power off PEM?")},title:"Power OFF"},"dc_btn_stop_"+e.id)]},e.id):(0,_.jsxs)(u.Fragment,{children:[(0,_.jsxs)("label",{htmlFor:e.id,children:[e.name,":"]}),(0,_.jsx)(f.SearchButton,{id:e.id,onClick:function(){return t.lookupState(e.id)},title:"Lookup State"},"dc_btn_lookup_"+e.id)]},e.id)}))]},"ic"),(0,_.jsx)(l.Result,{result:JSON.stringify(this.state.result)},"result"),this.state.wait]},"ia_dc")}}]),n}(u.Component),B=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/configuration_template",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?(0,_.jsx)(l.CodeArticle,{children:"OK"===this.state.status?this.state.data.join("\n"):this.state.info},"dtemp_art"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),F=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.addDevice=function(){o.state.data.hostname&&(0,d.Fh)("api/device/new",o.state.data).then((function(t){return o.setState({result:JSON.stringify(t)})}))},o.searchIP=function(){o.state.data.ipam_network_id&&(0,d.Fh)("api/ipam/address_find",{network_id:o.state.data.ipam_network_id}).then((function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},{ip:t.ip})})}))},o.state={data:{ip:o.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:o.props.ipam_network_id,hostname:""},found:!0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/dns/domain_list",{filter:"forward"}).then((function(e){return t.setState({domains:e.data})})),(0,d.Fh)("api/ipam/network_list").then((function(e){return t.setState({networks:e.data})})),(0,d.Fh)("api/device/class_list").then((function(e){return t.setState({classes:e.data})}))}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.setState({data:{ip:this.props.ip,mac:"00:00:00:00:00:00",class:"device",ipam_network_id:this.props.ipam_network_id,hostname:""}})}},{key:"render",value:function(){var t=this;return this.state.domains&&this.state.classes&&this.state.networks?(0,_.jsxs)(l.InfoArticle,{header:"Device Add",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.TextInput,{id:"hostname",value:this.state.data.hostname,placeholder:"Device hostname",onChange:this.onChange},"dn_hostname"),(0,_.jsx)(p.SelectInput,{id:"class",label:"Device Class",value:this.state.data.class,onChange:this.onChange,children:this.state.classes.map((function(t){return(0,_.jsx)("option",{value:t,children:t},t)}))},"dn_class"),(0,_.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.data.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"dn_a_domain_id"),(0,_.jsx)(p.SelectInput,{id:"if_domain_id",label:"Interface Domain",value:this.state.data.if_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"dn_if_domain_id"),(0,_.jsx)(p.SelectInput,{id:"ipam_network_id",label:"Interface Network",value:this.state.data.ipam_network_id,onChange:this.onChange,children:this.state.networks.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:"".concat(t.netasc," (").concat(t.description,")")},e)}))},"dn_ipam_network_id"),(0,_.jsx)(p.TextInput,{id:"ip",label:"IP",value:this.state.data.ip,onChange:this.onChange},"dn_ip"),(0,_.jsx)(p.TextInput,{id:"mac",label:"MAC",value:this.state.data.mac,onChange:this.onChange},"dn_mac")]},"dn_content"),(0,_.jsx)(f.StartButton,{onClick:function(){return t.addDevice()},title:"Add device"},"dn_btn_start"),(0,_.jsx)(f.SearchButton,{onClick:function(){return t.searchIP()},title:"Find available IP"},"dn_btn_search"),(0,_.jsx)(l.Result,{result:this.state.result},"dn_result")]},"dn_art"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),M=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var a;return(0,s.Z)(this,n),(a=e.call(this,t)).onChange=function(t){return a.setState((0,i.Z)({},t.target.name,t.target.value))},a.changeContent=function(t){return a.setState({content:t})},a.state={ipam_network_id:void 0,a_domain_id:void 0,content:null},a}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/ipam/network_list").then((function(e){return t.setState({networks:e.data})})),(0,d.Fh)("api/dns/domain_list",{filter:"forward"}).then((function(e){return t.setState({domains:e.data})}))}},{key:"runDiscovery",value:function(){var t=this;this.setState({content:(0,_.jsx)(l.Spinner,{})}),(0,d.Fh)("api/device/discover",{network_id:this.state.ipam_network_id,a_domain_id:this.state.a_domain_id,if_domain_id:this.state.if_domain_id}).then((function(e){return t.setState({content:(0,_.jsx)(l.CodeArticle,{children:JSON.stringify(e,null,2)},"dd_result")})}))}},{key:"render",value:function(){var t=this;return this.state.networks&&this.state.domains?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(l.InfoArticle,{header:"Device Discovery",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.SelectInput,{id:"ipam_network_id",label:"Network",value:this.state.ipam_network_id,onChange:this.onChange,children:this.state.networks.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:"".concat(t.netasc," (").concat(t.description,")")},e)}))},"ipam_network_id"),(0,_.jsx)(p.SelectInput,{id:"a_domain_id",label:"Host Domain",value:this.state.a_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"a_domain_id"),(0,_.jsx)(p.SelectInput,{id:"if_domain_id",label:"Interface Domain",value:this.state.if_domain_id,onChange:this.onChange,children:this.state.domains.map((function(t,e){return(0,_.jsx)("option",{value:t.id,children:t.name},e)}))},"if_domain_id")]},"ic"),(0,_.jsx)(f.StartButton,{onClick:function(){return t.runDiscovery()},title:"Start discovery"},"start")]},"ia_dd"),(0,_.jsx)(h.NavBar,{id:"dd_navigation"},"dd_navigation"),this.state.content]}):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),N=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,s.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).listItem=function(t){return[t.id,t.hostname,t.class,t.ip,t.mac,t.oui,t.type_name,t.oid,t.serial,(0,_.jsx)(l.StateLeds,{state:t.state},"dr_"+t.id)]},t}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/list",{extra:["system","mac","type","oui","class"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?(0,_.jsx)(l.ContentReport,{header:"Devices",thead:["ID","Hostname","Class","IP","MAC","OUI","Type","OID","Serial","State"],trows:this.state.data,listItem:this.listItem},"dev_cr"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),L=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,s.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).listItem=function(t){return[t.id,t.hostname,t.ip,t.model,t.version,(0,_.jsx)(l.StateLeds,{state:t.ip_state},"dr_"+t.id)]},t}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/list",{extra:["model","version"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state?(0,_.jsx)(l.ContentReport,{header:"Devices",thead:["ID","Hostname","IP","Model","Version","State"],trows:this.state.data,listItem:this.listItem},"dev_cr"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),T=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).changeSelf=function(t){return i.props.changeSelf(t)},i.listItem=function(t){return[t.base,(0,_.jsx)(f.HrefButton,{text:t.name,onClick:function(){return i.changeSelf((0,_.jsx)(g,{field:"type",search:t.name},"device_list"))}},"tl_btn_"+t.name),t.icon]},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/type_list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.ContentList,{header:"Device Types",thead:["Class","Name","Icon"],trows:this.state.data,listItem:this.listItem},"cl"),(0,_.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]}):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),R=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).syncModels=function(){return(0,d.Fh)("api/device/model_list",{op:"sync"}).then((function(t){return i.setState(t)}))},i.listItem=function(t){return[t.id,t.name,t.type,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.ConfigureButton,{onClick:function(){return i.changeContent((0,_.jsx)(A,{id:t.id},"model_info_"+t.id))},title:"Edit model information"},"info"),(0,_.jsx)(f.DeleteButton,{onClick:function(){return i.deleteList(t.id)},title:"Delete model"},"del")]})]},i.deleteList=function(t){return window.confirm("Really delete model?")&&(0,d.Fh)("api/device/model_delete",{id:t}).then((function(e){e.deleted&&(i.setState({data:i.state.data.filter((function(e){return e.id!==t}))}),i.changeContent(null))}))},i.state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/model_list").then((function(e){return t.setState((0,a.Z)((0,a.Z)({},e),{},{result:"OK"}))}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(l.ContentList,{header:"Device Models",thead:["ID","Model","Type",""],trows:this.state.data,listItem:this.listItem,result:this.state.result,children:[(0,_.jsx)(f.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),(0,_.jsx)(f.SyncButton,{onClick:function(){return t.syncModels()},title:"Resync models"},"sync")]},"cl"),(0,_.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]}):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),A=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.updateInfo=function(){return(0,d.Fh)("api/device/model_info",(0,a.Z)({op:"update"},o.state.data)).then((function(t){return o.setState(t)}))},o.state={data:null,found:!0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/model_info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?(0,_.jsxs)(l.InfoArticle,{header:"Device Model",children:[(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)(p.TextLine,{id:"name",text:this.state.data.name},"dm_name"),(0,_.jsx)(p.TextLine,{id:"type",text:this.state.extra.type},"dm_type"),(0,_.jsx)(p.TextInput,{id:"defaults_file",label:"Default File",value:this.state.data.defaults_file,onChange:this.onChange},"dm_defaults_file"),(0,_.jsx)(p.TextInput,{id:"image_file",label:"Image  File",value:this.state.data.image_file,onChange:this.onChange},"dm_image_file")]},"dm_content"),(0,_.jsx)(p.TextAreaInput,{id:"parameters",onChange:this.onChange,value:this.state.data.parameters},"dm_parameters"),(0,_.jsx)(f.SaveButton,{onClick:function(){return t.updateInfo()},title:"Save"},"dm_btn_save")]},"dm_art"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),P=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var o;return(0,s.Z)(this,n),(o=e.call(this,t)).onChange=function(t){return o.setState({data:(0,a.Z)((0,a.Z)({},o.state.data),{},(0,i.Z)({},t.target.name,t.target.value))})},o.ouiSearch=function(){(0,d.Fh)("api/services/oui/info",{oui:o.state.data.oui}).then((function(t){return o.setState({content:(0,_.jsx)(l.InfoArticle,{children:(0,_.jsxs)(l.InfoColumns,{children:[(0,_.jsx)("label",{htmlFor:"oui",children:"OUI:"}),(0,_.jsx)("span",{id:"oui",children:t.data.oui}),(0,_.jsx)("label",{htmlFor:"company",children:"Company:"}),(0,_.jsx)("span",{id:"company",children:t.data.company})]},"os_cont")},"os_art")})}))},o.state={data:{oui:""},content:null},o}return(0,o.Z)(n,[{key:"render",value:function(){var t=this;return(0,_.jsxs)(l.Flex,{children:[(0,_.jsxs)(l.LineArticle,{children:["Type MAC address to find ",(0,_.jsx)(p.TextInput,{id:"oui",onChange:this.onChange,value:this.state.data.oui,placeholder:"00:00:00"},"oui"),(0,_.jsx)(f.SearchButton,{onClick:function(){return t.ouiSearch()},title:"Search for OUI"},"os_btn_search")]},"os_art"),this.state.content]},"flex")}}]),n}(u.Component),U=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).state={},i}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/services/oui/list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.data?(0,_.jsx)(l.ContentReport,{header:"OUI",thead:["oui","company"],trows:this.state.data,listItem:function(t){return["".concat(t.oui.substring(0,2),":").concat(t.oui.substring(2,4),":").concat(t.oui.substring(4,6)),t.company]}},"oui_list_cr"):(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component),O=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/device/function",{op:this.props.op,id:this.props.id,type:this.props.type}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){if(this.state){if("OK"===this.state.status){if(this.state.data.length>0){var t=Object.keys(this.state.data[0]);return(0,_.jsx)(l.ContentReport,{thead:t,trows:this.state.data,listItem:function(e){return t.map((function(t){return e[t]}))}},"df_cr")}return(0,_.jsx)(l.InfoArticle,{children:"No Data"},"df_art")}return(0,_.jsxs)(l.CodeArticle,{children:["Error in devdata: ",this.state.info]},"df_art")}return(0,_.jsx)(l.Spinner,{})}}]),n}(u.Component)},224:function(t,e,n){n.r(e),n.d(e,{Device:function(){return m},List:function(){return _},Search:function(){return v}});var i=n(413),a=n(942),s=n(671),o=n(144),r=n(340),c=n(882),u=n(791),d=n(252),l=n(885),h=n(698),p=n(682),f=n(184),v=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).changeContent=function(t){return i.props.changeSelf(t)},i.onChange=function(t){return i.setState((0,a.Z)({},t.target.name,t.target.value))},i.state={field:"mac",search:""},i}return(0,o.Z)(n,[{key:"render",value:function(){var t=this;return(0,f.jsxs)(l.LineArticle,{header:"FDB Search",children:[(0,f.jsxs)(h.SelectInput,{id:"field",onChange:this.onChange,value:this.state.field,children:[(0,f.jsx)("option",{value:"mac",children:"MAC"}),(0,f.jsx)("option",{value:"device_id",children:"Device ID"})]},"field"),(0,f.jsx)(h.TextInput,{id:"search",onChange:this.onChange,value:this.state.search,placeholder:"search"},"search"),(0,f.jsx)(p.SearchButton,{onClick:function(){return t.changeContent((0,f.jsx)(_,(0,i.Z)((0,i.Z)({},t.state),{},{changeSelf:t.props.changeSelf}),"fdb_list"))},title:"Search FDB"},"fs_btn_search")]},"fs_art")}}]),n}(u.Component),m=function(t){(0,r.Z)(a,t);var e=(0,c.Z)(a);function a(t){var i;return(0,s.Z)(this,a),(i=e.call(this,t)).changeContent=function(t){return i.props.changeSelf(t)},i.changeInterface=function(t){return n.e(167).then(n.bind(n,167)).then((function(e){return i.changeContent((0,f.jsx)(e.Info,{device_id:i.props.id,interface_id:t,changeSelf:i.changeContent},"interface_info"))}))},i.listItem=function(t,e){return[t.vlan,t.snmp_index,(0,f.jsx)(p.HrefButton,{text:t.name,onClick:function(){return i.changeInterface(t.interface_id)}},"fd_intf_"+t.interface_id),t.mac,t.oui]},i.state={wait:null,searchfield:""},i}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/fdb/list",{field:"device_id",search:this.props.id,extra:["oui"]}).then((function(e){return t.setState(e)}))}},{key:"syncFDB",value:function(){var t=this;this.setState({wait:(0,f.jsx)(l.Spinner,{})}),(0,d.Fh)("api/fdb/sync",{id:this.props.id,ip:this.props.ip,type:this.props.type}).then((function(e){return"OK"===e.status&&(0,d.Fh)("api/fdb/list",{field:"device_id",search:t.props.id,extra:["oui"]}).then((function(e){return t.setState((0,i.Z)((0,i.Z)({},e),{},{wait:null}))}))}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return(0,f.jsxs)(l.ContentReport,{header:"FDB",thead:["VLAN","SNMP","Interface","MAC","OUI"],trows:n,listItem:this.listItem,children:[(0,f.jsx)(p.ReloadButton,{onClick:function(){return t.componentDidMount()}},"fd_btn_reload"),(0,f.jsx)(p.SyncButton,{onClick:function(){return t.syncFDB()},title:"Resync FDB"},"fd_btn_sync"),(0,f.jsx)(h.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC"},"fd_search"),this.state.wait]},"fd_cr")}return(0,f.jsx)(l.Spinner,{})}}]),a}(u.Component),_=function(t){(0,r.Z)(i,t);var e=(0,c.Z)(i);function i(t){var a;return(0,s.Z)(this,i),(a=e.call(this,t)).changeSearch=function(t,e){return a.changeContent((0,f.jsx)(x,{mac:t},"fdb_info"))},a.changeVisualize=function(t){return"changeSelf"in a.props&&n.e(559).then(n.bind(n,559)).then((function(e){return a.changeContent((0,f.jsx)(e.Edit,{type:"device",id:t},"viz_id_"+t))}))},a.listItem=function(t,e){return[t.device_id,t.hostname,t.vlan,t.snmp_index,t.name,(0,f.jsx)(p.HrefButton,{text:t.mac,onClick:function(){return a.setState({searchfield:t.mac})}},"intf_"+e),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.InfoButton,{onClick:function(){return a.changeSearch(t.mac,e)},title:"Find interface(s)"},"info"),(0,f.jsx)(p.NetworkButton,{onClick:function(){return a.changeVisualize(t.device_id)}},"map")]})]},a.state={searchfield:""},a}return(0,o.Z)(i,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/fdb/list",{search:this.props.search,field:this.props.field,extra:["device_id","hostname"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;if(this.state.data){var e=this.state.searchfield.toUpperCase(),n=0===e.length?this.state.data:this.state.data.filter((function(t){return t.mac.includes(e)}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(l.ContentList,{header:"FDB",thead:["ID","Hostname","VLAN","SNMP","Interface","MAC",""],trows:n,listItem:this.listItem,children:[(0,f.jsx)(p.ReloadButton,{onClick:function(){return t.componentDidMount()}},"reload"),(0,f.jsx)(h.SearchField,{searchFire:function(e){return t.setState({searchfield:e})},placeholder:"Search MAC",text:this.state.searchfield},"search")]},"cl"),(0,f.jsx)(l.ContentData,{mountUpdate:function(e){return t.changeContent=e}},"cda")]})}return(0,f.jsx)(l.Spinner,{})}}]),i}(u.Component),x=function(t){(0,r.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).state={},i}return(0,o.Z)(n,[{key:"componentDidUpdate",value:function(t){t!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function(){var t=this;(0,d.Fh)("api/fdb/search",{mac:this.props.mac}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){return this.state.device?(0,f.jsx)(l.ContentReport,{header:"".concat(this.state.device.hostname," (").concat(this.state.device.id,")"),thead:["ID","Interface","Description","OUI"],trows:this.state.interfaces,listItem:function(t){return[t.interface_id,t.name,t.description,t.oui]}},"fd_cr"):this.state.oui?(0,f.jsxs)(l.LineArticle,{header:"Search result",children:["OUI: ",this.state.oui]},"fd_oui_la"):this.state.status?(0,f.jsxs)(l.LineArticle,{header:"Search result",children:["Search result: ",this.state.info]},"fd_oui_la"):(0,f.jsx)(l.Spinner,{})}}]),n}(u.Component)}}]);
//# sourceMappingURL=531.2a487577.chunk.js.map