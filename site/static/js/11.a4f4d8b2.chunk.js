(this.webpackJsonprims=this.webpackJsonprims||[]).push([[11,2,24],{41:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return _})),n.d(t,"List",(function(){return y})),n.d(t,"Show",(function(){return k})),n.d(t,"Edit",(function(){return g}));var a=n(18),i=n(14),o=n(3),r=n(4),c=n(5),s=n(6),l=n(0),d=n.n(l),u=n(12),p=n(13),h=n(19),v=n(15),m=n(1),f=n.n(m),_=function(e){Object(s.a)(Main,e);var t=Object(c.a)(Main);function Main(e){var n;return Object(o.a)(this,Main),(n=t.call(this,e)).changeContent=function(e){return n.setState(e)},n.state=d.a.createElement(y,{key:"viz_list"}),n}return Object(r.a)(Main,[{key:"render",value:function render(){return d.a.createElement(l.Fragment,null,this.state)}}]),Main}(l.Component),y=function(e){Object(s.a)(List,e);var t=Object(c.a)(List);function List(e){var n;return Object(o.a)(this,List),(n=t.call(this,e)).listItem=function(e){return[e.id,e.name,d.a.createElement(l.Fragment,null,d.a.createElement(h.EditButton,{key:"vl_btn_edt_"+e.id,onClick:function onClick(){return n.changeContent(d.a.createElement(g,{key:"viz_edit_"+e.id,id:e.id,changeSelf:n.changeContent,type:"map"}))},title:"Show and edit map"}),d.a.createElement(h.NetworkButton,{key:"vl_btn_net_"+e.id,onClick:function onClick(){return window.open("viz.html?id=".concat(e.id),"_blank")},title:"Show resulting map"}),d.a.createElement(h.DeleteButton,{key:"vl_btn_del_"+e.id,onClick:function onClick(){return n.deleteList(e.id)}}))]},n.changeContent=function(e){return n.setState({content:e})},n.deleteList=function(e){return window.confirm("Delete map?")&&Object(u.d)("api/visualize/delete",{id:e}).then((function(t){return t.deleted&&n.setState({data:n.state.data.filter((function(t){return t.id!==e})),content:null})}))},n.state={},n}return Object(r.a)(List,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/visualize/list").then((function(t){e.setState(t)}))}},{key:"render",value:function render(){var e=this;return d.a.createElement(l.Fragment,null,d.a.createElement(p.ContentList,{key:"vl_cl",header:"Maps",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(h.ReloadButton,{key:"vl_btn_reload",onClick:function onClick(){return e.componentDidMount()}})),d.a.createElement(p.ContentData,{key:"vl_cd"},this.state.content))}}]),List}(l.Component),k=function(e){Object(s.a)(Show,e);var t=Object(c.a)(Show);function Show(){var e;Object(o.a)(this,Show);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).doubleClick=function(e){console.log("DoubleClick",e.nodes),e.nodes[0]&&Object(u.d)("api/device/management",{id:e.nodes[0]}).then((function(e){e&&"OK"===e.status?e.data.url&&e.data.url.length>0?window.open(e.data.url):window.open("ssh://"+e.data.username+"@"+e.data.ip,"_self"):console.log("Data not ok:"+e)}))},e}return Object(r.a)(Show,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props.hasOwnProperty("id")?{id:this.props.id}:{name:this.props.name};n.e(5).then(n.bind(null,60)).then((function(n){Object(u.d)("api/visualize/show",t).then((function(t){var a=new n.DataSet(t.data.nodes),i=new n.DataSet(t.data.edges),o=new n.Network(e.refs.show_canvas,{nodes:a,edges:i},t.data.options);o.on("stabilizationIterationsDone",(function(){return o.setOptions({physics:!1})})),o.on("doubleClick",(function(t){return e.doubleClick(t)}))}))}))}},{key:"render",value:function render(){return d.a.createElement(p.Article,{key:"viz_show"},d.a.createElement("div",{className:f.a.network,id:"div_network",ref:"show_canvas"}))}}]),Show}(l.Component),g=function(e){Object(s.a)(Edit,e);var t=Object(c.a)(Edit);function Edit(e){var r;return Object(o.a)(this,Edit),(r=t.call(this,e)).changeImport=function(e){return n.e(0).then(n.bind(null,40)).then((function(t){return r.props.changeSelf(d.a.createElement(t.Info,{key:"di_"+e,id:e}))}))},r.onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.jsonHandler=function(e){var t=Object(i.a)({},r.state.data);try{t[e.target.name]=JSON.parse(e.target.value),r.setState({data:t})}catch(n){console.log("Error converting string to JSON")}},r.updateInfo=function(){return Object(u.d)("api/visualize/network",Object(i.a)({op:"update"},r.state.data)).then((function(e){return r.setState(e)}))},r.doubleClick=function(e){console.log("DoubleClick",e.nodes[0]),r.props.changeSelf&&r.changeImport(e.nodes[0])},r.toggleEdit=function(){r.edit=!r.edit,r.viz.network.setOptions({manipulation:{enabled:r.edit}}),r.setState({result:"Edit:"+r.edit})},r.toggleFix=function(){r.viz.nodes.forEach((function(e,t){return r.viz.nodes.update({id:t,fixed:!e.fixed})})),r.setState({data:Object(i.a)({},r.state.data,{nodes:r.viz.nodes.get()}),result:"Fix/Unfix positions"})},r.togglePhysics=function(){var e=r.state.data;e.options.physics.enabled=!e.options.physics.enabled,r.viz.network.setOptions({physics:e.options.physics.enabled}),r.setState({data:e,physics_button:e.options.physics.enabled?h.StopButton:h.StartButton,result:"Physics:"+e.options.physics.enabled})},r.networkSync=function(e){r.viz.network.storePositions(),r.setState({data:Object(i.a)({},r.state.data,{nodes:r.viz.nodes.get(),edges:r.viz.edges.get()}),result:"Moved "+r.viz.nodes.get(e.nodes[0]).label})},r.showDiv=function(e){return e===r.state.content?{display:"block"}:{display:"none"}},r.state={content:"network",physics_button:h.StartButton,found:!0,data:{name:"N/A"},result:""},r.viz={network:null,nodes:null,edges:null},r.results=d.a.createRef(),r.edit=!1,r}return Object(r.a)(Edit,[{key:"componentDidMount",value:function componentDidMount(){var e=this;n.e(5).then(n.bind(null,60)).then((function(t){Object(u.d)("api/visualize/network",{id:e.props.id,type:e.props.type}).then((function(n){e.viz.nodes=new t.DataSet(n.data.nodes),e.viz.edges=new t.DataSet(n.data.edges),n.data.options.physics.enabled=!0,e.viz.network=new t.Network(e.refs.edit_canvas,{nodes:e.viz.nodes,edges:e.viz.edges},n.data.options),e.viz.network.on("stabilizationIterationsDone",(function(){return e.viz.network.setOptions({physics:!1})})),e.viz.network.on("doubleClick",(function(t){return e.doubleClick(t)})),e.viz.network.on("dragEnd",(function(t){return e.networkSync(t)})),n.data.options.physics.enabled=!1,e.setState(n)}))}))}},{key:"render",value:function render(){var e=this,t=this.state.physics_button;return d.a.createElement(p.Article,{key:"viz_art",header:"Network Map"},"device"===this.props.type&&this.props.changeSelf&&d.a.createElement(h.BackButton,{key:"viz_back",onClick:function onClick(){return e.changeImport(e.props.id)}}),d.a.createElement(h.ReloadButton,{key:"viz_reload",onClick:function onClick(){return e.componentDidMount()}}),d.a.createElement(h.EditButton,{key:"viz_edit",onClick:function onClick(){return e.toggleEdit()}}),d.a.createElement(t,{key:"viz_physics",onClick:function onClick(){return e.togglePhysics()}}),d.a.createElement(h.FixButton,{key:"viz_fix",onClick:function onClick(){return e.toggleFix()}}),d.a.createElement(h.SaveButton,{key:"viz_save",onClick:function onClick(){return e.updateInfo()}}),d.a.createElement(h.NetworkButton,{key:"viz_net",onClick:function onClick(){return e.setState({content:"network"})}}),d.a.createElement(h.TextButton,{key:"viz_opt",text:"Options",onClick:function onClick(){return e.setState({content:"options"})}}),d.a.createElement(h.TextButton,{key:"viz_nodes",text:"Nodes",onClick:function onClick(){return e.setState({content:"nodes"})}}),d.a.createElement(h.TextButton,{key:"viz_edges",text:"Edges",onClick:function onClick(){return e.setState({content:"edges"})}}),d.a.createElement(v.TextInput,{key:"viz_name",id:"name",value:this.state.data.name,onChange:this.onChange}),d.a.createElement(p.Result,{key:"viz_result",result:this.state.result}),d.a.createElement("div",{className:f.a.network,style:this.showDiv("network"),ref:"edit_canvas"}),d.a.createElement("div",{className:f.a.network,style:this.showDiv("options")},d.a.createElement("textarea",{id:"options",name:"options",value:JSON.stringify(this.state.data.options,void 0,2),onChange:this.jsonHandler})),d.a.createElement("div",{className:f.a.network,style:this.showDiv("nodes")},d.a.createElement("textarea",{id:"nodes",name:"nodes",value:JSON.stringify(this.state.data.nodes,void 0,2),onChange:this.jsonHandler})),d.a.createElement("div",{className:f.a.network,style:this.showDiv("edges")},d.a.createElement("textarea",{id:"edges",name:"edges",value:JSON.stringify(this.state.data.edges,void 0,2),onChange:this.jsonHandler})))}}]),Edit}(l.Component)},49:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return _})),n.d(t,"Manage",(function(){return k})),n.d(t,"Inventory",(function(){return g}));var a=n(18),i=n(14),o=n(3),r=n(4),c=n(5),s=n(6),l=n(0),d=n.n(l),u=n(12),p=n(13),h=n(19),v=n(15),m=n(16),f=n(40),_=function(e){Object(s.a)(Main,e);var t=Object(c.a)(Main);function Main(e){var n;return Object(o.a)(this,Main),(n=t.call(this,e)).listItem=function(e){var t="up"===e.ip_state;return[e.hostname,e.type_name,d.a.createElement(l.Fragment,null,d.a.createElement(p.StateLeds,{state:e.ip_state}),t&&"manage"===e.type_functions&&d.a.createElement(h.InfoButton,{key:"hyp_btn_info_"+e.id,onClick:function onClick(){return n.context.changeMain(d.a.createElement(k,{key:"hypervisor_manage_"+e.id,device_id:e.id,type:e.type_name}))}}),t&&e.url&&e.url.length>0&&d.a.createElement(h.UiButton,{key:"hyp_ btn_ui_"+e.id,onClick:function onClick(){return window.open(e.url,"_blank")}}))]},n.changeContent=function(e){return n.setState({content:e})},n.state={},n}return Object(r.a)(Main,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/device/list",{field:"base",search:"hypervisor",extra:["type","functions","url"],sort:"hostname"}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return d.a.createElement(l.Fragment,null,d.a.createElement(p.ContentList,{key:"hyp_cl",header:"Hypervisor",thead:["Hostname","Type",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(h.SyncButton,{key:"hyp_btn_sync",onClick:function onClick(){return e.changeContent(d.a.createElement(y,null))}})),d.a.createElement(p.ContentData,{key:"hyp_cd"},this.state.content))}}]),Main}(l.Component);_.contextType=p.RimsContext;var y=function(e){Object(s.a)(Sync,e);var t=Object(c.a)(Sync);function Sync(e){var n;return Object(o.a)(this,Sync),(n=t.call(this,e)).listItem=function(e){return[e.type,e.host_id,e.device_id,e.vm,e.device_uuid,e.config]},n.state={},n}return Object(r.a)(Sync,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/device/vm_mapping").then((function(t){var n=[];["existing","inventory","discovered","database"].forEach((function(e){t.hasOwnProperty(e)&&t[e].forEach((function(t){t.type=e,n.push(t)}))})),e.setState({data:n})}))}},{key:"render",value:function render(){return d.a.createElement(p.ContentReport,{key:"hyp_cr",header:"VM Mapping",thead:["Status","Host","Device","VM Name","Device UUID","Config"],trows:this.state.data,listItem:this.listItem})}}]),Sync}(l.Component),k=function(e){Object(s.a)(Manage,e);var t=Object(c.a)(Manage);function Manage(e){var n;return Object(o.a)(this,Manage),(n=t.call(this,e)).changeContent=function(e){return n.setState({content:e})},n.state={},n}return Object(r.a)(Manage,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/device/management",{id:this.props.device_id}).then((function(t){e.context.loadNavigation(d.a.createElement(m.NavBar,{key:"hypervisor_navbar"},d.a.createElement(m.NavButton,{key:"hyp_nav_inv",title:"Inventory",onClick:function onClick(){return e.changeContent(d.a.createElement(g,{key:"hypervisor_inventory",device_id:e.props.device_id,type:e.props.type}))}}),d.a.createElement(m.NavButton,{key:"hyp_nav_logs",title:"Logs",onClick:function onClick(){return e.changeContent(d.a.createElement(f.Logs,{key:"device_logs",id:e.props.device_id}))}}),t.data.url&&t.data.url.length>0&&d.a.createElement(m.NavButton,{key:"hyp_nav_ui",title:"UI",onClick:function onClick(){return window.open(t.data.url,"_blank")}}),d.a.createElement(m.NavInfo,{key:"hyp_nav_name",title:t.data.hostname}))),e.setState(Object(i.a)({},t,{content:d.a.createElement(g,{key:"hypervisor_inventory",device_id:e.props.device_id,type:e.props.type})}))}))}},{key:"render",value:function render(){return d.a.createElement(l.Fragment,null,this.state.content)}}]),Manage}(l.Component);k.contextType=p.RimsContext;var g=function(e){Object(s.a)(Inventory,e);var t=Object(c.a)(Inventory);function Inventory(e){var n;return Object(o.a)(this,Inventory),(n=t.call(this,e)).changeContent=function(e){return n.setState({content:e})},n.sortList=function(e){"name"===e?n.state.data.sort((function(e,t){return e.name.localeCompare(t.name)})):n.state.data.sort((function(e,t){return e.id-t.id})),n.setState({sort:e})},n.listItem=function(e){return[e.id,e.name,d.a.createElement(b,{key:"hl_op_"+e.id,vm_id:e.id,device_id:n.props.device_id,type:n.props.type,changeContent:n.changeContent,state:e.state})]},n.state={sort:"name"},n}return Object(r.a)(Inventory,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/devices/"+this.props.type+"/inventory",{device_id:this.props.device_id,sort:this.state.sort}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;if(this.state.data){var t=[d.a.createElement(h.HeaderButton,{key:"hl_btn_id",text:"ID",highlight:"id"===this.state.sort,onClick:function onClick(){return e.sortList("id")}}),d.a.createElement(h.HeaderButton,{key:"hl_btn_vm",text:"VM",highlight:"name"===this.state.sort,onClick:function onClick(){return e.sortList("name")}}),"Operations"];return d.a.createElement(l.Fragment,null,d.a.createElement(p.ContentList,{key:"hl_cl",header:"Inventory",thead:t,trows:this.state.data,listItem:this.listItem},d.a.createElement(h.ReloadButton,{key:"hl_btn_reload",onClick:function onClick(){e.setState({data:void 0}),e.componentDidMount()}}),d.a.createElement(h.LogButton,{key:"hl_btn_logs",onClick:function onClick(){return e.changeContent(d.a.createElement(f.Logs,{key:"device_logs",id:e.props.device_id}))},title:"Device logs"})),d.a.createElement(p.ContentData,{key:"hl_cd"},this.state.content))}return d.a.createElement(p.Spinner,null)}}]),Inventory}(l.Component),b=function(e){Object(s.a)(Operation,e);var t=Object(c.a)(Operation);function Operation(e){var n;return Object(o.a)(this,Operation),(n=t.call(this,e)).operation=function(e){n.setState({wait:d.a.createElement(p.Spinner,null)}),Object(u.d)("api/devices/"+n.props.type+"/vm_op",{device_id:n.props.device_id,vm_id:n.props.vm_id,op:e}).then((function(e){return n.setState(Object(i.a)({},e,{wait:null}))}))},n.snapshot=function(e){n.setState({wait:d.a.createElement(p.Spinner,null)}),Object(u.d)("api/devices/"+n.props.type+"/vm_snapshot",{device_id:n.props.device_id,vm_id:n.props.vm_id,op:e}).then((function(e){return n.setState(Object(i.a)({},e,{wait:null}))}))},n.state={state:n.props.state,status:"",wait:null},n}return Object(r.a)(Operation,[{key:"render",value:function render(){var e=this,t="on"===this.state.state,n="off"===this.state.state;return d.a.createElement(l.Fragment,null,d.a.createElement(h.InfoButton,{key:"hyp_btn_info_"+this.props.vm_id,onClick:function onClick(){return e.props.changeContent(d.a.createElement(C,{key:"hypervisor_info_"+e.props.vm_id,device_id:e.props.device_id,vm_id:e.props.vm_id,type:e.props.type,changeSelf:e.props.changeContent}))},title:"VM info"}),(n||"suspended"===this.state.state)&&d.a.createElement(h.StartButton,{key:"hyp_btn_start_"+this.props.vm_id,onClick:function onClick(){return e.operation("on")},title:this.state.status}),t&&d.a.createElement(h.StopButton,{key:"hyp_btn_stop_"+this.props.vm_id,onClick:function onClick(){return e.operation("shutdown")},title:this.state.status}),t&&d.a.createElement(h.ReloadButton,{key:"hyp_btn_reload_"+this.props.vm_id,onClick:function onClick(){return e.operation("reboot")},title:this.state.status}),t&&d.a.createElement(h.PauseButton,{key:"hyp_btn_suspend_"+this.props.vm_id,onClick:function onClick(){return e.operation("suspend")},title:this.state.status}),(t||"suspended"===this.state.state)&&d.a.createElement(h.ShutdownButton,{key:"hyp_btn_shutdown_"+this.props.vm_id,onClick:function onClick(){return e.operation("off")},title:this.state.status}),n&&d.a.createElement(h.SnapshotButton,{key:"hyp_btn_snapshot_"+this.props.vm_id,onClick:function onClick(){return e.snapshot("create")},title:"Take snapshot"}),n&&d.a.createElement(h.ItemsButton,{key:"hyp_btn_snapshots_"+this.props.vm_id,onClick:function onClick(){return e.props.changeContent(d.a.createElement(E,{key:"hypervisor_snapshots_"+e.props.vm_id,device_id:e.props.device_id,vm_id:e.props.vm_id,type:e.props.type}))},title:"Snapshot info"}),this.state.wait)}}]),Operation}(l.Component),C=function(e){Object(s.a)(Info,e);var t=Object(c.a)(Info);function Info(e){var r;return Object(o.a)(this,Info),(r=t.call(this,e)).onChange=function(e){return r.setState({data:Object(i.a)({},r.state.data,Object(a.a)({},e.target.name,e.target.value))})},r.changeSelf=function(e){return r.props.changeSelf(e)},r.changeContent=function(e){return r.setState({content:e})},r.changeImport=function(e){return n.e(1).then(n.bind(null,42)).then((function(t){return r.setState({content:d.a.createElement(t.Info,{key:"interface_info_"+e[0],device_id:r.state.data.device_id,class:"virtual",mac:e[1].mac,name:e[1].name,interface_id:e[1].interface_id,changeSelf:r.changeContent})})}))},r.state={},r}return Object(r.a)(Info,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(u.d)("api/devices/"+this.props.type+"/vm_info",{device_id:this.props.device_id,vm_id:this.props.vm_id}).then((function(t){return e.setState(t)}))}},{key:"syncDatabase",value:function syncDatabase(){var e=this;Object(u.d)("api/devices/"+this.props.type+"/vm_info",{device_id:this.props.device_id,vm_id:this.props.vm_id,op:"update"}).then((function(t){return e.setState(t)}))}},{key:"updateInfo",value:function updateInfo(){var e=this;Object(u.d)("api/devices/"+this.props.type+"/vm_map",{device_uuid:this.state.data.device_uuid,device_id:this.state.data.device_id,host_id:this.props.device_id,op:"update"}).then((function(t){return e.setState({update:t.update})}))}},{key:"interfaceButton",value:function interfaceButton(e){var t=this;return this.state.data.device_id?e[1].interface_id?d.a.createElement(h.InfoButton,{key:"hyp_if_btn_"+e[0],onClick:function onClick(){return t.changeImport([e[0],{interface_id:e[1].interface_id}])}}):d.a.createElement(h.AddButton,{key:"hyp_if_btn_"+e[0],onClick:function onClick(){return t.changeImport(Object(i.a)({},e,{interface_id:"new"}))}}):d.a.createElement("div",null)}},{key:"render",value:function render(){var e=this;if(this.state.data){var t=this.state.data;return d.a.createElement(l.Fragment,null,d.a.createElement(p.InfoArticle,{key:"hyp_article",header:"VM info"},d.a.createElement(p.InfoColumns,{key:"hyp_ic",columns:3},d.a.createElement(v.TextLine,{key:"hyp_name",id:"name",text:t.name}),d.a.createElement("div",null),d.a.createElement(v.TextInput,{key:"hyp_device_id",id:"device_id",label:"Device ID",value:t.device_id,onChange:this.onChange}),d.a.createElement("div",null),d.a.createElement(v.TextLine,{key:"hyp_device_name",id:"device",label:"Device Name",text:t.device_name}),d.a.createElement("div",null),d.a.createElement(v.TextLine,{key:"hyp_snmp",id:"snmp_id",label:"SNMP id",text:t.snmp_id}),d.a.createElement("div",null),d.a.createElement(v.TextLine,{key:"hyp_uuid",id:"uuid",label:"UUID",text:t.device_uuid}),d.a.createElement("div",null),d.a.createElement(v.StateLine,{key:"hyp_state",id:"state",state:t.state}),d.a.createElement("div",null),d.a.createElement(v.TextLine,{key:"hyp_config",id:"config",text:t.config}),d.a.createElement("div",null),Object.entries(this.state.interfaces).map((function(t,n){return d.a.createElement(l.Fragment,{key:n},d.a.createElement(v.TextLine,{key:"hyp_intf_"+t[0],id:"interface_"+t[0],label:"Interface",text:"".concat(t[1].name," - ").concat(t[1].mac," - ").concat(t[1].port)}),e.interfaceButton(t))}))),d.a.createElement(h.SaveButton,{key:"hyp_btn_save",onClick:function onClick(){return e.updateInfo()},title:"Save mapping"}),d.a.createElement(h.SyncButton,{key:"hyp_btn_sync",onClick:function onClick(){return e.syncDatabase()},title:"Resync database with VM info"}),t.device_id&&d.a.createElement(h.GoButton,{key:"hyp_btn_device_vm_info",onClick:function onClick(){return e.changeSelf(d.a.createElement(f.Info,{key:"device_info",id:t.device_id,changeSelf:e.props.changeSelf}))},title:"VM device info"}),d.a.createElement(p.Result,{key:"hyp_res",result:JSON.stringify(this.state.update)})),d.a.createElement(m.NavBar,null),this.state.content)}return d.a.createElement(p.Spinner,null)}}]),Info}(l.Component),E=function(e){Object(s.a)(Snapshots,e);var t=Object(c.a)(Snapshots);function Snapshots(e){var n;return Object(o.a)(this,Snapshots),(n=t.call(this,e)).snapshot=function(e,t){n.setState({wait:d.a.createElement(p.Spinner,null)}),Object(u.d)("api/devices/"+n.props.type+"/vm_snapshot",{device_id:n.props.device_id,vm_id:n.props.vm_id,op:e,snapshot:t}).then((function(e){return n.setState(Object(i.a)({},e,{wait:null}))}))},n.deleteList=function(e){window.confirm("Really delete snapshot?")&&(n.setState({wait:d.a.createElement(p.Spinner,null)}),Object(u.d)("api/devices/"+n.props.type+"/vm_snapshot",{device_id:n.props.device_id,vm_id:n.props.vm_id,op:"remove",snapshot:e}).then((function(t){if(t.deleted){var a=0,i=n.state.data.filter((function(t){return t.id!==e}));i.forEach((function(e){a=a<parseInt(e.id)?parseInt(e.id):a})),n.setState({data:i,highest:a,wait:null})}})))},n.listItem=function(e){return[e.name,e.id,e.desc,e.created,e.state,d.a.createElement(l.Fragment,null,d.a.createElement(h.RevertButton,{key:"hs_revert_"+e.id,onClick:function onClick(){return n.snapshot("revert",e.id)},title:"Revert to snapshot"}),d.a.createElement(h.DeleteButton,{key:"hs_delete_"+e.id,onClick:function onClick(){return n.deleteList(e.id)},title:"Delete snapshot"}))]},n.state={},n}return Object(r.a)(Snapshots,[{key:"componentDidMount",value:function componentDidMount(){this.snapshot("list",void 0)}},{key:"render",value:function render(){var e=this;return d.a.createElement(p.ContentReport,{key:"hyp_snapshot_cr",header:"Snapshot (".concat(this.props.vm_id,") Highest ID:").concat(this.state.highest),thead:["Name","ID","Description","Created","State",""],trows:this.state.data,listItem:this.listItem},d.a.createElement(h.ReloadButton,{key:"hs_reload",onClick:function onClick(){return e.snapshot("list",void 0)},title:"Reload list"}),this.state.wait)}}]),Snapshots}(l.Component)}}]);
//# sourceMappingURL=11.a4f4d8b2.chunk.js.map