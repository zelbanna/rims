(this.webpackJsonprims=this.webpackJsonprims||[]).push([[9,5],{38:function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return h})),n.d(t,"Info",(function(){return p}));var a=n(18),o=n(14),i=n(4),c=n(5),r=n(6),l=n(7),u=n(0),s=n.n(u),d=n(12),k=n(13),m=n(20),f=n(15),h=function(e){Object(l.a)(List,e);var t=Object(r.a)(List);function List(e){var n;return Object(i.a)(this,List),(n=t.call(this,e)).deleteList=function(e){return window.confirm("Really delete location?")&&Object(d.d)("api/location/delete",{id:e}).then((function(t){t.deleted&&(n.setState({data:n.state.data.filter((function(t){return t.id!==e}))}),n.changeContent(null))}))},n.listItem=function(e){return[e.id,e.name,s.a.createElement(s.a.Fragment,null,s.a.createElement(m.ConfigureButton,{key:"conf",onClick:function onClick(){return n.changeContent(s.a.createElement(p,{key:"location",id:e.id}))},title:"Edit location"}),s.a.createElement(m.DeleteButton,{key:"del",onClick:function onClick(){return n.deleteList(e.id)},title:"Delete location"}))]},n.state={},n}return Object(c.a)(List,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/location/list").then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.ContentList,{key:"cl",header:"Locations",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(m.ReloadButton,{key:"reload",onClick:function onClick(){return e.componentDidMount()}}),s.a.createElement(m.AddButton,{key:"add",onClick:function onClick(){return e.changeContent(s.a.createElement(p,{key:"location",id:"new"}))},title:"Add location"})),s.a.createElement(k.ContentData,{key:"cda",mountUpdate:function mountUpdate(t){return e.changeContent=t}}))}}]),List}(u.Component),p=function(e){Object(l.a)(Info,e);var t=Object(r.a)(Info);function Info(e){var n;return Object(i.a)(this,Info),(n=t.call(this,e)).onChange=function(e){return n.setState({data:Object(o.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(d.d)("api/location/info",Object(o.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(c.a)(Info,[{key:"componentDidUpdate",value:function componentDidUpdate(e,t){e!==this.props&&this.componentDidMount()}},{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/location/info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return this.state.found?this.state.data?s.a.createElement(k.InfoArticle,{key:"ia_loc",header:"Location"},s.a.createElement(k.InfoColumns,{key:"ic"},s.a.createElement(f.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange})),s.a.createElement(m.SaveButton,{key:"save",onClick:function onClick(){return e.updateInfo()},title:"Save"})):s.a.createElement(k.Spinner,null):s.a.createElement(k.InfoArticle,{key:"ia_loc"},"Location id: ",this.props.id," removed")}}]),Info}(u.Component)},50:function(e,t,n){"use strict";n.r(t),n.d(t,"Main",(function(){return E})),n.d(t,"List",(function(){return _})),n.d(t,"Layout",(function(){return I})),n.d(t,"Infra",(function(){return b}));var a=n(18),o=n(14),i=n(4),c=n(5),r=n(6),l=n(7),u=n(0),s=n.n(u),d=n(12),k=n(13),m=n(15),f=n(20),h=n(16),p=n(58),y=n.n(p),v=n(36),C=n(38),E=function(e){Object(l.a)(Main,e);var t=Object(r.a)(Main);function Main(e){var n;return Object(i.a)(this,Main),(n=t.call(this,e)).compileNavItems=function(){return n.context.loadNavigation(s.a.createElement(h.NavBar,{key:"rack_navbar"},s.a.createElement(h.NavDropDown,{key:"dev_nav_racks",title:"Rack"},s.a.createElement(h.NavDropButton,{key:"dev_nav_all_rack",title:"Racks",onClick:function onClick(){return n.changeContent(s.a.createElement(_,{key:"rack_list"}))}}),s.a.createElement(h.NavDropButton,{key:"dev_nav_all_pdu",title:"PDUs",onClick:function onClick(){return n.changeContent(s.a.createElement(b,{key:"pdu_list",type:"pdu"}))}}),s.a.createElement(h.NavDropButton,{key:"dev_nav_all_con",title:"Consoles",onClick:function onClick(){return n.changeContent(s.a.createElement(b,{key:"console_list",type:"console"}))}})),s.a.createElement(h.NavButton,{key:"dev_nav_loc",title:"Locations",onClick:function onClick(){return n.changeContent(s.a.createElement(C.List,{key:"location_list"}))}})))},n.changeContent=function(e){return n.setState(e)},n.state=s.a.createElement(_,{key:"rack_list"}),n}return Object(c.a)(Main,[{key:"componentDidMount",value:function componentDidMount(){this.compileNavItems()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e!==this.props&&this.compileNavItems()}},{key:"render",value:function render(){return s.a.createElement(s.a.Fragment,null,this.state)}}]),Main}(u.Component);E.contextType=k.RimsContext;var _=function(e){Object(l.a)(List,e);var t=Object(r.a)(List);function List(e){var n;return Object(i.a)(this,List),(n=t.call(this,e)).listItem=function(e){return[s.a.createElement(f.HrefButton,{key:"rl_btn_loc_"+e.id,text:e.location,onClick:function onClick(){return n.changeContent(s.a.createElement(C.Info,{key:"li_"+e.location_id,id:e.location_id}))}}),e.name,s.a.createElement(s.a.Fragment,null,s.a.createElement(f.InfoButton,{key:"info",onClick:function onClick(){return n.changeContent(s.a.createElement(g,{key:"rack_info_"+e.id,id:e.id}))},title:"Rack information"}),s.a.createElement(f.GoButton,{key:"go",onClick:function onClick(){return n.context.changeMain(s.a.createElement(v.Main,{key:"rack_device_"+e.id,rack_id:e.id}))},title:"Rack inventory"}),s.a.createElement(f.ItemsButton,{key:"items",onClick:function onClick(){return n.changeContent(s.a.createElement(I,{key:"rack_layout_"+e.id,id:e.id,changeSelf:n.changeContent}))},title:"Rack layout"}),s.a.createElement(f.DeleteButton,{key:"del",onClick:function onClick(){return n.deleteList(e.id)},title:"Delete rack"}))]},n.deleteList=function(e){return window.confirm("Really delete rack?")&&Object(d.d)("api/rack/delete",{id:e}).then((function(t){t.deleted&&(n.setState({data:n.state.data.filter((function(t){return t.id!==e}))}),n.changeContent(null))}))},n.state={},n}return Object(c.a)(List,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/rack/list",{sort:"name"}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.ContentList,{key:"cl",header:"Racks",thead:["Location","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(f.ReloadButton,{key:"reload",onClick:function onClick(){return e.componentDidMount()}}),s.a.createElement(f.AddButton,{key:"add",onClick:function onClick(){return e.changeContent(s.a.createElement(g,{key:"rack_new_"+Object(d.e)(),id:"new"}))},title:"Add rack"})),s.a.createElement(k.ContentData,{key:"cda",mountUpdate:function mountUpdate(t){return e.changeContent=t}}))}}]),List}(u.Component);_.contextType=k.RimsContext;var g=function(e){Object(l.a)(Info,e);var t=Object(r.a)(Info);function Info(e){var n;return Object(i.a)(this,Info),(n=t.call(this,e)).onChange=function(e){return n.setState({data:Object(o.a)({},n.state.data,Object(a.a)({},e.target.name,e.target.value))})},n.updateInfo=function(){return Object(d.d)("api/rack/info",Object(o.a)({op:"update"},n.state.data)).then((function(e){return n.setState(e)}))},n.state={data:null,found:!0},n}return Object(c.a)(Info,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/rack/info",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return this.state.data?s.a.createElement(k.InfoArticle,{key:"rack_article",header:"Rack"},s.a.createElement(k.InfoColumns,{key:"rack_content"},s.a.createElement(m.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange}),s.a.createElement(m.TextInput,{key:"size",id:"size",value:this.state.data.size,onChange:this.onChange}),s.a.createElement(m.SelectInput,{key:"console",id:"console",value:this.state.data.console,onChange:this.onChange},this.state.consoles.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.hostname)}))),s.a.createElement(m.SelectInput,{key:"location_id",id:"location_id",label:"Location",value:this.state.data.location_id,onChange:this.onChange},this.state.locations.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.name)}))),s.a.createElement(m.SelectInput,{key:"pdu_1",id:"pdu_1",label:"PDU1",value:this.state.data.pdu_1,onChange:this.onChange},this.state.pdus.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.hostname)}))),s.a.createElement(m.SelectInput,{key:"pdu_2",id:"pdu_2",label:"PDU2",value:this.state.data.pdu_2,onChange:this.onChange},this.state.pdus.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.hostname)})))),s.a.createElement(f.SaveButton,{key:"ri_btn_save",onClick:function onClick(){return e.updateInfo()},title:"Save"})):s.a.createElement(k.Spinner,null)}}]),Info}(u.Component),I=function(e){Object(l.a)(Layout,e);var t=Object(r.a)(Layout);function Layout(e){var n;return Object(i.a)(this,Layout),(n=t.call(this,e)).changeContent=function(e){n.props.changeSelf&&n.props.changeSelf(e)},n.state={},n}return Object(c.a)(Layout,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/rack/devices",{id:this.props.id}).then((function(t){return e.setState(t)}))}},{key:"createRack",value:function createRack(e,t,n){for(var a=this,o=[],i=1;i<this.state.size+1;i++)o.push(s.a.createElement("div",{key:"left_"+i,className:y.a.rackLeft,style:{gridRow:-i}},i),s.a.createElement("div",{key:"right_"+i,className:y.a.rackRight,style:{gridRow:-i}},i));return t.forEach((function(e){return o.push(s.a.createElement("div",{key:"dev_"+e.id,className:y.a.rackItem,style:{gridRowStart:a.state.size+2-n*e.rack_unit,gridRowEnd:a.state.size+2-(n*e.rack_unit+e.rack_size)}},s.a.createElement(f.HrefButton,{key:"rd_btn_"+e.id,style:{color:"var(--ui-txt-color)"},onClick:function onClick(){return a.changeContent(s.a.createElement(v.Info,{key:"device_info",id:e.id}))},text:e.hostname})))})),s.a.createElement("div",{className:y.a.rack,style:{grid:"repeat(".concat(this.state.size-1,", 2vw)/2vw 25vw 2vw")}},o)}},{key:"render",value:function render(){return this.state.size?s.a.createElement(s.a.Fragment,null,s.a.createElement(k.InfoArticle,{key:"rl_front",header:"Front"},this.createRack("front",this.state.front,1)),s.a.createElement(k.InfoArticle,{key:"rl_back",header:"Back"},this.createRack("back",this.state.back,-1))):s.a.createElement(k.Spinner,null)}}]),Layout}(u.Component),b=function(e){Object(l.a)(Infra,e);var t=Object(r.a)(Infra);function Infra(e){var n;return Object(i.a)(this,Infra),(n=t.call(this,e)).listItem=function(e){return[s.a.createElement(f.HrefButton,{key:"dev_"+e.id,text:e.id,onClick:function onClick(){return n.changeContent(s.a.createElement(v.Info,{key:"device_"+e.id,id:e.id}))},title:"Device info"}),e.hostname,s.a.createElement(f.InfoButton,{key:"rinfra_btn_"+e.id,onClick:function onClick(){return n.context.changeMain({module:e.type_base,function:"Manage",args:{device_id:e.id,type:e.type_name}})},title:"Manage device"})]},n.state={},n}return Object(c.a)(Infra,[{key:"componentDidMount",value:function componentDidMount(){var e=this;Object(d.d)("api/device/list",{field:"base",search:this.props.type,extra:["type"]}).then((function(t){return e.setState(t)}))}},{key:"render",value:function render(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.ContentList,{key:"cl",header:this.props.type,thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(f.ReloadButton,{key:"reload",onClick:function onClick(){return e.componentDidMount()}})),s.a.createElement(k.ContentData,{key:"cda",mountUpdate:function mountUpdate(t){return e.changeContent=t}}))}}]),Infra}(u.Component);b.contextType=k.RimsContext},58:function(e,t,n){e.exports={rack:"rack_rack__2xnnq",rackLeft:"rack_rackLeft__1E8o9",rackRight:"rack_rackRight__1Jn29",rackItem:"rack_rackItem__2yVLG"}}}]);
//# sourceMappingURL=9.6a578e92.chunk.js.map