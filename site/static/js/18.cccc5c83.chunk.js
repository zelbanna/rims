(this.webpackJsonprims=this.webpackJsonprims||[]).push([[18],{53:function(t,e,n){"use strict";n.r(e),n.d(e,"Manage",(function(){return f})),n.d(e,"Inventory",(function(){return m}));var a=n(18),i=n(14),o=n(3),r=n(4),s=n(5),c=n(6),u=n(0),p=n.n(u),l=n(12),d=n(13),v=n(15),_=n(19),h=n(16),f=function(t){Object(c.a)(Manage,t);var e=Object(s.a)(Manage);function Manage(){var t;Object(o.a)(this,Manage);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).changeContent=function(e){return t.setState(e)},t}return Object(r.a)(Manage,[{key:"componentDidMount",value:function componentDidMount(){var t=this;Object(l.d)("api/device/hostname",{id:this.props.device_id}).then((function(e){t.context.loadNavigation(p.a.createElement(h.NavBar,{key:"pdu_navbar"},p.a.createElement(h.NavInfo,{key:"pdu_nav_name",title:e.data}),p.a.createElement(h.NavButton,{key:"pdu_nav_inv",title:"Inventory",onClick:function onClick(){return t.changeContent(p.a.createElement(m,{key:"pdu_inventory",device_id:t.props.device_id,type:t.props.type}))}}),p.a.createElement(h.NavButton,{key:"pdu_nav_info",title:"Info",onClick:function onClick(){return t.changeContent(p.a.createElement(y,{key:"pdu_info",device_id:t.props.device_id,type:t.props.type}))}})))})),this.setState(p.a.createElement(m,{key:"pdu_inventory",device_id:this.props.device_id,type:this.props.type}))}},{key:"render",value:function render(){return p.a.createElement(u.Fragment,null,this.state)}}]),Manage}(u.Component);f.contextType=d.RimsContext;var y=function(t){Object(c.a)(Info,t);var e=Object(s.a)(Info);function Info(t){var n;return Object(o.a)(this,Info),(n=e.call(this,t)).lookupSlots=function(){return Object(l.d)("api/devices/"+n.props.type+"/info",{device_id:n.props.device_id,op:"lookup"}).then((function(t){return n.setState(t)}))},n.state={},n}return Object(r.a)(Info,[{key:"componentDidMount",value:function componentDidMount(){var t=this;Object(l.d)("api/devices/"+this.props.type+"/info",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function render(){var t=this;if(this.state.data){for(var e=[],n=0;n<this.state.data.slots;n++)e.push(p.a.createElement(v.TextLine,{key:"pi_sn_"+n,id:"pi_slot_name_"+n,label:"Slot "+n+" Name",text:this.state.data[n+"_slot_name"]})),e.push(p.a.createElement(v.TextLine,{key:"pi_si_"+n,id:"pi_slot_id_"+n,label:"Slot "+n+" ID",text:this.state.data[n+"_slot_id"]}));return p.a.createElement(d.Flex,{key:"pi_flex",style:{justifyContent:"space-evenly"}},p.a.createElement(d.InfoArticle,{key:"pi_article",header:"PDU Device Info - "+this.props.type},p.a.createElement(d.InfoColumns,{key:"pi_info"},p.a.createElement(v.TextLine,{key:"pi_slots",id:"slots",label:"Right/Left slots",text:JSON.stringify(2===this.state.data.slots)}),e),p.a.createElement(_.ReloadButton,{key:"pi_btn_reload",onClick:function onClick(){return t.componentDidMount()}}),p.a.createElement(_.SearchButton,{key:"pi_btn_search",onClick:function onClick(){return t.lookupSlots()}})))}return p.a.createElement(d.Spinner,null)}}]),Info}(u.Component),m=function(t){Object(c.a)(Inventory,t);var e=Object(s.a)(Inventory);function Inventory(t){var n;return Object(o.a)(this,Inventory),(n=e.call(this,t)).changeContent=function(t){return n.setState({content:t})},n.listItem=function(t,e){return["".concat(t.slotname,".").concat(t.unit),p.a.createElement(_.HrefButton,{key:"pdu_inv_btn_"+e,onClick:function onClick(){return n.changeContent(p.a.createElement(b,Object.assign({key:"pdu_unit_"+e,device_id:n.props.device_id,type:n.props.type},t)))},text:t.name,title:"Edit port info"}),p.a.createElement(k,Object.assign({key:"pdu_state"+e,idx:e,device_id:n.props.device_id,type:n.props.type},t))]},n.state={},n}return Object(r.a)(Inventory,[{key:"componentDidMount",value:function componentDidMount(){var t=this;Object(l.d)("api/devices/"+this.props.type+"/inventory",{device_id:this.props.device_id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function render(){var t=this;return this.state.data?p.a.createElement(u.Fragment,null,p.a.createElement(d.ContentList,{key:"pdu_cl",header:"Inventory",thead:["Position","Device","State"],trows:this.state.data,listItem:this.listItem},p.a.createElement(_.ReloadButton,{key:"pdu_btn_reload",onClick:function onClick(){t.setState({data:void 0}),t.componentDidMount()}})),p.a.createElement(d.ContentData,{key:"pdu_cd"},this.state.content)):p.a.createElement(d.Spinner,null)}}]),Inventory}(u.Component),k=function(t){Object(c.a)(Operation,t);var e=Object(s.a)(Operation);function Operation(t){var n;return Object(o.a)(this,Operation),(n=e.call(this,t)).operation=function(t){n.setState({wait:p.a.createElement(d.Spinner,null)}),Object(l.d)("api/devices/"+n.props.type+"/op",{device_id:n.props.device_id,slot:n.props.slot,unit:n.props.unit,state:t}).then((function(t){return n.setState(Object(i.a)({},t,{wait:null}))}))},n.state={state:n.props.state,status:"",wait:null},n}return Object(r.a)(Operation,[{key:"render",value:function render(){var t=this,e="off"===this.state.state;return p.a.createElement(u.Fragment,null,e&&p.a.createElement(_.StartButton,{key:"pdu_btn_start_"+this.props.idx,onClick:function onClick(){return t.operation("on")},title:this.state.status}),!e&&p.a.createElement(_.StopButton,{key:"pdu_btn_stop_"+this.props.idx,onClick:function onClick(){return t.operation("off")},title:this.state.status}),!e&&p.a.createElement(_.ReloadButton,{key:"pdu_btn_reload_"+this.props.idx,onClick:function onClick(){return t.operation("reboot")},title:this.state.status}),this.state.wait)}}]),Operation}(u.Component),b=function(t){Object(c.a)(Unit,t);var e=Object(s.a)(Unit);function Unit(t){var n;return Object(o.a)(this,Unit),(n=e.call(this,t)).onChange=function(t){return n.setState(Object(a.a)({},t.target.name,t.target.value))},n.updatePDU=function(){n.setState({wait:p.a.createElement(d.Spinner,null),info:void 0}),Object(l.d)("api/devices/"+n.props.type+"/update",{op:"update",device_id:n.props.device_id,slot:n.props.slot,unit:n.props.unit,text:n.state.text}).then((function(t){return n.setState(Object(i.a)({},t,{wait:null}))}))},n.state={text:n.props.name,wait:null},n}return Object(r.a)(Unit,[{key:"render",value:function render(){var t=this,e="";return this.state.status&&(e="OK"===this.state.status?"OK":this.state.info),p.a.createElement(d.InfoArticle,{key:"pu_article"},p.a.createElement(d.InfoColumns,{key:"pu_info"},p.a.createElement(v.TextLine,{key:"pu_slot_unit",id:"su",label:"Slot.Unit",text:"".concat(this.props.slotname,".").concat(this.props.unit)}),p.a.createElement(v.TextInput,{key:"pu_slot_text",id:"text",value:this.state.text,onChange:this.onChange})),p.a.createElement(d.Result,{key:"pu_result",result:e}),p.a.createElement(_.SaveButton,{key:"pu_btn_save",onClick:function onClick(){return t.updatePDU()},title:"Update pdu"}),this.state.wait)}}]),Unit}(u.Component)}}]);
//# sourceMappingURL=18.cccc5c83.chunk.js.map