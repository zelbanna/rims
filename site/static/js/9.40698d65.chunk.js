(this.webpackJsonprims=this.webpackJsonprims||[]).push([[9,4],{40:function(t,e,n){"use strict";n.r(e),n.d(e,"List",(function(){return h})),n.d(e,"Info",(function(){return _}));var a=n(18),c=n(14),i=n(3),r=n(4),o=n(5),l=n(6),u=n(0),s=n.n(u),d=n(12),m=n(13),k=n(19),f=n(15),h=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).changeContent=function(t){return a.setState({content:t})},a.deleteList=function(t){return window.confirm("Really delete location?")&&Object(d.d)("api/location/delete",{id:t}).then((function(e){return e.deleted&&a.setState({data:a.state.data.filter((function(e){return e.id!==t})),content:null})}))},a.listItem=function(t){return[t.id,t.name,s.a.createElement(u.Fragment,null,s.a.createElement(k.ConfigureButton,{key:"loc_btn_info_"+t.id,onClick:function(){return a.changeContent(s.a.createElement(_,{key:"location_"+t.id,id:t.id}))},title:"Edit location"}),s.a.createElement(k.DeleteButton,{key:"loc_btn_delete_"+t.id,onClick:function(){return a.deleteList(t.id)},title:"Delete location"}))]},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/location/list").then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return s.a.createElement(u.Fragment,null,s.a.createElement(m.ContentList,{key:"loc_cl",header:"Locations",thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(k.ReloadButton,{key:"loc_btn_reload",onClick:function(){return t.componentDidMount()}}),s.a.createElement(k.AddButton,{key:"loc_btn_add",onClick:function(){return t.changeContent(s.a.createElement(_,{key:"location_new_"+Object(d.e)(),id:"new"}))},title:"Add location"})),s.a.createElement(m.ContentData,{key:"loc_cd"},this.state.content))}}]),n}(u.Component),_=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).onChange=function(t){return r.setState({data:Object(c.a)({},r.state.data,Object(a.a)({},t.target.name,t.target.value))})},r.changeContent=function(t){return r.setState({content:t})},r.updateInfo=function(){return Object(d.d)("api/location/info",Object(c.a)({op:"update"},r.state.data)).then((function(t){return r.setState(t)}))},r.state={data:null,found:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/location/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.found?this.state.data?s.a.createElement(m.InfoArticle,{key:"loc_article",header:"Location"},s.a.createElement(m.InfoColumns,{key:"loc_content"},s.a.createElement(f.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange})),s.a.createElement(k.SaveButton,{key:"loc_btn_save",onClick:function(){return t.updateInfo()},title:"Save"})):s.a.createElement(m.Spinner,null):s.a.createElement(m.InfoArticle,{key:"loc_removed"},"Location id: ",this.props.id," removed")}}]),n}(u.Component)},52:function(t,e,n){"use strict";n.r(e),n.d(e,"Main",(function(){return E})),n.d(e,"List",(function(){return C})),n.d(e,"Layout",(function(){return g})),n.d(e,"Infra",(function(){return j}));var a=n(18),c=n(14),i=n(3),r=n(4),o=n(5),l=n(6),u=n(0),s=n.n(u),d=n(12),m=n(13),k=n(15),f=n(19),h=n(16),_=n(59),p=n.n(_),v=n(38),y=n(40),E=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).compileNavItems=function(){return a.context.loadNavigation(s.a.createElement(h.NavBar,{key:"rack_navbar"},s.a.createElement(h.NavDropDown,{key:"dev_nav_racks",title:"Rack"},s.a.createElement(h.NavDropButton,{key:"dev_nav_all_rack",title:"Racks",onClick:function(){return a.changeContent(s.a.createElement(C,{key:"rack_list"}))}}),s.a.createElement(h.NavDropButton,{key:"dev_nav_all_pdu",title:"PDUs",onClick:function(){return a.changeContent(s.a.createElement(j,{key:"pdu_list",type:"pdu"}))}}),s.a.createElement(h.NavDropButton,{key:"dev_nav_all_con",title:"Consoles",onClick:function(){return a.changeContent(s.a.createElement(j,{key:"console_list",type:"console"}))}})),s.a.createElement(h.NavButton,{key:"dev_nav_loc",title:"Locations",onClick:function(){return a.changeContent(s.a.createElement(y.List,{key:"location_list"}))}})))},a.changeContent=function(t){return a.setState(t)},a.state=s.a.createElement(C,{key:"rack_list"}),a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.compileNavItems()}},{key:"componentDidUpdate",value:function(t){t!==this.props&&this.compileNavItems()}},{key:"render",value:function(){return s.a.createElement(u.Fragment,null,this.state)}}]),n}(u.Component);E.contextType=m.RimsContext;var C=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[s.a.createElement(f.HrefButton,{key:"rl_btn_loc_"+t.id,text:t.location,onClick:function(){return a.changeContent(s.a.createElement(y.Info,{key:"li_"+t.location_id,id:t.location_id}))}}),t.name,s.a.createElement(u.Fragment,null,s.a.createElement(f.InfoButton,{key:"rl_btn_info_"+t.id,onClick:function(){return a.changeContent(s.a.createElement(b,{key:"rack_info_"+t.id,id:t.id}))},title:"Rack information"}),s.a.createElement(f.GoButton,{key:"rl_btn_go_"+t.id,onClick:function(){return a.context.changeMain(s.a.createElement(v.Main,{key:"rack_device_"+t.id,rack_id:t.id}))},title:"Rack inventory"}),s.a.createElement(f.ItemsButton,{key:"rl_btn_list_"+t.id,onClick:function(){return a.changeContent(s.a.createElement(g,{key:"rack_layout_"+t.id,id:t.id,changeSelf:a.changeContent}))},title:"Rack layout"}),s.a.createElement(f.DeleteButton,{key:"rl_btn_del_"+t.id,onClick:function(){return a.deleteList(t.id)},title:"Delete rack"}))]},a.changeContent=function(t){return a.setState({content:t})},a.deleteList=function(t){return window.confirm("Really delete rack?")&&Object(d.d)("api/rack/delete",{id:t}).then((function(e){return e.deleted&&a.setState({data:a.state.data.filter((function(e){return e.id!==t})),content:null})}))},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/list",{sort:"name"}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return s.a.createElement(u.Fragment,null,s.a.createElement(m.ContentList,{key:"rack_cl",header:"Racks",thead:["Location","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(f.ReloadButton,{key:"rl_btn_reload",onClick:function(){return t.componentDidMount()}}),s.a.createElement(f.AddButton,{key:"rl_btn_add",onClick:function(){return t.changeContent(s.a.createElement(b,{key:"rack_new_"+Object(d.e)(),id:"new"}))},title:"Add rack"})),s.a.createElement(m.ContentData,{key:"rack_cd"},this.state.content))}}]),n}(u.Component);C.contextType=m.RimsContext;var b=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).onChange=function(t){return r.setState({data:Object(c.a)({},r.state.data,Object(a.a)({},t.target.name,t.target.value))})},r.updateInfo=function(){return Object(d.d)("api/rack/info",Object(c.a)({op:"update"},r.state.data)).then((function(t){return r.setState(t)}))},r.state={data:null,found:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/info",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return this.state.data?s.a.createElement(m.InfoArticle,{key:"rack_article",header:"Rack"},s.a.createElement(m.InfoColumns,{key:"rack_content"},s.a.createElement(k.TextInput,{key:"name",id:"name",value:this.state.data.name,onChange:this.onChange}),s.a.createElement(k.TextInput,{key:"size",id:"size",value:this.state.data.size,onChange:this.onChange}),s.a.createElement(k.SelectInput,{key:"console",id:"console",value:this.state.data.console,onChange:this.onChange},this.state.consoles.map((function(t){return s.a.createElement("option",{key:t.id,value:t.id},t.hostname)}))),s.a.createElement(k.SelectInput,{key:"location_id",id:"location_id",label:"Location",value:this.state.data.location_id,onChange:this.onChange},this.state.locations.map((function(t){return s.a.createElement("option",{key:t.id,value:t.id},t.name)}))),s.a.createElement(k.SelectInput,{key:"pdu_1",id:"pdu_1",label:"PDU1",value:this.state.data.pdu_1,onChange:this.onChange},this.state.pdus.map((function(t){return s.a.createElement("option",{key:t.id,value:t.id},t.hostname)}))),s.a.createElement(k.SelectInput,{key:"pdu_2",id:"pdu_2",label:"PDU2",value:this.state.data.pdu_2,onChange:this.onChange},this.state.pdus.map((function(t){return s.a.createElement("option",{key:t.id,value:t.id},t.hostname)})))),s.a.createElement(f.SaveButton,{key:"ri_btn_save",onClick:function(){return t.updateInfo()},title:"Save"})):s.a.createElement(m.Spinner,null)}}]),n}(u.Component),g=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).changeContent=function(t){a.props.changeSelf&&a.props.changeSelf(t)},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/rack/devices",{id:this.props.id}).then((function(e){return t.setState(e)}))}},{key:"createRack",value:function(t,e,n){for(var a=this,c=[],i=1;i<this.state.size+1;i++)c.push(s.a.createElement("div",{key:t+"_left_"+i,className:p.a.rackLeft,style:{gridRow:-i}},i),s.a.createElement("div",{key:t+"_right_"+i,className:p.a.rackRight,style:{gridRow:-i}},i));return e.forEach((function(t){return c.push(s.a.createElement("div",{key:"rd_"+t.id,className:p.a.rackItem,style:{gridRowStart:a.state.size+2-n*t.rack_unit,gridRowEnd:a.state.size+2-(n*t.rack_unit+t.rack_size)}},s.a.createElement(f.HrefButton,{key:"rd_btn_"+t.id,style:{color:"var(--ui-txt-color)"},onClick:function(){return a.changeContent(s.a.createElement(v.Info,{key:"device_info",id:t.id}))},text:t.hostname})))})),s.a.createElement("div",{className:p.a.rack,style:{grid:"repeat(".concat(this.state.size-1,", 2vw)/2vw 25vw 2vw")}},c)}},{key:"render",value:function(){return this.state.size?s.a.createElement(u.Fragment,null,s.a.createElement(m.InfoArticle,{key:"rl_front",header:"Front"},this.createRack("front",this.state.front,1)),s.a.createElement(m.InfoArticle,{key:"rl_back",header:"Back"},this.createRack("back",this.state.back,-1))):s.a.createElement(m.Spinner,null)}}]),n}(u.Component),j=function(t){Object(l.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).listItem=function(t){return[s.a.createElement(f.HrefButton,{key:"rinfra_dev_"+t.id,text:t.id,onClick:function(){return a.changeContent(s.a.createElement(v.Info,{key:"device_"+t.id,id:t.id}))},title:"Device info"}),t.hostname,s.a.createElement(f.InfoButton,{key:"rinfra_btn_"+t.id,onClick:function(){return a.context.changeMain({module:t.type_base,function:"Manage",args:{device_id:t.id,type:t.type_name}})},title:"Manage device"})]},a.changeContent=function(t){return a.setState({content:t})},a.state={},a}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;Object(d.d)("api/device/list",{field:"base",search:this.props.type,extra:["type"]}).then((function(e){return t.setState(e)}))}},{key:"render",value:function(){var t=this;return s.a.createElement(u.Fragment,null,s.a.createElement(m.ContentList,{key:"rinfra_cl",header:this.props.type,thead:["ID","Name",""],trows:this.state.data,listItem:this.listItem},s.a.createElement(f.ReloadButton,{key:"rinfra_btn_reload",onClick:function(){return t.componentDidMount()}})),s.a.createElement(m.ContentData,{key:"rinfra_cd"},this.state.content))}}]),n}(u.Component);j.contextType=m.RimsContext},59:function(t,e,n){t.exports={rack:"rack_rack__2xnnq",rackLeft:"rack_rackLeft__1E8o9",rackRight:"rack_rackRight__1Jn29",rackItem:"rack_rackItem__2yVLG"}}}]);
//# sourceMappingURL=9.40698d65.chunk.js.map